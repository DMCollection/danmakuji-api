webpackJsonp([1],{"+3PV":function(e,t){},"+4Ka":function(e,t){},"+83u":function(e,t){},"/OfW":function(e,t){},"0I4V":function(e,t){},"1OsX":function(e,t){},"1knY":function(e,t){},"36HN":function(e,t){},"3CZ4":function(e,t){},"3mTr":function(e,t){},"3p5y":function(e,t){},"3zQ2":function(e,t){e.exports="data:image/png;base64,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"},"4Znm":function(e,t){},"57+p":function(e,t){},"63xc":function(e,t){},"6Hjb":function(e,t){},"7Tk1":function(e,t){},"7VCx":function(e,t){},"8xzi":function(e,t){},"965u":function(e,t){},CI7M:function(e,t){},"D/v9":function(e,t){},D1bT:function(e,t){},F2bc:function(e,t,s){e.exports=s.p+"static/img/afterLoginYouCan.2579924.jpg"},HcXq:function(e,t,s){e.exports=s.p+"static/img/aboutUs.852b84c.png"},"I13/":function(e,t){},IF2z:function(e,t){},IWHN:function(e,t){e.exports="data:image/png;base64,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"},Iq8B:function(e,t){},L7fJ:function(e,t){},LQRp:function(e,t){},MHTg:function(e,t){},N3RQ:function(e,t){},N5fP:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACMElEQVRYR+2WPWgTYRjH/89djEIrpaCbgyhooSAiDkVzpw5dXDo7KIJCBzXpJdQm1wonhVy/vJQKburSQQcXBx2FXOyu+NFgNz8W6WCQWmpyf7nSSpN+5GKgN5gb33ue5/97//fe+zyCkB8JWR9NA9hu7hKA4ySWqCovhs8m3jWyqeYB8rkyBOqaKIXelbSemg0K0TyAm+NGMYIfTC3ZHR4AsWjqxoH/A2DyzWRbuRT5WfUJdtOBsYLTTUrVqeeuArhOgpDpUByw3lvRvYsdRQgOhwJg5537ELlZe9oJevtUtCfPJH8F+RMavgcsWkq00DEjwI0dBO5mNMNqCMDO565C8HhjkggupmPGS38t607HBd55QmICHKxbnJyDyCsA5fVY0vu6Et3z1OqJl9bX/jpg550JiAzWFL6W0YxHo69njka8ykJd0SABxBdCPWXq8e9+eCCA7NxUl1TUj0HqB4khkDI1wwkTYMLUjKEWQMuBlgOhOQBgPKMZ6dAAKBg0Y8ZUiADSZ8YGntcFEHqX/RE76947JlCKQa7ZejEkP69USkesC9Zqk9q2F/h9PeKpXbfPJT6RFLuQeyiUXggO1RPZ9j35w4OiD+sDbzd1w7G80+dBZkXQTnBeyJGMnnq2VTHbfdAJLl+nSK+APYDs3wmKwJIATxSJ3BmK3fpW1fL/eTdrib474wXnhCdyUij+eLbqKoXL8GRBibDYGW2b7z/d/3srrYYnomaBa/NDB/gD4aVPMCTRbEkAAAAASUVORK5CYII="},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),i=s("Xxa5"),o=s.n(i),n=s("exGp"),r=s.n(n),c={props:["iconImg"],name:"MenuItemButton",data:function(){return{fontSize:25,font:"25px",borderLength:0,iconImgStyle:{filter:"grayscale(90%)",transform:"scale(1)"},titleStyle:{},border:0}},computed:{},watch:{fontSize:function(e){TweenLite.to(this.$data,.5,{font:e+"px"})},borderLength:function(e){TweenLite.to(this.$data,.5,{border:e+"px"})}},methods:{inBtn:function(){this.fontSize=28,this.borderLength=100,this.iconImgStyle={filter:"grayscale(0%)",transform:"scale(1.1)",opacity:1},this.titleStyle={color:"#00a7e0",opacity:1}},outBtn:function(){this.fontSize=25,this.borderLength=0,this.iconImgStyle={filter:"grayscale(90%)",transform:"scale(1)",opacity:.7},this.titleStyle={}},jmp:function(){this.$emit("jmp")}},mounted:function(){console.log("图标",this.iconImg)}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"titleBox",on:{mouseover:e.inBtn,mouseout:e.outBtn,click:e.jmp}},[s("div",{staticClass:"titleInBox"},[s("img",{staticClass:"iconImg",style:e.iconImgStyle,attrs:{src:e.iconImg}}),e._v(" "),s("div",{staticClass:"title",style:[{"font-size":e.font},e.titleStyle]},[e._t("default")],2)]),e._v(" "),s("div",{staticClass:"borderLine",style:{width:e.border}})])},staticRenderFns:[]};var u=s("VU/8")(c,l,!1,function(e){s("8xzi")},"data-v-013981d8",null).exports,d=s("//Fk"),p=s.n(d),m=s("mtWM"),g=s.n(m);g.a.interceptors.request.use(function(e){return localStorage.JWT_TOKEN&&(e.headers.Authorization=""+localStorage.JWT_TOKEN),localStorage.setItem("ClientId",new Date-0),e.headers.ClientId=""+localStorage.ClientId,e},function(e){return p.a.reject(e)}),g.a.interceptors.response.use(function(e){return e},function(e){if(e&&e.response){switch(e.response.status){case 403:return e.message=e.response.data.msg,a.default.prototype.$message({message:e.message,type:"error"}),console.log("ready to clear/.............."),localStorage.setItem("USER_ID",""),localStorage.setItem("JWT_TOKEN",""),localStorage.setItem("loginUserName",""),localStorage.setItem("face",""),localStorage.setItem("ROLE",""),void setTimeout(function(){window.location.href="/"},2500);case 404:e.message="请求地址出错: "+e.response.config.url;break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;default:e.message=e.response.data.msg}a.default.prototype.$message({message:e.message,type:"error"})}return p.a.reject(e)});var v="https://api.darker.me",h={baseURL:"https://api.darker.online",baseURL2:v,getIndex:function(){return g.a.get(v+"/index")},getOnlineList:function(){return g.a.get(v+"/index/online")},getWelcome:function(){return g.a.get(v+"/index/is")},login:function(e){return g.a.post(v+"/auth/login",e)},logout:function(){return g.a.get(v+"/auth/logout")},checkToken:function(e){return g.a.get(v+"/tokens",e)},getVideosInfo:function(e,t){return g.a.get(v+"/videos/"+e+"/"+t)},getDanmakujiIdByBangumisIdAndepIndex:function(e,t){return g.a.get(v+"/episodes",{params:{bangumiId:e,epIndex:t}})},getsearchBangumisIdResult:function(e){return g.a.get(v+"/bangumis",{params:{bangumiName:e}})},getRepliesByEpId:function(e){return g.a.get(v+"/replies",{params:{epId:e}})},getRepliesByEpIdAndPageNum:function(e,t){return g.a.get(v+"/replies",{params:{epId:e,pn:t}})},addReply:function(e){return g.a.post(v+"/replies",e)},deleteReply:function(e){return g.a.delete(v+"/replies/"+e)},postActiontoReply:function(e,t){return g.a.post(v+"/replies/like/"+e+"/"+t)},getSubReplies:function(e,t){return g.a.get(v+"/replies/son",{params:{prid:e,pn:t}})},register:function(e){return g.a.post(v+"/users",e)},updateUserInfo:function(e,t){return g.a.put(v+"/users/"+e,t)},getEpisodeInfoByEpId:function(e){return g.a.get(v+"/episodes/"+e)},getNotices:function(e,t){return g.a.get(v+"/messages/"+e+"/type/"+t)},getNoticesBypn:function(e,t,s){return g.a.get(v+"/messages/"+e+"/type/"+t,{params:{pn:s}})},countUnreadMsg:function(e){return g.a.get(v+"/v2/messages/cum")},getSpecificReply:function(e){return g.a.get(v+"/replies",{params:{rid:e}})},verifyEmail:function(e,t){return g.a.get(v+"/auth/verify/uid/"+e+"/key/"+t)},getEmailResetCode:function(){return g.a.get(v+"/auth/emailReset")},modifyEmail:function(e,t){return g.a.put(v+"/users/"+e+"/email",t)},getUserInfoByUid:function(e){return g.a.get(v+"/users/"+e)},sendVideoMatchInfo:function(e){return g.a.post(v+"/videos/videoMatchInfo",e)},sendPostBangumi:function(e){return g.a.post(v+"/postBangumis",e)},getUserPostBangumi:function(e){return g.a.get(v+"/postBangumis",{params:e})},updatePostBangumi:function(e){return g.a.put(v+"/postBangumis",e)},updatePostBangumiThumb:function(e){return g.a.put(v+"/postBangumis/thumb",e)},deletePostBangumi:function(e){return g.a.delete(v+"/postBangumis/"+e)},matchVideoSuccess:function(e){return g.a.post(v+"/videos/matchSuccess",e)},reVerifyEmail:function(){return g.a.get(v+"/auth/emailReVerify")},updateUserPwd:function(e,t){return g.a.put(v+"/users/"+e+"/pwd",t)},getEpisodesByBid:function(e){return g.a.get(v+"/episodes/bid/"+e)},getMostViewBangumis:function(){return g.a.get(v+"/bangumis/mostView")},getBangumiById:function(e){return g.a.get(v+"/bangumis/"+e)},searchBangumisByName:function(e,t,s){return g.a.get(v+"/bangumis",{params:{bangumiName:e,pageNum:t,pageSize:s}})},getNotice:function(){return g.a.get(v+"/notices/showIndex")},getNoticeById:function(e){return g.a.get(v+"/notices/"+e)},getRepliesOfAnyClassPage:function(e){return g.a.get(v+"/v2/replies",{params:e})},postVideoReply:function(e){return g.a.post(v+"/v2/replies",e)},upvoteReply:function(e){return g.a.post(v+"/v2/replies/"+e+"/like")},cancelUpvoteReply:function(e){return g.a.delete(v+"/v2/replies/"+e+"/like")},deleteMyRpely:function(e){return g.a.delete(v+"/v2/replies/"+e)},getUnreadMessage:function(){return g.a.get(v+"/v2/messages/cum")},getMessageList:function(e){return g.a.get(v+"/v2/messages",{params:e})},deleteMessage:function(e){return g.a.delete(v+"/v2/messages/"+e)},checkEmail:function(e){return g.a.post(v+"/users/pwd/forget/cemail",e)},getMailCode:function(e){return g.a.get(v+"/users/pwd/forget/vcode",{params:e})},resetPassword:function(e){return g.a.put(v+"/users/pwd/forget/reset",e)},stickReply:function(e){return g.a.post(v+"/v2/replies/"+e+"/top")},unstickReply:function(e){return g.a.delete(v+"/v2/replies/"+e+"/top")},postReport:function(e){return g.a.post(v+"/reports",e)}},A={props:{isLogin:Boolean},data:function(){return console.log(this.login),console.log(localStorage),console.log(h),{show:!1,login:this.isLogin,avatar:localStorage.getItem("face")?localStorage.getItem("face"):"../../../static/img/noAvatar.jpg",account:localStorage.getItem("loginUserName"),selecting1:!1,selecting2:!1,selecting3:!1}},mounted:function(){console.log(this.avatar)},watch:{login:function(){this.$emit("update:isLogin",!1)},show:function(){this.show||(this.selecting1=!1,this.selecting2=!1,this.selecting3=!1)}},methods:{logout:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("登出"),t.next=3,h.logout();case 3:0!==(s=t.sent).data.code&&"登出成功"!==s.data.msg||(e.login=!1,localStorage.setItem("JWT_TOKEN",""),localStorage.setItem("loginUserName",""),localStorage.setItem("USER_ID","")),e.login=!1,localStorage.removeItem("USER_ID"),localStorage.removeItem("JWT_TOKEN"),localStorage.removeItem("loginUserName"),localStorage.removeItem("face"),window.location.href="/";case 11:case"end":return t.stop()}},t,e)}))()},jmpPersonal:function(){this.$emit("jmpPersonal")},jmpPersonalMain:function(){console.log("go"),this.$router.push({name:"user",params:{uid:localStorage.getItem("USER_ID")}})}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userMenuBox",on:{mouseover:function(t){e.show=!0},mouseout:function(t){e.show=!1}}},[a("img",{staticClass:"avatar",attrs:{src:e.avatar}}),e._v(" "),e.login?e._e():a("transition",{attrs:{name:"menu"}},[e.show?a("div",{staticClass:"withoutLogin"},[a("div",{staticClass:"afterLoginYouCan"},[a("p",{on:{click:e.logout}},[e._v("登陆后你可以")]),e._v(" "),a("img",{attrs:{width:"100%",height:"90%",src:s("F2bc")}})]),e._v(" "),a("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"#/login/"}},[a("div",{staticClass:"login"},[e._v("登入")])]),e._v(" "),a("div",{staticClass:"register"},[e._v("首次使用？"),a("a",{attrs:{href:"#/register/"}},[e._v("点我去注册")])])]):e._e()]),e._v(" "),e.login?a("transition",{attrs:{name:"menu"}},[e.show?a("div",{staticClass:"withLogin"},[a("div",{staticClass:"withLoginInBox"},[a("p",{staticClass:"withLoginItem",on:{click:e.jmpPersonalMain,mouseover:function(t){e.selecting1=!0}}},[e._v(e._s(e.account))]),e._v(" "),a("p",{staticClass:"withLoginItem",on:{click:e.jmpPersonal,mouseover:function(t){e.selecting2=!0}}},[e._v("个人中心")]),e._v(" "),a("p",{staticClass:"withLoginItem",on:{click:e.logout,mouseover:function(t){e.selecting3=!0}}},[e._v("退出登录")])])]):e._e()]):e._e(),e._v(" "),a("transition",{attrs:{name:"selectingTran1"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.selecting1,expression:"selecting1"}],staticClass:"selectingu selectingu1",on:{click:e.jmpPersonalMain,mouseout:function(t){e.selecting1=!1}}},[e._v(e._s(e.account))])]),e._v(" "),a("transition",{attrs:{name:"selectingTran1"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.selecting2,expression:"selecting2"}],staticClass:"selectingu selectingu2",on:{click:e.jmpPersonal,mouseout:function(t){e.selecting2=!1}}},[e._v("个人中心")])]),e._v(" "),a("transition",{attrs:{name:"selectingTran1"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.selecting3,expression:"selecting3"}],staticClass:"selectingu selectingu3",on:{click:e.logout,mouseout:function(t){e.selecting3=!1}}},[e._v("退出登录")])])],1)},staticRenderFns:[]};var I={props:["unreadNoticeNum"],components:{MenuItemButton:u},data:function(){return{show:!1,unreadNoticeNumTmp:this.unreadNoticeNum,selecting1:!1,selecting2:!1,selecting3:!1,selecting4:!1}},watch:{unreadNoticeNum:function(){console.log("未读",this.unreadNoticeNum),this.unreadNoticeNumTmp=this.unreadNoticeNum},show:function(){this.show||(this.selecting1=!1,this.selecting2=!1,this.selecting3=!1,this.selecting4=!1)}},methods:{jmpNotice:function(e){this.$emit("jmpNotice",e)}}},w={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"msgBox"},[s("div",{staticClass:"msgInbox",on:{mouseover:function(t){e.show=!0},mouseout:function(t){e.show=!1}}},[s("menu-item-button",{class:["msgTitle",{"animation-run":e.unreadNoticeNumTmp.total>0}],attrs:{"icon-img":"../../../static/img/notice.png"}},[e._v("消息"),e.unreadNoticeNumTmp.total?s("el-badge",{staticClass:"unreadNum",attrs:{value:e.unreadNoticeNumTmp.total,max:999}}):e._e()],1),e._v(" "),s("transition",{attrs:{name:"msgMenu"}},[e.show?s("div",{staticClass:"msgMenuBox"},[s("div",{staticClass:"msgItemBox"},[s("p",{staticClass:"msgItem",on:{mouseover:function(t){e.selecting1=!0},click:function(t){e.jmpNotice(0)}}},[e._v("\n                      系统通知\n                      "),e.unreadNoticeNumTmp.system>0?s("el-badge",{style:{"margin-top":"auto"},attrs:{value:e.unreadNoticeNumTmp.system,max:999}}):e._e()],1),e._v(" "),s("p",{staticClass:"msgItem",on:{click:function(t){e.jmpNotice(1)},mouseover:function(t){e.selecting2=!0}}},[e._v("回复我的 "),e.unreadNoticeNumTmp.reply>0?s("el-badge",{style:{"margin-top":"auto"},attrs:{value:e.unreadNoticeNumTmp.reply,max:999}}):e._e()],1),e._v(" "),s("p",{staticClass:"msgItem",on:{click:function(t){e.jmpNotice(2)},mouseover:function(t){e.selecting3=!0}}},[e._v("@我的 "),e.unreadNoticeNumTmp.at>0?s("el-badge",{style:{"margin-top":"auto"},attrs:{value:e.unreadNoticeNumTmp.at,max:999}}):e._e()],1),e._v(" "),s("p",{staticClass:"msgItem",on:{click:function(t){e.jmpNotice(3)},mouseover:function(t){e.selecting4=!0}}},[e._v("收到的赞 "),e.unreadNoticeNumTmp.like>0?s("el-badge",{style:{"margin-top":"auto"},attrs:{value:e.unreadNoticeNumTmp.like,max:999}}):e._e()],1)])]):e._e()]),e._v(" "),s("transition",{attrs:{name:"selectingTran"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.selecting1,expression:"selecting1"}],staticClass:"selecting selecting1",on:{mouseout:function(t){e.selecting1=!1},click:function(t){e.jmpNotice(0)}}},[e._v("\n            系统通知\n            "),e.unreadNoticeNumTmp.system>0?s("el-badge",{style:{"margin-top":"auto"},attrs:{value:e.unreadNoticeNumTmp.system,max:999}}):e._e()],1)]),e._v(" "),s("transition",{attrs:{name:"selectingTran"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.selecting2,expression:"selecting2"}],staticClass:"selecting selecting2",on:{mouseout:function(t){e.selecting2=!1},click:function(t){e.jmpNotice(1)}}},[e._v("\n            回复我的\n            "),e.unreadNoticeNumTmp.reply>0?s("el-badge",{style:{"margin-top":"auto"},attrs:{value:e.unreadNoticeNumTmp.reply,max:999}}):e._e()],1)]),e._v(" "),s("transition",{attrs:{name:"selectingTran"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.selecting3,expression:"selecting3"}],staticClass:"selecting selecting3",on:{mouseout:function(t){e.selecting3=!1},click:function(t){e.jmpNotice(2)}}},[e._v("\n            @我的\n            "),e.unreadNoticeNumTmp.at>0?s("el-badge",{style:{"margin-top":"auto"},attrs:{value:e.unreadNoticeNumTmp.at,max:999}}):e._e()],1)]),e._v(" "),s("transition",{attrs:{name:"selectingTran"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.selecting4,expression:"selecting4"}],staticClass:"selecting selecting4",on:{mouseout:function(t){e.selecting4=!1},click:function(t){e.jmpNotice(3)}}},[e._v("\n            收到的赞\n            "),e.unreadNoticeNumTmp.like>0?s("el-badge",{style:{"margin-top":"auto"},attrs:{value:e.unreadNoticeNumTmp.like,max:999}}):e._e()],1)])],1)])},staticRenderFns:[]};var C={data:function(){return{isLogin:!1,intervalId:"",unreadNotice:{at:0,like:0,reply:0,system:0,total:0}}},components:{MenuItemButton:u,UserMenu:s("VU/8")(A,f,!1,function(e){s("I13/")},"data-v-5efb08b3",null).exports,MessageMenu:s("VU/8")(I,w,!1,function(e){s("v39d")},"data-v-f1ca6c98",null).exports},methods:{mainPage:function(){this.countUnreadMsg(),this.$emit("jmpIndex")},watchPage:function(){this.countUnreadMsg(),this.$emit("jmpWatch")},personalPage:function(){this.countUnreadMsg(),this.$emit("jmpPersonal")},noticePage:function(e){console.log("MenuButtonBox",e),this.unreadNotice={at:0,like:0,reply:0,system:0,total:0},this.$emit("jmpNotice",e)},checkLocalStorage:function(){return void 0!==window.localStorage||(this.$message({message:"请关闭隐私模式,或者浏览器太老旧了,否则无法保存登录状态",type:"warning"}),!1)},countUnreadMsg:function(){var e=this;return r()(o.a.mark(function t(){var s,a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(s=localStorage.getItem("USER_ID"))){t.next=9;break}return t.next=4,h.countUnreadMsg(s);case 4:a=t.sent,0===(i=a.data).code?(console.log("更新未读信息列表:",i),e.unreadNotice=i.data):console.log("no new msg"),t.next=10;break;case 9:console.log("未登陆");case 10:case"end":return t.stop()}},t,e)}))()}},watch:{isLogin:function(){console.log("isLogin 改变了")}},mounted:function(){var e=this;return r()(o.a.mark(function t(){var s,a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.checkLocalStorage()){t.next=11;break}if(s=localStorage.getItem("loginUserName"),a=localStorage.getItem("JWT_TOKEN"),localStorage.getItem("USER_ID"),null!=a&&""!==a){t.next=7;break}return e.isLogin=!1,t.abrupt("return");case 7:return t.next=9,h.checkToken(a);case 9:0!==(i=t.sent).data.code&&"ojbk"!==i.data.msg||(e.isLogin=!0,e.loginUserName=s);case 11:case"end":return t.stop()}},t,e)}))()},created:function(){var e=this;console.log("app created!"),this.countUnreadMsg(),this.checkLocalStorage()&&(localStorage.getItem("USER_ID")&&localStorage.getItem("JWT_TOKEN")&&localStorage.getItem("loginUserName")&&localStorage.getItem("ROLE")?(this.isLogin=!0,console.log("set isLogin true!")):this.isLogin=!1,localStorage.getItem("USER_ID")&&this.isLogin&&(this.intervalId=setInterval(function(){e.countUnreadMsg()},6e4)))},beforeDestroy:function(){this.intervalId&&clearInterval(this.intervalId)}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"logo",on:{click:e.mainPage}},[a("img",{staticClass:"logoImg",attrs:{src:s("ZBJ4")}}),e._v(" "),a("div",{staticClass:"logoTitle"},[e._v("Darker")])]),e._v(" "),a("div",{staticClass:"headerBtnBox"},[a("div",{staticClass:"headerBtnInBox"},[a("menu-item-button",{staticStyle:{margin:"0 auto"},attrs:{"icon-img":"../../../static/img/home2.png"},on:{jmp:e.mainPage}},[e._v("首页")]),e._v(" "),a("menu-item-button",{staticStyle:{margin:"0 20px"},attrs:{"icon-img":"../../../static/img/video.png"},on:{jmp:e.watchPage}},[e._v("观看")])],1)]),e._v(" "),a("div",{staticClass:"msgAndUserBtn"},[e.isLogin?a("message-menu",{staticStyle:{margin:"auto auto"},attrs:{"unread-notice-num":e.unreadNotice},on:{jmpNotice:e.noticePage}}):e._e(),e._v(" "),a("user-menu",{staticStyle:{margin:"auto 100px"},attrs:{"is-login":e.isLogin},on:{"update:isLogin":function(t){e.isLogin=t},jmpPersonal:e.personalPage}})],1)])},staticRenderFns:[]};var y=s("VU/8")(C,x,!1,function(e){s("Q+m0")},"data-v-7ab9c7b7",null).exports,B={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"indexFooter1"},[s("div",{staticClass:"inderFooter21"},[s("div",{staticClass:"footerAbout1"},[s("a",{staticClass:"footerItem1",attrs:{target:"_blank",href:"#/aboutUs"}},[e._v("关于我们")]),e._v(" "),s("a",{staticClass:"footerItem1",attrs:{target:"_blank",href:"#/contactUs"},on:{mouseover:function(t){e.infoText="联系我们"},mouseout:function(t){e.infoText="用爱发电"}}},[e._v(e._s(e.infoText))]),e._v(" "),e._m(0)]),e._v(" "),e._m(1),e._v(" "),s("div",{staticClass:"indexFooterInBox1"},[s("a",{staticClass:"footerItem",attrs:{target:"_blank",href:e.GLOBAL.DOInviteLink}},[s("img",{staticClass:"elementIcon1",attrs:{src:e.GLOBAL.imgURL+"/FlgYbSr.png"}})])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"footerItem1",attrs:{target:"_blank",href:"https://t.me/joinchat/D6RlYg6geGuiS3WP_ag5zg"}},[t("img",{staticStyle:{width:"20px",height:"15px"},attrs:{src:s("ZBJ4")}}),t("p",[this._v("加入我们")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"authorInfo1"},[t("p",[this._v("Crafted with")]),this._v(" "),t("p",{staticStyle:{color:"red","font-size":"18px"}},[this._v("❤")]),this._v(" "),t("p",[this._v("by Darkers ©2018 Darker.")])])}]};var b=s("VU/8")({data:function(){return{infoText:"用爱发电"}}},B,!1,function(e){s("gbbA")},"data-v-7a7bc869",null).exports,_={name:"App",components:{MenuItemButton:u,MenuButtonBox:y,footer1:b},data:function(){return{routerInfo:{},showMenu:!1,showMain:!1,searchText:"",shake:!1,showInputKey:!1,searchBoxMove:{transform:"translate(-50%,0%) rotateZ(0deg)"},activeDate:"",toIndexFlag:!0}},computed:{showSearch:function(){return"/searchResult"===this.$route.path||"/"===this.$route.path},getSearchPlaceholderText:function(){return"/searchResult"===this.$route.path?" 按ESC返回":" 请输入关键词"},showFooter:function(){return"/"!==this.$route.path}},watch:{aNum:function(e){TweenLite.to(this.$data,.5,{a:e+"px"})},searchText:function(){var e=r()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.searchText=t,this.routerInfo={searchText:this.searchText},t&&(console.log("newText not empty: ",t),"/searchResult"!==this.$route.path&&(console.log("go to searchResult page..."),this.searchBoxMove={transform:"translate(-50%,-150%) rotateZ(-360deg)"},this.$router.push({name:"searchResult"})));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},methods:{toIndex:function(){console.log("跳转到了首页"),"/"===this.$route.path&&(this.searchText?(this.searchText="",this.showInputKey=!1,this.searchBoxMove={transform:"translate(-50%,0%) rotateZ(0deg)"}):this.showInputKey=!1)},jmpIndex:function(){this.activeDate=(new Date).getTime(),this.$router.push({name:"index"})},jmpWatch:function(){this.$router.push({name:"blank"}),this.$router.push({name:"watch"})},jmpPersonal:function(){this.activeDate=(new Date).getTime(),this.$router.push({name:"personal"})},jmpNotice:function(e){console.log("App",e),console.log(window.location.host),this.activeDate=(new Date).getTime(),this.routerInfo={noticeIndex:e},this.$router.push({name:"notice",query:{pageNum:e}})},checkLocalStorage:function(){return void 0!==window.localStorage||(this.$message({message:"请关闭隐私模式,或者浏览器太老旧了,否则无法保存登录状态",type:"warning"}),!1)},backToIndex:function(){console.log("esc keyup"),"/searchResult"===this.$route.path&&(this.searchText="",this.showInputKey=!1,this.searchBoxMove={transform:"translate(-50%,0%) rotateZ(0deg)"},this.$router.push({name:"index"}),console.log("backToIndex!!!"))},onMouseLeaveSearchBox:function(){"/"===this.$route.path&&""===this.searchText&&(this.showInputKey=!1)}}},R={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"topBox"},[s("menu-button-box",{on:{jmpIndex:e.jmpIndex,jmpWatch:e.jmpWatch,jmpPersonal:e.jmpPersonal,jmpNotice:e.jmpNotice}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],staticClass:"searchCom",style:e.searchBoxMove,on:{mouseover:function(t){e.showInputKey=!0},mouseout:e.onMouseLeaveSearchBox}},[s("div",{class:e.showInputKey?"searchIconLeftOnS":"searchIconLeft"}),e._v(" "),s("transition",{directives:[{name:"show",rawName:"v-show",value:e.showInputKey,expression:"showInputKey"}],attrs:{name:"searchInputTran"}},[e.showInputKey?s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],staticClass:"searchKeyInput",attrs:{placeholder:e.getSearchPlaceholderText},domProps:{value:e.searchText},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"esc",27,t.key,"Escape")?e.backToIndex(t):null},input:function(t){t.target.composing||(e.searchText=t.target.value)}}}):e._e()]),e._v(" "),s("div",{class:e.showInputKey?"searchIconRightOnS":"searchIconRight"})],1),e._v(" "),s("transition",{directives:[{name:"show",rawName:"v-show",value:e.showInputKey,expression:"showInputKey"}],attrs:{name:"routerTran"}},[s("router-view",e._b({key:e.activeDate,staticStyle:{"margin-bottom":"30px"},on:{toIndex:e.toIndex}},"router-view",e.routerInfo,!1))],1),e._v(" "),s("footer1",{staticStyle:{"margin-bottom":"0"}})],1)},staticRenderFns:[]};var k=s("VU/8")(_,R,!1,function(e){s("6Hjb")},null,null).exports,E=s("zL8q"),M=s.n(E),S=(s("tvR6"),s("/ocq")),D={data:function(){return{start:!1,startB:!1,timer:null,carouselTimer:null,bgImgUrl:[{imageUrl:"../../../static/img/1.jpg"}],bgImgIndex:0,hotImgNowLoc:"0px",announceInfo:{},imgWidth:"",widthNum:0,infoText:"用爱发电",welcome:"Welcome to darker!!",online:"",showImgTitle:!1}},methods:{startFn:function(){this.start=!0;var e=this;this.timer=setTimeout(function(){e.startB=!0},2e3)},endFn:function(){this.start=!1,clearTimeout(this.timer),this.startB=!1},userChangeHotImgNow:function(e){var t=this;clearInterval(this.carouselTimer),this.carouselTimer=null,this.bgImgIndex=e,this.hotImgNowLoc=(this.widthNum*this.bgImgIndex).toString()+"%";var s=document.getElementById("carousel");s.classList.remove("run-animation"),s.offsetLeft,s.classList.add("run-animation"),this.carouselTimer=setInterval(function(){t.bgImgIndex++,t.bgImgIndex==t.bgImgUrl.length&&(t.bgImgIndex=0),t.hotImgNowLoc=(t.widthNum*t.bgImgIndex).toString()+"%"},5e3)},jmpToBangumi:function(e){console.log(e),window.location.assign(e.linkUrl)},jmpNowBangumi:function(){window.location.assign(this.bgImgUrl[this.bgImgIndex].linkUrl)},jmpAnnounce:function(){this.$router.push({name:"announce",params:{id:this.announceInfo.id}})},jmpOnlineList:function(){this.$router.push({name:"onlineList"})},initAnnounce:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getNotice();case 2:0===(s=t.sent.data).code&&(e.announceInfo=s.data.indexNotice,console.log("公告信息",e.announceInfo));case 4:case"end":return t.stop()}},t,e)}))()},initCommend:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getMostViewBangumis();case 2:s=t.sent.data,console.log("推荐番剧",s),0===s.code&&(e.bgImgUrl=s.data.bangumi,e.imgWidth=(100/e.bgImgUrl.length).toString()+"%",e.widthNum=100/e.bgImgUrl.length);case 5:case"end":return t.stop()}},t,e)}))()},initWelcome:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getWelcome();case 2:if(s=e.sent.data,console.log("欢迎标语",s),0!=s.code&&""!=s.data){e.next=8;break}return e.abrupt("return",s.data);case 8:return e.abrupt("return","Welcome to darker!!");case 9:case"end":return e.stop()}},t,e)}))()},initIndexInfo:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getIndex();case 2:s=t.sent.data,console.log("初始化首页新接口",s),0==s.code&&(e.online=s.data.online_watch_count,""==s.data.index_sentence&&s.data.index_sentence?e.welcome:e.welcome=s.data.index_sentence,e.bgImgUrl=s.data.index_recommend,e.imgWidth=(100/e.bgImgUrl.length).toString()+"%",e.widthNum=100/e.bgImgUrl.length);case 5:case"end":return t.stop()}},t,e)}))()}},created:function(){var e=this;this.initIndexInfo().then(function(){e.carouselTimer=setInterval(function(){e.bgImgIndex++,e.bgImgIndex==e.bgImgUrl.length&&(e.bgImgIndex=0),e.hotImgNowLoc=(e.widthNum*e.bgImgIndex).toString()+"%"},5e3)}),this.initAnnounce(),this.$emit("toIndex"),console.log("index created!!!")}},T={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),e._e(),e._v(" "),s("div",{staticClass:"carouselBox"},[s("img",{staticClass:"carousel run-animation",attrs:{src:e.bgImgUrl[e.bgImgIndex].imageUrl,id:"carousel"}})]),e._v(" "),s("div",{staticClass:"base6"}),e._v(" "),s("div",{staticClass:"welcome"},[s("div",{staticClass:"textBox",on:{mouseover:e.startFn,mouseout:e.endFn}},[s("h1",{staticClass:"text",staticStyle:{"font-weight":"bold"},attrs:{"data-start":e.start,"data-startB":e.startB,"data-text":e.welcome}},[e._v(e._s(e.welcome))])]),e._v(" "),s("div",{staticClass:"sysMsgBox",staticStyle:{cursor:"pointer"}},[s("marquee",{staticClass:"sysMsg",on:{click:e.jmpAnnounce}},[e._v(e._s(e.announceInfo.title))]),e._v(" "),s("p",{on:{click:e.jmpOnlineList}},[e._v("在线观看人数: "+e._s(e.online?e.online:0)),s("el-badge",{staticClass:"onlineBadge",attrs:{value:"hot"}})],1)],1),e._v(" "),e._e()]),e._v(" "),s("div",{staticClass:"hotImgBox"},[s("div",{staticClass:"hotImgInBox"},[s("div",{staticClass:"hotImgNow",style:{"margin-left":e.hotImgNowLoc,width:e.imgWidth},on:{click:e.jmpNowBangumi,mouseover:function(t){e.showImgTitle=!0},mouseout:function(t){e.showImgTitle=!1}}}),e._v(" "),e._l(e.bgImgUrl,function(t,a){return s("div",{key:t.id,staticClass:"hotImgItemBox",style:[{width:e.imgWidth}],on:{click:function(s){e.jmpToBangumi(t)},mouseover:function(t){e.userChangeHotImgNow(a)}}},[s("el-tooltip",{attrs:{"visible-arrow":!1,content:t.title,placement:"bottom",effect:"dark",manual:!1,value:e.showImgTitle&&e.bgImgIndex==a||e.bgImgIndex==a}},[s("img",{staticStyle:{height:"96px",width:"100%"},attrs:{src:t.imageUrl}})])],1)})],2)]),e._v(" "),s("div",{staticClass:"indexFooter"},[s("div",{staticClass:"inderFooter2"},[s("div",{staticClass:"footerAbout"},[s("a",{staticClass:"footerItem",attrs:{target:"_blank",href:"#/aboutUs"}},[e._v("关于我们")]),e._v(" "),s("a",{staticClass:"footerItem",attrs:{target:"_blank",href:"#/contactUs"},on:{mouseover:function(t){e.infoText="联系我们"},mouseout:function(t){e.infoText="用爱发电"}}},[e._v(e._s(e.infoText))]),e._v(" "),e._m(5)]),e._v(" "),e._m(6),e._v(" "),s("div",{staticClass:"indexFooterInBox"},[s("a",{staticClass:"footerItem",attrs:{target:"_blank",href:e.GLOBAL.DOInviteLink}},[s("img",{staticClass:"elementIcon",attrs:{src:e.GLOBAL.imgURL+"/FlgYbSr.png"}})])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"footerImgBox"},[t("div",{staticClass:"footerImg"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"footerImgBox"},[t("div",{staticClass:"footerImg2"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cloudBox"},[t("div",{staticClass:"cloud1"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cloudBox"},[t("div",{staticClass:"cloud2"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cloudBox"},[t("div",{staticClass:"cloud3"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"footerItem",attrs:{target:"_blank",href:"https://t.me/joinchat/D6RlYg6geGuiS3WP_ag5zg"}},[t("img",{staticStyle:{width:"20px",height:"15px"},attrs:{src:s("ZBJ4")}}),t("p",[this._v("加入我们")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"authorInfo"},[t("p",[this._v("Crafted with")]),this._v(" "),t("p",{staticStyle:{color:"red","font-size":"18px"}},[this._v("❤")]),this._v(" "),t("p",[this._v("by Darkers ©2018 Darker.")])])}]};var N=s("VU/8")(D,T,!1,function(e){s("4Znm")},"data-v-9e63644e",null).exports,U=s("fZjL"),j=s.n(U),F=s("pFYg"),L=s.n(F),Q=s("woOf"),z=s.n(Q),G=s("74/Y"),O=s("Bb9R"),P=s("g3c9"),H=s("eyka"),Y={props:{field:{type:String,default:"avatar"},ki:{default:0},value:{default:!0},url:{type:String,default:""},params:{type:Object,default:null},headers:{type:Object,default:null},width:{type:Number,default:200},height:{type:Number,default:200},noRotate:{type:Boolean,default:!0},noCircle:{type:Boolean,default:!1},noSquare:{type:Boolean,default:!1},maxSize:{type:Number,default:10240},langType:{type:String,default:"zh"},langExt:{type:Object,default:null},imgFormat:{type:String,default:"png"},imgBgc:{type:String,default:"#fff"},withCredentials:{type:Boolean,default:!1}},data:function(){var e=this.imgFormat,t=this.langType,s=this.langExt,a=this.width,i=this.height,o=!0,n=-1===["jpg","png"].indexOf(e)?"jpg":e,r=G.a[t]?G.a[t]:G.a.en,c=O.a[n];return this.imgFormat=n,s&&z()(r,s),"function"!=typeof FormData&&(o=!1),{mime:c,lang:r,isSupported:o,isSupportTouch:document.hasOwnProperty("ontouchstart"),step:1,loading:0,progress:0,hasError:!1,errorMsg:"",ratio:a/i,sourceImg:null,sourceImgUrl:"",createImgUrl:"",sourceImgMouseDown:{on:!1,mX:0,mY:0,x:0,y:0},previewContainer:{width:100,height:100},sourceImgContainer:{width:240,height:184},scale:{zoomAddOn:!1,zoomSubOn:!1,range:1,x:0,y:0,width:0,height:0,maxWidth:0,maxHeight:0,minWidth:0,minHeight:0,naturalWidth:0,naturalHeight:0}}},computed:{progressStyle:function(){return{width:this.progress+"%"}},sourceImgStyle:function(){var e=this.scale,t=this.sourceImgMasking;return{top:e.y+t.y+"px",left:e.x+t.x+"px",width:e.width+"px",height:e.height+"px"}},sourceImgMasking:function(){var e=this.width,t=this.height,s=this.ratio,a=this.sourceImgContainer,i=a.width/a.height,o=0,n=0,r=a.width,c=a.height,l=1;return s<i&&(l=a.height/t,r=a.height*s,o=(a.width-r)/2),s>i&&(l=a.width/e,c=a.width/s,n=(a.height-c)/2),{scale:l,x:o,y:n,width:r,height:c}},sourceImgShadeStyle:function(){var e=this.sourceImgMasking,t=this.sourceImgContainer,s=e;return{width:(s.width==t.width?s.width:(t.width-s.width)/2)+"px",height:(s.height==t.height?s.height:(t.height-s.height)/2)+"px"}},previewStyle:function(){this.width,this.height;var e=this.ratio,t=this.previewContainer,s=t.width,a=t.height,i=s/a;return e<i&&(s=t.height*e),e>i&&(a=t.width/e),{width:s+"px",height:a+"px"}}},watch:{value:function(e){e&&1!=this.loading&&this.reset()}},methods:{ripple:function(e){Object(H.a)(e)},off:function(){var e=this;setTimeout(function(){e.$emit("input",!1),3==e.step&&2==e.loading&&e.setStep(1)},200)},setStep:function(e){var t=this;setTimeout(function(){t.step=e},200)},preventDefault:function(e){return e.preventDefault(),!1},handleClick:function(e){1!==this.loading&&e.target!==this.$refs.fileinput&&(e.preventDefault(),document.activeElement!==this.$refs&&this.$refs.fileinput.click())},handleChange:function(e){if(e.preventDefault(),1!==this.loading){var t=e.target.files||e.dataTransfer.files;this.reset(),this.checkFile(t[0])&&this.setSourceImg(t[0])}},checkFile:function(e){var t=this.lang,s=this.maxSize;return-1===e.type.indexOf("image")?(this.hasError=!0,this.errorMsg=t.error.onlyImg,!1):!(e.size/1024>s)||(this.hasError=!0,this.errorMsg=t.error.outOfSize+s+"kb",!1)},reset:function(){this.loading=0,this.hasError=!1,this.errorMsg="",this.progress=0},setSourceImg:function(e){var t=this,s=new FileReader;s.onload=function(e){t.sourceImgUrl=s.result,t.startCrop()},s.readAsDataURL(e)},startCrop:function(){var e=this,t=e.width,s=e.height,a=e.ratio,i=e.scale,o=e.sourceImgUrl,n=e.sourceImgMasking,r=e.lang,c=n,l=new Image;l.src=o,l.onload=function(){var o=l.naturalWidth,n=l.naturalHeight,u=o/n,d=c.width,p=c.height,m=0,g=0;if(o<t||n<s)return e.hasError=!0,e.errorMsg=r.error.lowestPx+t+"*"+s,!1;a>u&&(p=d/u,g=(c.height-p)/2),a<u&&(d=p*u,m=(c.width-d)/2),i.range=0,i.x=m,i.y=g,i.width=d,i.height=p,i.minWidth=d,i.minHeight=p,i.maxWidth=o*c.scale,i.maxHeight=n*c.scale,i.naturalWidth=o,i.naturalHeight=n,e.sourceImg=l,e.createImg(),e.setStep(2)}},imgStartMove:function(e){if(e.preventDefault(),this.isSupportTouch&&!e.targetTouches)return!1;var t=e.targetTouches?e.targetTouches[0]:e,s=this.sourceImgMouseDown,a=this.scale,i=s;i.mX=t.screenX,i.mY=t.screenY,i.x=a.x,i.y=a.y,i.on=!0},imgMove:function(e){if(e.preventDefault(),this.isSupportTouch&&!e.targetTouches)return!1;var t=e.targetTouches?e.targetTouches[0]:e,s=this.sourceImgMouseDown,a=s.on,i=s.mX,o=s.mY,n=s.x,r=s.y,c=this.scale,l=this.sourceImgMasking,u=n+(t.screenX-i),d=r+(t.screenY-o);a&&(u>0&&(u=0),d>0&&(d=0),u<l.width-c.width&&(u=l.width-c.width),d<l.height-c.height&&(d=l.height-c.height),c.x=u,c.y=d)},rotateImg:function(e){var t=this.sourceImg,s=this.scale,a=s.naturalWidth,i=s.naturalHeight,o=i,n=a,r=this.$refs.canvas,c=r.getContext("2d");r.width=o,r.height=n,c.clearRect(0,0,o,n),c.fillStyle="rgba(0,0,0,0)",c.fillRect(0,0,o,n),c.translate(o,0),c.rotate(90*Math.PI/180),c.drawImage(t,0,0,a,i);var l=r.toDataURL(O.a.png);this.sourceImgUrl=l,this.startCrop()},startZoomAdd:function(e){var t=this,s=t.scale;s.zoomAddOn=!0,function e(){if(s.zoomAddOn){var a=s.range>=100?100:++s.range;t.zoomImg(a),setTimeout(function(){e()},60)}}()},endZoomAdd:function(e){this.scale.zoomAddOn=!1},startZoomSub:function(e){var t=this,s=t.scale;s.zoomSubOn=!0,function e(){if(s.zoomSubOn){var a=s.range<=0?0:--s.range;t.zoomImg(a),setTimeout(function(){e()},60)}}()},endZoomSub:function(e){this.scale.zoomSubOn=!1},zoomChange:function(e){this.zoomImg(e.target.value)},zoomImg:function(e){var t=this,s=this.sourceImgMasking,a=(this.sourceImgMouseDown,this.scale),i=a.maxWidth,o=a.maxHeight,n=a.minWidth,r=a.minHeight,c=a.width,l=a.height,u=a.x,d=a.y,p=(a.range,s),m=p.width,g=p.height,v=n+(i-n)*e/100,h=r+(o-r)*e/100,A=m/2-v/c*(m/2-u),f=g/2-h/l*(g/2-d);A>0&&(A=0),f>0&&(f=0),A<m-v&&(A=m-v),f<g-h&&(f=g-h),a.x=A,a.y=f,a.width=v,a.height=h,a.range=e,setTimeout(function(){a.range==e&&t.createImg()},300)},createImg:function(e){var t=this.imgFormat,s=this.imgBgc,a=this.mime,i=this.sourceImg,o=this.scale,n=o.x,r=o.y,c=o.width,l=o.height,u=this.sourceImgMasking.scale,d=this.$refs.canvas,p=d.getContext("2d");e&&(this.sourceImgMouseDown.on=!1),d.width=this.width,d.height=this.height,p.clearRect(0,0,this.width,this.height),p.fillStyle="png"==t?"rgba(0,0,0,0)":s,p.fillRect(0,0,this.width,this.height),p.drawImage(i,n/u,r/u,c/u,l/u),this.createImgUrl=d.toDataURL(a)},prepareUpload:function(){var e=this.url,t=this.createImgUrl,s=this.field,a=this.ki;this.$emit("crop-success",t,s,a),"string"==typeof e&&e?this.upload():this.off()},upload:function(){var e=this,t=this.lang,s=this.imgFormat,a=this.mime,i=this.url,o=this.params,n=this.headers,r=this.field,c=this.ki,l=this.createImgUrl,u=this.withCredentials,d=new FormData;d.append(r,Object(P.a)(l,a),r+"."+s),"object"==(void 0===o?"undefined":L()(o))&&o&&j()(o).forEach(function(e){d.append(e,o[e])});var m=function(t){t.lengthComputable&&(e.progress=100*Math.round(t.loaded)/t.total)};e.reset(),e.loading=1,e.setStep(3),new p.a(function(e,t){var s=new XMLHttpRequest;s.open("POST",i,!0),s.withCredentials=u,s.onreadystatechange=function(){4===this.readyState&&(200===this.status||201===this.status?e(JSON.parse(this.responseText)):t(this.status))},s.upload.addEventListener("progress",m,!1),"object"==(void 0===n?"undefined":L()(n))&&n&&j()(n).forEach(function(e){s.setRequestHeader(e,n[e])}),s.send(d)}).then(function(t){e.value&&(e.loading=2,e.$emit("crop-upload-success",t,r,c))},function(s){e.value&&(e.loading=3,e.hasError=!0,e.errorMsg=t.fail,e.$emit("crop-upload-fail",s,r,c))})}},created:function(){var e=this;document.addEventListener("keyup",function(t){!e.value||"Escape"!=t.key&&27!=t.keyCode||e.off()})}},K={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"vue-image-crop-upload"},[s("div",{staticClass:"vicp-wrap"},[s("div",{staticClass:"vicp-close",on:{click:e.off}},[s("i",{staticClass:"vicp-icon4"})]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.step,expression:"step == 1"}],staticClass:"vicp-step1"},[s("div",{staticClass:"vicp-drop-area",on:{dragleave:e.preventDefault,dragover:e.preventDefault,dragenter:e.preventDefault,click:e.handleClick,drop:e.handleChange}},[s("i",{directives:[{name:"show",rawName:"v-show",value:1!=e.loading,expression:"loading != 1"}],staticClass:"vicp-icon1"},[s("i",{staticClass:"vicp-icon1-arrow"}),e._v(" "),s("i",{staticClass:"vicp-icon1-body"}),e._v(" "),s("i",{staticClass:"vicp-icon1-bottom"})]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:1!==e.loading,expression:"loading !== 1"}],staticClass:"vicp-hint"},[e._v(e._s(e.lang.hint))]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.isSupported,expression:"!isSupported"}],staticClass:"vicp-no-supported-hint"},[e._v(e._s(e.lang.noSupported))]),e._v(" "),1==e.step?s("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileinput",attrs:{type:"file"},on:{change:e.handleChange}}):e._e()]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],staticClass:"vicp-error"},[s("i",{staticClass:"vicp-icon2"}),e._v(" "+e._s(e.errorMsg)+"\r\n\t\t\t")]),e._v(" "),s("div",{staticClass:"vicp-operate"},[s("a",{on:{click:e.off,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.off))])])]),e._v(" "),2==e.step?s("div",{staticClass:"vicp-step2"},[s("div",{staticClass:"vicp-crop"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"vicp-crop-left"},[s("div",{staticClass:"vicp-img-container"},[s("img",{ref:"img",staticClass:"vicp-img",style:e.sourceImgStyle,attrs:{src:e.sourceImgUrl,draggable:"false"},on:{drag:e.preventDefault,dragstart:e.preventDefault,dragend:e.preventDefault,dragleave:e.preventDefault,dragover:e.preventDefault,dragenter:e.preventDefault,drop:e.preventDefault,touchstart:e.imgStartMove,touchmove:e.imgMove,touchend:e.createImg,touchcancel:e.createImg,mousedown:e.imgStartMove,mousemove:e.imgMove,mouseup:e.createImg,mouseout:e.createImg}}),e._v(" "),s("div",{staticClass:"vicp-img-shade vicp-img-shade-1",style:e.sourceImgShadeStyle}),e._v(" "),s("div",{staticClass:"vicp-img-shade vicp-img-shade-2",style:e.sourceImgShadeStyle})]),e._v(" "),s("div",{staticClass:"vicp-range"},[s("input",{attrs:{type:"range",step:"1",min:"0",max:"100"},domProps:{value:e.scale.range},on:{input:e.zoomChange}}),e._v(" "),s("i",{staticClass:"vicp-icon5",on:{mousedown:e.startZoomSub,mouseout:e.endZoomSub,mouseup:e.endZoomSub}}),e._v(" "),s("i",{staticClass:"vicp-icon6",on:{mousedown:e.startZoomAdd,mouseout:e.endZoomAdd,mouseup:e.endZoomAdd}})]),e._v(" "),e.noRotate?e._e():s("div",{staticClass:"vicp-rotate"},[s("i",{on:{click:e.rotateImg}},[e._v("↻")])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"vicp-crop-right"},[s("div",{staticClass:"vicp-preview"},[e.noSquare?e._e():s("div",{staticClass:"vicp-preview-item"},[s("img",{style:e.previewStyle,attrs:{src:e.createImgUrl}}),e._v(" "),s("span",[e._v(e._s(e.lang.preview))])]),e._v(" "),e.noCircle?e._e():s("div",{staticClass:"vicp-preview-item vicp-preview-item-circle"},[s("img",{style:e.previewStyle,attrs:{src:e.createImgUrl}}),e._v(" "),s("span",[e._v(e._s(e.lang.preview))])])])])]),e._v(" "),s("div",{staticClass:"vicp-operate"},[s("a",{on:{click:function(t){e.setStep(1)},mousedown:e.ripple}},[e._v(e._s(e.lang.btn.back))]),e._v(" "),s("a",{staticClass:"vicp-operate-btn",on:{click:e.prepareUpload,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.save))])])]):e._e(),e._v(" "),3==e.step?s("div",{staticClass:"vicp-step3"},[s("div",{staticClass:"vicp-upload"},[s("span",{directives:[{name:"show",rawName:"v-show",value:1===e.loading,expression:"loading === 1"}],staticClass:"vicp-loading"},[e._v(e._s(e.lang.loading))]),e._v(" "),s("div",{staticClass:"vicp-progress-wrap"},[s("span",{directives:[{name:"show",rawName:"v-show",value:1===e.loading,expression:"loading === 1"}],staticClass:"vicp-progress",style:e.progressStyle})]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],staticClass:"vicp-error"},[s("i",{staticClass:"vicp-icon2"}),e._v(" "+e._s(e.errorMsg)+"\r\n\t\t\t\t")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2===e.loading,expression:"loading === 2"}],staticClass:"vicp-success"},[s("i",{staticClass:"vicp-icon3"}),e._v(" "+e._s(e.lang.success)+"\r\n\t\t\t\t")])]),e._v(" "),s("div",{staticClass:"vicp-operate"},[s("a",{on:{click:function(t){e.setStep(2)},mousedown:e.ripple}},[e._v(e._s(e.lang.btn.back))]),e._v(" "),s("a",{on:{click:e.off,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.close))])])]):e._e(),e._v(" "),s("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvas",attrs:{width:e.width,height:e.height}})])])},staticRenderFns:[]};var J=s("VU/8")(Y,K,!1,function(e){s("k6Mo")},null,null).exports,V={props:["show","pb"],components:{myUpload:J},data:function(){return{bangumiName:"",episodeTotal:0,zeroEp:!1,showUploadCover:!1,coverUrl:"",langExtObj:{preview:"封面预览"}}},methods:{submitNewMv:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.bangumiName){t.next=5;break}return e.$message({message:"番剧名称未填写",type:"error"}),t.abrupt("return");case 5:if(""!==e.episodeTotal){t.next=10;break}return e.$message({message:"总集数未填写",type:"error"}),t.abrupt("return");case 10:if(parseInt(e.episodeTotal)&&!(parseInt(e.episodeTotal)<1)){t.next=13;break}return e.$message({message:"总集数必须是大于0的整数",type:"error"}),t.abrupt("return");case 13:if(!e.pb){t.next=19;break}return t.next=16,h.updatePostBangumi({id:e.pb.id,bn:e.bangumiName,et:e.episodeTotal,hzi:e.zeroEp?1:0,thumb:e.coverUrl});case 16:t.t0=t.sent.data,t.next=22;break;case 19:return t.next=21,h.sendPostBangumi({bangumiName:e.bangumiName,episodeTotal:e.episodeTotal,hasZeroIndex:e.zeroEp?1:0,thumb:e.coverUrl});case 21:t.t0=t.sent.data;case 22:s=t.t0,console.log("提交番剧成功",s),0===s.code?e.$alert(s.msg,"提交成功",{confirmButtonText:"确定",callback:function(t){e.bangumiName="",e.episodeTotal=0,e.zeroEp=!1,setTimeout(function(){e.closeBox(),e.$emit("updateMvList")},400)}}):5003===s.code?e.$alert(s.msg,"提示",{confirmButtonText:"确定",callback:function(t){e.bangumiName="",e.episodeTotal=0,e.zeroEp=!1}}):e.$alert(s.msg,"参数有误",{confirmButtonText:"确定",callback:function(e){console.log(e)}});case 25:case"end":return t.stop()}},t,e)}))()},closeBox:function(){this.$emit("closeBox")},cropUploadSuccess:function(e,t){console.log("-------- upload success --------"),console.log(e);var s=e.data.link;s=s.substring(s.lastIndexOf("/")),console.log("link:",s),this.coverUrl=this.GLOBAL.imgURL+s,console.log("field: "+t)},cropSuccess:function(e,t){console.log("-------- crop success --------")},cropUploadFail:function(e,t){console.log("-------- upload fail --------"),console.log(e),console.log("field: "+t)}},mounted:function(){this.pb&&(console.log("pb有东西了",this.pb),this.bangumiName=this.pb.bn,this.episodeTotal=this.pb.et,this.zeroEp=1==this.pb.hzi,this.coverUrl=this.pb.thumb)}},X={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"submitMvBox"},[s("div",{staticClass:"submitMvTitleBox"},[e._m(0),e._v(" "),s("div",{staticClass:"closeBtn",on:{click:e.closeBox}},[s("p",[e._v("×")])])]),e._v(" "),s("div",{staticClass:"submitMvInBox"},[e._m(1),e._v(" "),s("div",{staticClass:"mvTitleInputBox"},[s("div",{staticClass:"mvTitleInputInBox"},[s("p",[e._v("番剧名称")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.bangumiName,expression:"bangumiName"}],domProps:{value:e.bangumiName},on:{input:function(t){t.target.composing||(e.bangumiName=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"zeroEpisodeBox"},[s("div",{staticClass:"zeroEpisodeInBox"},[s("p",[e._v("是否有第0集")]),e._v(" "),s("div",{staticClass:"zeroEpChoiceBox"},[s("p",{class:[e.zeroEp?"zeroEpSelected":""],on:{click:function(t){e.zeroEp=!0}}},[e._v("有")]),e._v(" "),s("p",{class:[e.zeroEp?"":"zeroEpSelected"],on:{click:function(t){e.zeroEp=!1}}},[e._v("没有")])])]),e._v(" "),s("p",{staticClass:"zeroEpBoxRule"},[e._v("* 若剧场版或电影则集数为「1」")])]),e._v(" "),s("div",{staticClass:"totalEpisodeBox"},[s("div",{staticClass:"totalEpisodeInBox"},[s("p",[e._v("总集数")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.episodeTotal,expression:"episodeTotal"}],domProps:{value:e.episodeTotal},on:{input:function(t){t.target.composing||(e.episodeTotal=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"coverUploadBox"},[s("div",{staticClass:"coverUploadInBox"},[s("p",{staticClass:"coverUploadTitle"},[e._v("封面")]),e._v(" "),s("p",{staticClass:"coverUploadBtn",on:{click:function(t){e.showUploadCover=!0}}},[e._v("上传封面")])]),e._v(" "),""==e.coverUrl?s("p",{staticClass:"coverPreviewText"},[e._v("封面预览")]):e._e(),e._v(" "),e.coverUrl?s("img",{staticClass:"coverPreview",attrs:{src:e.coverUrl}}):s("div",{staticClass:"coverPreviewNoPic"})]),e._v(" "),e._m(2)]),e._v(" "),s("div",{staticClass:"submitMvBtnBox"},[s("div",{staticClass:"submitMvBtnInBox"},[s("p",{staticClass:"mvSubmitCancel",on:{click:e.closeBox}},[e._v("取消")]),e._v(" "),s("p",{staticClass:"mvSubmitConfirm",on:{click:e.submitNewMv}},[e._v("确定")])])]),e._v(" "),s("my-upload",{attrs:{field:"image",width:620,height:350,noCircle:!0,url:e.GLOBAL.uploadURL,headers:e.GLOBAL.uploadHEADERS,langExt:e.langExtObj,"img-format":"jpg"},on:{"crop-success":e.cropSuccess,"crop-upload-success":e.cropUploadSuccess,"crop-upload-fail":e.cropUploadFail},model:{value:e.showUploadCover,callback:function(t){e.showUploadCover=t},expression:"showUploadCover"}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"submitMvTitleText"},[t("p",[this._v("修改番剧信息")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"submitRules"},[s("span",[s("strong",[e._v("* 番剧名称定义需要按照以下规则")])]),s("br"),e._v(" "),s("span",[e._v("- 番剧名称以百度百科为准")]),s("br"),e._v(" "),s("span",[e._v("- 第一个季度直接采取该名称,例如「darker」")]),s("br"),e._v(" "),s("span",[e._v("- 多个季度,则以「番剧名称+空格+第几季」命名,例如「darker 第二季」")]),s("br"),e._v(" "),s("span",[e._v("- sp,ova,剧场版规则与以上规则一致,例如「darker ova」")]),s("br"),e._v(" "),s("span",[e._v("- 当然也不仅限于番剧,电影也是一样可以的")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"footerRule"},[t("p",[this._v("* 若本次提交被收录后封面仍可修改 *")])])}]};var Z=s("VU/8")(V,X,!1,function(e){s("D/v9")},"data-v-2b6c5d36",null).exports,W={props:["searchText"],components:{"submit-movie":Z},data:function(){return{bangumis:"",page:"",result:[],bgUrl:"",index:0,showId:[],showTimer:null,resultStyle:{"min-height":"900px"},showSubmitBox:!1,lastSearchTimeStamp:"",lastSearchIntervalId:""}},methods:{closeSubmitMvBox:function(){this.showSubmitBox=!1},reloadMvInfo:function(){this.$message({message:"提交成功，审核通过后即可选择您的番剧信息。",type:"success"})},changeBgUrl:function(e){this.bgUrl=""===e?"../../static/img/1.jpg":e},searchBangumis:function(e){var t=this;return r()(o.a.mark(function s(){var a,i;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(clearInterval(t.showTimer),t.showTimer=null,t.index=0,t.searchText){s.next=6;break}return s.abrupt("return");case 6:return s.next=8,h.getsearchBangumisIdResult(e);case 8:a=s.sent,i=a.data,console.log("searchBangumiRes:",i),0===i.code?(t.bangumis=i.data.content,t.page=i.data.page,t.bgUrl=""===i.data.content[0].thumb?"../../static/img/1.jpg":i.data.content[0].thumb,console.log("bgUrl",t.bgUrl),console.log("pageNum:","ElderDriverBroken♂Man".length),t.showTimer=setInterval(function(){t.showId.push(t.bangumis[t.index].bangumiId),t.index++,t.index==t.bangumis.length&&(clearInterval(t.showTimer),t.showTimer=null)},150)):(t.bangumis="",t.page="",console.log("no bangumi search result"));case 12:case"end":return s.stop()}},s,t)}))()},handleCurrentChange:function(e){var t=this;return r()(o.a.mark(function s(){var a,i;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.searchBangumisByName(t.searchText,e,t.page.pageSize);case 2:a=s.sent,0===(i=a.data).code?(t.bangumis=i.data.content,t.page=i.data.page):(t.bangumis="",console.log("error search bangumis in page"));case 5:case"end":return s.stop()}},s,t)}))()},handleSizeChange:function(e){var t=this;return r()(o.a.mark(function s(){var a,i;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("pageSize:",e),s.next=3,h.searchBangumisByName(t.searchText,1,e);case 3:a=s.sent,0===(i=a.data).code?(t.bangumis=i.data.content,t.page=i.data.page):console.log("error search bangumis in page");case 6:case"end":return s.stop()}},s,t)}))()},goBangumiDetail:function(e){console.log("go bangumiDetail"),console.log("bangumi: ",e);var t=this.$router.resolve({name:"bangumiDetail",params:{bid:e.bangumiId,bangumi:e}});console.log("href:",t.href),window.open(t.href,"_blank")},showIndex:function(e){return e}},watch:{searchText:function(e){var t=this,s=new Date;clearInterval(this.showTimer),this.showTimer=null,this.index=0,console.log("newSearchText:",e),s-this.lastSearchTimeStamp<600&&(console.log("time < 600, try to stop last setTimeOut task: ",this.lastSearchIntervalId),(this.lastSearchIntervalId||0===this.lastSearchIntervalId)&&clearInterval(this.lastSearchIntervalId)),""===e?(this.bangumis="",this.page="",console.log("搜索框为空，清除搜索数据")):(this.lastSearchIntervalId=setTimeout(function(){t.searchBangumis(e)},600),this.lastSearchTimeStamp=s)}},created:function(){console.log(this.searchText),this.searchBangumis(this.searchText),this.lastSearchTimeStamp=new Date}},q={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"searchResultPage"},[s("div",{staticClass:"searchResultBg"},[s("div",{staticClass:"searchResultBgInBox"}),e._v(" "),s("div",{staticClass:"searchResultBgBox"},[s("img",{staticClass:"searchResultBgImg",attrs:{src:e.bgUrl}})])]),e._v(" "),s("transition",{attrs:{name:"submitMvBoxTran"}},[e.showSubmitBox?s("div",{staticClass:"submitMovieBox"},[s("submit-movie",{staticClass:"submitMovieInBox",attrs:{show:e.showSubmitBox},on:{closeBox:e.closeSubmitMvBox,updateMvList:e.reloadMvInfo}})],1):e._e()]),e._v(" "),s("div",{staticClass:"searchResultBox",style:e.resultStyle},[s("h1",{directives:[{name:"show",rawName:"v-show",value:""===e.bangumis,expression:"bangumis === ''"}],staticStyle:{color:"#1b84ec"}},[e._v("什么都没有找到")]),e._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:""===e.bangumis,expression:"bangumis === ''"}],staticClass:"sr-submit-link",on:{click:function(t){e.showSubmitBox=!0}}},[e._v("点此提交番剧信息")]),e._v(" "),e._l(e.bangumis,function(t,a){return e.index>a?s("div",{key:t.bangumiId,class:["searchResultItem",{"run-animation2":t.bangumiId==e.showId[a]}],on:{mouseover:function(s){e.changeBgUrl(t.thumb)},click:function(s){e.goBangumiDetail(t)}}},[s("img",{attrs:{src:t.thumb?t.thumb:"../../../static/img/1.jpg"}}),e._v(" "),t.bangumiName.length<="ElderDriverBroken♂Man1".length?s("div",{staticClass:"bangumiName"},[s("p",[e._v(e._s(t.bangumiName))])]):s("marquee",{attrs:{behavior:"alternate",scrollamount:"6"}},[e._v(e._s(t.bangumiName))]),e._v(" "),s("p",{staticClass:"bangumiEpInfo"},[e._v("集数："+e._s(t.episodeTotal))])],1):e._e()})],2),e._v(" "),e.bangumis&&e.page?s("div",{staticClass:"page-container"},[s("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.page.totalSize>10,expression:"page.totalSize>10"}],staticStyle:{margin:"auto auto"},attrs:{"current-page":e.page.pageNumber,"page-sizes":[10,20,30,40,50],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.page,"pageNumber",t)}}})],1):e._e()],1)},staticRenderFns:[]};var $=s("VU/8")(W,q,!1,function(e){s("yFAy"),s("+3PV")},"data-v-08ab2270",null).exports,ee={props:["searchText"],components:{"submit-movie":Z},data:function(){return{bangumis:"",page:"",result:[],bgUrl:"",index:0,showId:[],showTimer:null,resultStyle:{"min-height":"900px"},showSubmitBox:!1}},methods:{initOnlineList:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getOnlineList();case 2:s=t.sent.data,console.log("在线列表信息",s),0===s.code&&(e.bangumis=s.data,console.log(e.bangumis),e.bgUrl=""===s.data[0].thumb?"../../static/img/1.jpg":s.data[0].thumb,console.log("bgUrl",e.bgUrl),console.log("pageNum:","ElderDriverBroken♂Man".length),e.showTimer=setInterval(function(){e.showId.push(e.bangumis[e.index].bangumiId),e.index++,e.index==e.bangumis.length&&(clearInterval(e.showTimer),e.showTimer=null)},150));case 5:case"end":return t.stop()}},t,e)}))()},changeBgUrl:function(e){this.bgUrl=""===e?"../../static/img/1.jpg":e},goBangumiDetail:function(e){window.open(e.linkUrl)},getPrettyViewCount:function(e){return e<1e4?e:(e/1e4).toFixed(1).toString()+"w"}},created:function(){console.log(this.searchText),this.initOnlineList()},beforeDestroy:function(){clearInterval(this.showTimer),this.bangumis=""}},te={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"searchResultPage1"},[s("div",{staticClass:"searchResultBg1"},[s("div",{staticClass:"searchResultBgInBox1"}),e._v(" "),s("div",{staticClass:"searchResultBgBox1"},[s("img",{staticClass:"searchResultBgImg1",attrs:{src:e.bgUrl}})])]),e._v(" "),s("div",{staticClass:"searchResultBox1",style:e.resultStyle},[s("h1",{directives:[{name:"show",rawName:"v-show",value:""===e.bangumis,expression:"bangumis === ''"}],staticStyle:{color:"#1b84ec"}},[e._v("暂时没有人在观看视频")]),e._v(" "),e._l(e.bangumis,function(t,a){return e.index>a?s("div",{key:t.bangumiId,class:["searchResultItem1",{"run-animation21":t.bangumiId==e.showId[a]}],on:{mouseover:function(s){e.changeBgUrl(t.thumb)},click:function(s){e.goBangumiDetail(t)}}},[s("img",{attrs:{src:t.thumb?t.thumb:"../../../static/img/1.jpg"}}),e._v(" "),t.title.length<="ElderDriverBroken♂Man1".length?s("div",{staticClass:"bangumiName1"},[s("p",[e._v(e._s(t.title))])]):s("marquee",{attrs:{behavior:"alternate",scrollamount:"6"}},[e._v(e._s(t.title))]),e._v(" "),s("div",{staticClass:"mvOtherInfo1"},[s("div",[s("i",{staticClass:"el-icon-view",attrs:{title:"访问量"}}),e._v(" "),s("p",{staticStyle:{"padding-left":"8px"}},[e._v(e._s(e.getPrettyViewCount(t.episodeViewCount)))])]),e._v(" "),s("div",[s("i",{staticClass:"el-icon-tickets",attrs:{title:"弹幕数"}}),e._v(" "),s("p",[e._v(e._s(t.danmakuCount))])])]),e._v(" "),s("p",{staticClass:"bangumiEpInfo1"},[e._v("在线人数:"+e._s(t.onlineCount))])],1):e._e()})],2)])},staticRenderFns:[]};var se=s("VU/8")(ee,te,!1,function(e){s("bUf8"),s("REjL")},"data-v-5fb7cac9",null).exports,ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"movieInfoBox"},[a("div",{staticClass:"movieInfoInBox"},[a("img",{staticClass:"movieCover",attrs:{src:s("zRwx")}}),e._v(" "),a("div",[a("p",{staticClass:"movieTitle"},[e._v("ElderDriverBroken♂Man")]),e._v(" "),a("p",{staticClass:"movieBrief"},[e._v("简介："+e._s(e.brief))])])]),e._v(" "),a("div",{staticClass:"episodeBox"},e._l(e.episode,function(t){return a("div",{key:t,staticClass:"episodeNumBox"},[a("p",{staticClass:"episodeNum"},[e._v(e._s(t))])])}))])},staticRenderFns:[]};var ie=s("VU/8")({data:function(){return{brief:"多个是糜烂的，舍长也是丑恶的，大概的确帮少就是丑烂了。sssssssssssssssssssssssssssssssssssssssssssssssssssssssss",episode:100}}},ae,!1,function(e){s("rQWP")},"data-v-3c3681a6",null).exports,oe=s("Igiw"),ne=s.n(oe),re=(s("36HN"),s("JSQk"),0);function ce(e){return de(pe(ue(e),8*e.length))}function le(e){for(var t,s=re?"0123456789ABCDEF":"0123456789abcdef",a="",i=0;i<e.length;i++)t=e.charCodeAt(i),a+=s.charAt(t>>>4&15)+s.charAt(15&t);return a}function ue(e){for(var t=Array(e.length>>2),s=0;s<t.length;s++)t[s]=0;for(s=0;s<8*e.length;s+=8)t[s>>5]|=(255&e.charCodeAt(s/8))<<s%32;return t}function de(e){for(var t="",s=0;s<32*e.length;s+=8)t+=String.fromCharCode(e[s>>5]>>>s%32&255);return t}function pe(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var s=1732584193,a=-271733879,i=-1732584194,o=271733878,n=0;n<e.length;n+=16){var r=s,c=a,l=i,u=o;a=Ae(a=Ae(a=Ae(a=Ae(a=he(a=he(a=he(a=he(a=ve(a=ve(a=ve(a=ve(a=ge(a=ge(a=ge(a=ge(a,i=ge(i,o=ge(o,s=ge(s,a,i,o,e[n+0],7,-680876936),a,i,e[n+1],12,-389564586),s,a,e[n+2],17,606105819),o,s,e[n+3],22,-1044525330),i=ge(i,o=ge(o,s=ge(s,a,i,o,e[n+4],7,-176418897),a,i,e[n+5],12,1200080426),s,a,e[n+6],17,-1473231341),o,s,e[n+7],22,-45705983),i=ge(i,o=ge(o,s=ge(s,a,i,o,e[n+8],7,1770035416),a,i,e[n+9],12,-1958414417),s,a,e[n+10],17,-42063),o,s,e[n+11],22,-1990404162),i=ge(i,o=ge(o,s=ge(s,a,i,o,e[n+12],7,1804603682),a,i,e[n+13],12,-40341101),s,a,e[n+14],17,-1502002290),o,s,e[n+15],22,1236535329),i=ve(i,o=ve(o,s=ve(s,a,i,o,e[n+1],5,-165796510),a,i,e[n+6],9,-1069501632),s,a,e[n+11],14,643717713),o,s,e[n+0],20,-373897302),i=ve(i,o=ve(o,s=ve(s,a,i,o,e[n+5],5,-701558691),a,i,e[n+10],9,38016083),s,a,e[n+15],14,-660478335),o,s,e[n+4],20,-405537848),i=ve(i,o=ve(o,s=ve(s,a,i,o,e[n+9],5,568446438),a,i,e[n+14],9,-1019803690),s,a,e[n+3],14,-187363961),o,s,e[n+8],20,1163531501),i=ve(i,o=ve(o,s=ve(s,a,i,o,e[n+13],5,-1444681467),a,i,e[n+2],9,-51403784),s,a,e[n+7],14,1735328473),o,s,e[n+12],20,-1926607734),i=he(i,o=he(o,s=he(s,a,i,o,e[n+5],4,-378558),a,i,e[n+8],11,-2022574463),s,a,e[n+11],16,1839030562),o,s,e[n+14],23,-35309556),i=he(i,o=he(o,s=he(s,a,i,o,e[n+1],4,-1530992060),a,i,e[n+4],11,1272893353),s,a,e[n+7],16,-155497632),o,s,e[n+10],23,-1094730640),i=he(i,o=he(o,s=he(s,a,i,o,e[n+13],4,681279174),a,i,e[n+0],11,-358537222),s,a,e[n+3],16,-722521979),o,s,e[n+6],23,76029189),i=he(i,o=he(o,s=he(s,a,i,o,e[n+9],4,-640364487),a,i,e[n+12],11,-421815835),s,a,e[n+15],16,530742520),o,s,e[n+2],23,-995338651),i=Ae(i,o=Ae(o,s=Ae(s,a,i,o,e[n+0],6,-198630844),a,i,e[n+7],10,1126891415),s,a,e[n+14],15,-1416354905),o,s,e[n+5],21,-57434055),i=Ae(i,o=Ae(o,s=Ae(s,a,i,o,e[n+12],6,1700485571),a,i,e[n+3],10,-1894986606),s,a,e[n+10],15,-1051523),o,s,e[n+1],21,-2054922799),i=Ae(i,o=Ae(o,s=Ae(s,a,i,o,e[n+8],6,1873313359),a,i,e[n+15],10,-30611744),s,a,e[n+6],15,-1560198380),o,s,e[n+13],21,1309151649),i=Ae(i,o=Ae(o,s=Ae(s,a,i,o,e[n+4],6,-145523070),a,i,e[n+11],10,-1120210379),s,a,e[n+2],15,718787259),o,s,e[n+9],21,-343485551),s=fe(s,r),a=fe(a,c),i=fe(i,l),o=fe(o,u)}return Array(s,a,i,o)}function me(e,t,s,a,i,o){return fe((n=fe(fe(t,e),fe(a,o)))<<(r=i)|n>>>32-r,s);var n,r}function ge(e,t,s,a,i,o,n){return me(t&s|~t&a,e,t,i,o,n)}function ve(e,t,s,a,i,o,n){return me(t&a|s&~a,e,t,i,o,n)}function he(e,t,s,a,i,o,n){return me(t^s^a,e,t,i,o,n)}function Ae(e,t,s,a,i,o,n){return me(s^(t|~a),e,t,i,o,n)}function fe(e,t){var s=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(s>>16)<<16|65535&s}var Ie=function(e,t){var s=this,a="",i=new FileReader,o=new FileReader;this.setBinAndHash=function(e,t){switch(e){case 0:this._binStart=t;break;case 1:this._binEnd=t}this._binStart&&this._binEnd&&this.md5sum(this._binStart,this._binEnd)},this.md5sum=function(e,t){this._hash=le(ce(e+t)),a(this._hash)},this.getHash=function(){return this._hash},this.calculateHashOfFile=function(e){i.onload=function(e){s.setBinAndHash(0,e.target.result)},o.onload=function(e){s.setBinAndHash(1,e.target.result)};var t=e.slice(0,65536),a=e.slice(e.size-65536,e.size);i.readAsBinaryString(t),o.readAsBinaryString(a)},this.calculateHashOfFile(e),a=t},we={props:["videoInfo","refreshComment","mode","parentCommentInfo","placeholder","type"],data:function(){return{isLogin:!!localStorage.getItem("USER_ID"),avatar:localStorage.getItem("face"),content:"",refreshCommentFlag:this.refreshComment,sendBtnText:"发表评论",sendingFlag:!1}},methods:{submitReply:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isLogin){t.next=3;break}return e.$message({message:"请先登录。",type:"error"}),t.abrupt("return");case 3:if(""!=e.content){t.next=6;break}return e.$message({message:"不可以发送空评论哦！",type:"error"}),t.abrupt("return");case 6:if(e.sendingFlag){t.next=11;break}e.sendBtnText="发表中...",e.sendingFlag=!0,t.next=12;break;case 11:return t.abrupt("return");case 12:if(s=void 0,0!=e.mode){t.next=20;break}return t.next=16,h.postVideoReply({oid:e.videoInfo.episodeId,type:e.type,content:e.content});case 16:s=t.sent,e.$emit("refresh"),t.next=24;break;case 20:return t.next=22,h.postVideoReply({oid:e.videoInfo.episodeId,type:e.type,content:e.placeholder+e.content,root:e.parentCommentInfo.rpid});case 22:s=t.sent,e.$emit("refresh",s.data.data.rpid);case 24:e.content="",e.sendingFlag=!1,e.sendBtnText="发表评论",console.log("发送评论",s,e.type);case 28:case"end":return t.stop()}},t,e)}))()}}},Ce={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"replyBox"},[s("div",{staticClass:"replyInfoBox"},[s("img",{attrs:{src:"https://darker.online/"!=e.avatar?e.avatar:"../../../static/img/noAvatar.jpg"}}),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],attrs:{placeholder:e.placeholder,disabled:!e.isLogin},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value)}}}),e._v(" "),s("div",{staticClass:"replyBtn",on:{click:e.submitReply}},[s("p",[e._v(e._s(e.sendBtnText))])])]),e._v(" "),s("div",{staticClass:"emojiBox"},[e._v("\n        ☺表情\n    ")])])},staticRenderFns:[]};var xe=s("VU/8")(we,Ce,!1,function(e){s("ySsC")},"data-v-a9a278e4",null).exports;function ye(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var a in s)if(new RegExp("("+a+")").test(t)){var i=s[a]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?i:Be(i))}return t}function Be(e){return("00"+e).substr(e.length)}var be={props:["itemInfo","showReplyBox","specificRpid"],components:{replyBox:xe},data:function(){return{uid:localStorage.getItem("USER_ID")}},computed:{getDateDiff:function(){var e=(new Date).getTime()-this.itemInfo.ctime;if(!(e<0)){var t=e/36e5,s=e/6e4;return e/864e5>=1?ye(new Date(this.itemInfo.ctime),"yyyy-MM-dd hh:mm"):t>=1?parseInt(t)+"小时前":s>=1?parseInt(s)+"分钟前":"刚刚"}}},methods:{showReply:function(){this.$emit("changeTarget",this.itemInfo.user.nick)},upvote:function(){var e=this;return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0,0!=e.itemInfo.like_status){t.next=9;break}return t.next=4,h.upvoteReply(e.itemInfo.rpid);case 4:t.sent,e.itemInfo.like++,e.itemInfo.like_status=1,t.next=14;break;case 9:return t.next=11,h.cancelUpvoteReply(e.itemInfo.rpid);case 11:t.sent,e.itemInfo.like--,e.itemInfo.like_status=0;case 14:case"end":return t.stop()}},t,e)}))()},deleteReply:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.deleteMyRpely(e.itemInfo.rpid);case 2:s=t.sent.data,console.log("删除评论结果",s),0===s.code?(e.$message({message:"删除成功",type:"success"}),e.$emit("refreshChildList")):e.$message({message:"删除失败,"+s.msg,type:"error"});case 5:case"end":return t.stop()}},t,e)}))()}},mounted:function(){console.log(this.itemInfo.rpid),this.specificRpid==this.itemInfo.rpid&&(console.log("子评论1:翻滚中"),this.$emit("goAnchor"))}},_e={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"commentChildItemBox",attrs:{id:e.itemInfo.rpid}},[s("div",{staticClass:"commentChildItemInBox"},[s("img",{staticClass:"commentChildItemAvatar",attrs:{src:e.itemInfo.user.avatar?e.itemInfo.user.avatar:"../../../static/img/noAvatar.jpg"}}),e._v(" "),s("div",{staticClass:"commentChildContentBox"},[s("p",{staticClass:"replyChildUsername"},[e._v(e._s(e.itemInfo.user.nick))]),e._v(" "),s("p",{staticClass:"replyChildContent"},[e._v(e._s(e.itemInfo.content))]),e._v(" "),s("div",{staticClass:"commentChildControlBox"},[s("p",{staticClass:"commentChildTime"},[e._v(e._s(e.getDateDiff))]),e._v(" "),s("div",{staticClass:"commentChildUpvote",on:{click:e.upvote}},[s("img",{attrs:{src:0==e.itemInfo.like_status?"../../../static/img/upvote2.png":"../../../static/img/upvoted2.png"}}),e._v(" "),s("p",[e._v(e._s(e.itemInfo.like))])]),e._v(" "),s("p",{staticClass:"commentChildReplyBtn",on:{click:e.showReply}},[e._v("回复")]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.uid==e.itemInfo.uid,expression:"uid==itemInfo.uid"}],staticClass:"commentChildDeleteBtn",on:{click:e.deleteReply}},[e._v("删除")])])])])])},staticRenderFns:[]};var Re={props:["videoInfo","itemInfo","specificRpid","specificRpidLocation","type"],components:{replyBox:xe,commentChildItem:s("VU/8")(be,_e,!1,function(e){s("1knY")},"data-v-c3a6a32e",null).exports},data:function(){return{uid:localStorage.getItem("USER_ID"),childReplies:this.itemInfo.replies,childRepliesPageInfo:{totalSize:3,pageNumber:1,pageSize:3},specificRpidTmp:this.specificRpid,pageCount:1,showReplyBox:!0,targetUser:"回复 @"+this.itemInfo.user.nick+" :",noMore:!1,closeChildReplyBox:!1,pageNum:0==this.specificRpidLocation.chdPageNum?1:this.specificRpidLocation.chdPageNum}},watch:{itemInfo:function(){this.childReplies=this.itemInfo.replies,this.noMore=!1}},computed:{getDateDiff:function(){var e=(new Date).getTime()-this.itemInfo.ctime;if(!(e<0)){var t=e/36e5,s=e/6e4;return e/864e5>=1?ye(new Date(this.itemInfo.ctime),"yyyy-MM-dd hh:mm"):t>=1?parseInt(t)+"小时前":s>=1?parseInt(s)+"分钟前":"刚刚"}}},methods:{showReply:function(){!this.showReplyBox&&this.closeChildReplyBox?(this.showReplyBox=!0,this.closeChildReplyBox=!1):this.showReplyBox=!1,this.targetUser="回复 @"+this.itemInfo.user.nick+" :",this.closeChildReplyBox=!0},changeTarget:function(e){this.showReplyBox=!1,this.targetUser="回复 @"+e+" :"},refresh:function(e){var t=this;return r()(o.a.mark(function s(){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.getRepliesOfAnyClassPage({oid:t.videoInfo.episodeId,type:t.type,root:t.itemInfo.rpid,rpid:e});case 2:s.sent,t.showReplyBox=!0;case 4:case"end":return s.stop()}},s,t)}))()},seeMore:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getRepliesOfAnyClassPage({pn:e.pageNum,oid:e.videoInfo.episodeId,type:e.type,root:e.itemInfo.rpid});case 2:200===(s=t.sent).status&&(e.childReplies=s.data.data.replies,console.log(e.childReplies),e.childRepliesPageInfo=s.data.data.page,e.pageCount=Math.ceil(e.childRepliesPageInfo.totalSize/10),e.noMore=!0);case 4:case"end":return t.stop()}},t,e)}))()},pageSelect:function(e){var t=this;return r()(o.a.mark(function s(){var a;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.getRepliesOfAnyClassPage({pn:e,oid:t.videoInfo.episodeId,type:t.type,root:t.itemInfo.rpid});case 2:200===(a=s.sent).status&&(t.childReplies=a.data.data.replies,document.documentElement.scrollTop=document.body.scrollTop=0);case 4:case"end":return s.stop()}},s,t)}))()},upvote:function(){var e=this;return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0,0!=e.itemInfo.like_status){t.next=9;break}return t.next=4,h.upvoteReply(e.itemInfo.rpid);case 4:t.sent,e.itemInfo.like++,e.itemInfo.like_status=1,t.next=14;break;case 9:return t.next=11,h.cancelUpvoteReply(e.itemInfo.rpid);case 11:t.sent,e.itemInfo.like--,e.itemInfo.like_status=0;case 14:case"end":return t.stop()}},t,e)}))()},deleteReply:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.deleteMyRpely(e.itemInfo.rpid);case 2:s=t.sent.data,console.log("删除评论结果",s),0===s.code?(e.$message({message:"删除成功",type:"success"}),e.$emit("refreshCommentList")):e.$message({message:"删除失败,"+s.msg,type:"error"});case 5:case"end":return t.stop()}},t,e)}))()},goAnchor:function(){console.log("子评论2:翻滚中"),this.$emit("goAnchor")}},mounted:function(){var e=this;return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.specificRpidTmp||0==e.specificRpidLocation.chdPageNum){t.next=5;break}return t.next=3,e.seeMore();case 3:t.next=6;break;case 5:e.specificRpidTmp&&0==e.specificRpidLocation.chdPageNum&&e.itemInfo.rpid==e.specificRpid&&(console.log("CommentItem:翻滚中"),e.$emit("goAnchor"));case 6:case"end":return t.stop()}},t,e)}))()}},ke={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"commentItemBox",attrs:{id:e.itemInfo.rpid}},[s("div",{staticClass:"commentItemInBox"},[s("img",{staticClass:"commentItemAvatar",attrs:{src:e.itemInfo.user.avatar?e.itemInfo.user.avatar:"../../../static/img/noAvatar.jpg"}}),e._v(" "),s("div",{staticClass:"commentContentBox"},[s("p",{staticClass:"replyUsername"},[e._v(e._s(e.itemInfo.user.nick))]),e._v(" "),s("p",{staticClass:"replyContent"},[e._v(e._s(e.itemInfo.content))]),e._v(" "),s("div",{staticClass:"commentControlBox"},[s("p",{staticClass:"commentFloor"},[e._v("#"+e._s(e.itemInfo.floor))]),e._v(" "),s("p",{staticClass:"commentTime"},[e._v(e._s(e.getDateDiff))]),e._v(" "),s("div",{staticClass:"commentUpvote",on:{click:e.upvote}},[s("img",{attrs:{src:0==e.itemInfo.like_status?"../../../static/img/upvote2.png":"../../../static/img/upvoted2.png"}}),e._v(" "),s("p",[e._v(e._s(e.itemInfo.like))])]),e._v(" "),s("p",{staticClass:"commentReplyBtn",on:{click:e.showReply}},[e._v("回复")]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.uid==e.itemInfo.uid,expression:"uid==itemInfo.uid"}],staticClass:"commentDeleteBtn",on:{click:e.deleteReply}},[e._v("删除")])])])]),e._v(" "),e._l(e.childReplies,function(t){return s("div",[s("comment-child-item",{attrs:{"item-info":t,"show-reply-box":e.showReplyBox,"specific-rpid":e.specificRpid},on:{"update:showReplyBox":function(t){e.showReplyBox=t},changeTarget:e.changeTarget,refreshChildList:e.seeMore,goAnchor:e.goAnchor}})],1)}),e._v(" "),e.itemInfo.rcount>3?s("div",{directives:[{name:"show",rawName:"v-show",value:!e.noMore,expression:"!noMore"}],staticClass:"seeMore",on:{click:e.seeMore}},[e._v("共"+e._s(e.itemInfo.rcount)+"条回复，点击查看更多")]):e._e(),e._v(" "),e.childRepliesPageInfo.totalSize>10?s("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.noMore,expression:"noMore"}],attrs:{small:!0,background:!0,"current-page":e.childRepliesPageInfo.pageNumber,"page-count":e.pageCount,"page-size":e.childRepliesPageInfo.pageSize,layout:"total, prev, pager, next",total:e.childRepliesPageInfo.totalSize},on:{"current-change":e.pageSelect,"update:currentPage":function(t){e.$set(e.childRepliesPageInfo,"pageNumber",t)}}}):e._e(),e._v(" "),s("reply-box",{directives:[{name:"show",rawName:"v-show",value:!e.showReplyBox,expression:"!showReplyBox"}],staticClass:"commentReplyBox",attrs:{"video-info":e.videoInfo,"parent-comment-info":e.itemInfo,mode:1,placeholder:e.targetUser,type:e.type},on:{refresh:e.seeMore}})],2)},staticRenderFns:[]};var Ee=s("VU/8")(Re,ke,!1,function(e){s("7Tk1")},"data-v-0f5aa2ce",null).exports,Me={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"emoji-box"},[e._m(0),e._v(" "),s("div",{staticClass:"emoji-wrap"},[s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(⌒▽⌒)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(⌒▽⌒)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"（￣▽￣）"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("（￣▽￣）")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(=・ω・=)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(=・ω・=)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(｀・ω・´)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(｀・ω・´)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(〜￣△￣)〜"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(〜￣△￣)〜")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(･∀･)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(･∀･)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(°∀°)ﾉ"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(°∀°)ﾉ")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(￣3￣)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(￣3￣)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"╮(￣▽￣)╭"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("╮(￣▽￣)╭")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"( ´_ゝ｀)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("( ´_ゝ｀)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"←_←"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("←_←")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"→_→"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("→_→")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(<_<)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(<_<)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(>_>)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(>_>)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(;¬_¬)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(;¬_¬)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":'("▔□▔)/'},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v('("▔□▔)/')]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(ﾟДﾟ≡ﾟдﾟ)!?"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(ﾟДﾟ≡ﾟдﾟ)!?")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"Σ(ﾟдﾟ;)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("Σ(ﾟдﾟ;)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"Σ( ￣□￣||)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("Σ( ￣□￣||)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(´；ω；`)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(´；ω；`)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"（/TДT)/"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("（/TДT)/")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(^・ω・^ )"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(^・ω・^ )")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(｡･ω･｡)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(｡･ω･｡)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(●￣(ｴ)￣●)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(●￣(ｴ)￣●)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"ε=ε=(ノ≧∇≦)ノ"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("ε=ε=(ノ≧∇≦)ノ")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(´･_･`)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(´･_･`)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(-_-#)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(-_-#)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"（￣へ￣）"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("（￣へ￣）")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(￣ε(#￣) Σ"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(￣ε(#￣) Σ")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"ヽ(`Д´)ﾉ"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("ヽ(`Д´)ﾉ")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(╯°口°)╯(┴—┴"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(╯°口°)╯(┴—┴")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"（#-_-)┯━┯"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("（#-_-)┯━┯")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"_(:3」∠)_"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("_(:3」∠)_")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(笑)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(笑)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(汗)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(汗)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(泣)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(泣)")]),e._v(" "),s("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(苦笑)"},on:{click:function(t){e.addEmojiToCtx(t)}}},[e._v("(苦笑)")])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"emoji-title"},[t("span",[this._v("颜文字")])])}]};var Se=s("VU/8")({data:function(){return{}},methods:{addEmojiToCtx:function(e){var t=e.target.getAttribute("data-emoji-text");this.$emit("selectedEmoji",t)}}},Me,!1,function(e){s("OFa8")},"data-v-1222b880",null).exports,De={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"darkerSwitch",style:e.switchBg,on:{click:function(t){e.isChoose=!e.isChoose}}},[s("p",{style:e.switchBtnMove})])},staticRenderFns:[]};var Te=s("VU/8")({props:["choose"],data:function(){return{switchBg:{background:"rgba(207,207,207,.8)"},switchBtnMove:{"margin-left":"3px"},isChoose:this.choose}},watch:{isChoose:function(e){e?(this.switchBg={background:"rgba(100,149,237,.8)"},this.switchBtnMove={"margin-left":"18px"}):(this.switchBg={background:"rgba(207,207,207,.8)"},this.switchBtnMove={"margin-left":"3px"}),this.$emit("update:choose",e)}}},De,!1,function(e){s("MHTg")},"data-v-76ccedf2",null).exports,Ne={data:function(){return{choose:!1,username:"",password:""}},components:{darkerSwitch:Te},watch:{},methods:{login:function(){var e=this;return r()(o.a.mark(function t(){var s,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.username&&""!=e.password){t.next=3;break}return e.$message({message:"账号或密码不能为空！",type:"error"}),t.abrupt("return");case 3:return t.next=5,h.login({principal:e.username,password:e.password,remember_me:e.choose?1:0});case 5:if(s=t.sent,console.log(s),2002!==(a=s.data).code&&null!=a.data){t.next=11;break}return e.$message({message:"账号或密码错误，请重试！",type:"error"}),t.abrupt("return",!1);case 11:if(0!==a.code&&"OK"!==a.msg){t.next=16;break}if(a.data.token){t.next=15;break}return e.$message({message:"登陆错误，请重试！(Error message: Can't not get the Token)",type:"error"}),t.abrupt("return");case 15:e.checkLocalStorage()&&(localStorage.setItem("USER_ID",a.data.user.uid),localStorage.setItem("JWT_TOKEN",a.data.token),localStorage.setItem("loginUserName",e.username),localStorage.setItem("face",a.data.user.face),localStorage.setItem("ROLE",a.data.user.role),console.log("登录成功了！",localStorage),window.location.reload());case 16:case"end":return t.stop()}},t,e)}))()},checkLocalStorage:function(){return void 0!==window.localStorage||(this.$message({message:"错误：无法保持登录状态！（浏览器不支持，或开启了关闭隐私模式）",type:"warning"}),!1)},closeNowLogin:function(){this.$emit("closeLoginBox")}}},Ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loginPage"},[a("div",{staticClass:"loginBox"},[a("div",{staticClass:"closeNowLoginBox",on:{click:e.closeNowLogin}},[e._v("×")]),e._v(" "),a("form",{attrs:{action:"",method:"get"}},[a("img",{staticClass:"loginLogo",attrs:{src:s("ZBJ4")}}),e._v(" "),a("p",[e._v("登入 Darker")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",name:"fname",placeholder:"昵称/邮箱"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"lname",min:"6",max:"20",placeholder:"请输入密码"},domProps:{value:e.password},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null},input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),a("div",{staticClass:"switchBox"},[e._v("\n          记住我\n          "),a("darker-switch",{staticClass:"switch",attrs:{choose:e.choose},on:{"update:choose":function(t){e.choose=t}}})],1),e._v(" "),a("a",{on:{click:e.login}},[e._v("登陆")]),e._v(" "),e._m(0)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pswToolBox"},[t("a",{staticClass:"pswToolBtn",attrs:{href:"#/register"}},[this._v("马上注册")]),this._v(" | "),t("a",{staticClass:"pswToolBtn",attrs:{href:"#/forget"}},[this._v("忘记密码？")])])}]};var je=s("VU/8")(Ne,Ue,!1,function(e){s("1OsX")},"data-v-866100da",null).exports,Fe={name:"PostReply",props:["oid","type","mode","parentRpid","replyInfo","top","hot"],components:{emojiBox:Se,loginBox:je},data:function(){return{avatar:localStorage.getItem("face")?localStorage.getItem("face"):"",isLogin:!!localStorage.getItem("USER_ID"),content:"",sendBtnText:"发表评论",sendingFlag:!1,show_emoji_box:!1,loginBoxShow:!1}},computed:{placeholder:function(){return this.replyInfo?"回复 @"+this.replyInfo.user.nick:"请自觉遵守互联网相关的政策法规，严禁发布色情、暴力、反动的言论。"}},watch:{replyInfo:function(){console.log("clean content"),1===this.mode&&(this.content="")}},methods:{submitReply:function(){var e=this;return r()(o.a.mark(function t(){var s,a,i,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isLogin){t.next=3;break}return e.$message({message:"请先登录。",type:"error"}),t.abrupt("return");case 3:if(""!=e.content){t.next=6;break}return e.$message({message:"不可以发送空评论哦！",type:"error"}),t.abrupt("return");case 6:if(e.sendingFlag){t.next=11;break}e.sendBtnText="发表中...",e.sendingFlag=!0,t.next=12;break;case 11:return t.abrupt("return");case 12:if(s=void 0,0!==e.mode){t.next=22;break}return t.next=16,h.postVideoReply({oid:e.oid,type:e.type,content:e.content});case 16:s=t.sent,console.log("回复结果",s),0===(a=s.data).code?(e.$emit("onAddRootReply",a.data.rpid),e.content="",e.sendingFlag=!1,e.sendBtnText="发表评论",e.$message({message:"发送评论成功",type:"success"})):(e.sendingFlag=!1,e.sendBtnText="发表评论",console.log("发送评论失败"),e.$message({message:"发送评论失败: "+a.msg,type:"error"})),t.next=30;break;case 22:return i={oid:e.oid,type:e.type,content:e.placeholder+"："+e.content,root:e.replyInfo.rpid,parent:e.parentRpid},console.log("send subReply:",i),t.next=26,h.postVideoReply({oid:e.oid,type:e.type,content:e.placeholder+"："+e.content,root:e.parentRpid,tuid:e.replyInfo.user.uid});case 26:s=t.sent,console.log("回复结果",s),0===(n=s.data).code?(e.top?(console.log("emit onAddTopSubReply"),e.$emit("onAddTopSubReply",n.data.rpid)):e.hot?(console.log("emit onAddHotSubReply"),e.$emit("onAddHotSubReply",n.data.rpid)):e.$emit("onAddSubReply",n.data.rpid),e.content="",e.sendingFlag=!1,e.sendBtnText="发表评论",e.$message({message:"发送评论成功",type:"success"})):(e.sendingFlag=!1,e.sendBtnText="发表评论",console.log("发送子评论失败"),e.$message({message:"发送评论失败: "+n.msg,type:"error"}));case 30:e.sendBtnText="发表评论",e.sendingFlag=!1;case 32:case"end":return t.stop()}},t,e)}))()},selectedEmoji:function(e){this.show_emoji_box=!1,this.isLogin?this.content=this.content+e:this.$message({message:"请先登录。",type:"error"})}}},Le={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"replyBox",style:e.mode>0?"width:820px;":""},[s("div",{staticClass:"replyInfoBox"},[s("img",{attrs:{src:""!=e.avatar?e.avatar:"../../../static/img/noAvatar.jpg"}}),e._v(" "),e.isLogin?e._e():s("div",{class:e.mode>0?"replyLoginTip2":"replyLoginTip"},[s("div",{staticClass:"replyLoginTipInBox"},[s("p",{staticClass:"loginTipText loginTipText1"},[e._v("请先 ")]),e._v(" "),s("p",{staticClass:"replyLoginBtn",on:{click:function(t){e.loginBoxShow=!0}}},[e._v("登陆")]),e._v(" "),s("p",{staticClass:"loginTipText"},[e._v("后发表评论 (・ω・)")])])]),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],style:e.mode>0?"width:630px;":"",attrs:{placeholder:e.placeholder,disabled:!e.isLogin},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value)}}}),e._v(" "),s("div",{staticClass:"replyBtn",style:e.isLogin?"":"background:grey",on:{click:e.submitReply}},[s("p",[e._v(e._s(e.sendBtnText))])])]),e._v(" "),s("el-popover",{attrs:{width:"400",placement:"bottom-start",trigger:"click"},model:{value:e.show_emoji_box,callback:function(t){e.show_emoji_box=t},expression:"show_emoji_box"}},[s("div",[s("emoji-box",{on:{selectedEmoji:e.selectedEmoji}})],1),e._v(" "),s("div",{ref:"mybox",staticClass:"emojiBox",attrs:{slot:"reference",tabindex:"1"},slot:"reference"},[s("p",{staticClass:"emojiTitle"},[e._v("☺表情")])])]),e._v(" "),s("transition",{attrs:{name:"loginNowBoxTran"}},[e.loginBoxShow?s("login-box",{staticClass:"loginNowBox",on:{closeLoginBox:function(t){e.loginBoxShow=!1}}}):e._e()],1)],1)},staticRenderFns:[]};var Qe=s("VU/8")(Fe,Le,!1,function(e){s("d2rv")},"data-v-0e47deb8",null).exports,ze={name:"SubReply",props:["oid","type","subReply","subIndex"],data:function(){return{uid:"",role:"",showDelBox:!1,showAdminBox:!1,reportContent:""}},computed:{getDateDiff:function(){var e=(new Date).getTime()-this.subReply.ctime;if(!(e<0)){var t=e/36e5,s=e/6e4;return e/864e5>=1?ye(new Date(this.subReply.ctime),"yyyy-MM-dd hh:mm"):t>=1?parseInt(t)+"小时前":s>=1?parseInt(s)+"分钟前":"刚刚"}},canDelReply:function(){if(!this.uid)return!1;if(4===this.type){if(this.uid===this.oid)return!0;if(this.role){if("ROLE_ADMIN"===this.role||"ROLE_MANAGER"===this.role)return!0}else if(this.uid===this.subReply.uid)return!0}else{if(this.uid===this.subReply.uid)return!0;if(this.role&&("ROLE_ADMIN"===this.role||"ROLE_MANAGER"===this.role))return!0}return!1},canReport:function(){return this.uid!=this.subReply.uid},replyContent:function(){var e=this.subReply.content;return e=(e=(e=e.replace(/\r\n/g,"<br>")).replace(/\n/g,"<br>")).replace(/\s/g,"&nbsp;")}},methods:{showDelDialog:function(){this.showAdminBox=!1,this.showDelBox=!this.showDelBox},delSubReply:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.deleteMyRpely(e.subReply.rpid);case 2:s=t.sent,0===s.data.code?(e.$emit("onRemoveSubReply",e.subIndex),e.$message({message:"删除成功",type:"success"})):console.log("删除子评论失败，index:",e.subIndex);case 5:case"end":return t.stop()}},t,e)}))()},upvote:function(){var e=this;return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.uid){t.next=3;break}return e.$emit("onRecvShowLoginBox"),t.abrupt("return");case 3:if(void 0,0!==e.subReply.like_status){t.next=12;break}return t.next=7,h.upvoteReply(e.subReply.rpid);case 7:t.sent,e.subReply.like++,e.subReply.like_status=1,t.next=17;break;case 12:return t.next=14,h.cancelUpvoteReply(e.subReply.rpid);case 14:t.sent,e.subReply.like--,e.subReply.like_status=0;case 17:case"end":return t.stop()}},t,e)}))()},showReplyBox:function(){this.$emit("onShowSubReplyBox",this.subReply)},handleReport:function(e,t){if(!this.uid)return console.log("show login box"),void this.$emit("onRecvShowLoginBox");this.$emit("onRecvSubReport",e,t)}},created:function(){var e=localStorage.getItem("USER_ID"),t=localStorage.getItem("ROLE");e&&(this.uid=parseInt(e)),t&&(this.role=t)}},Ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"commentChildItemBox",attrs:{id:e.subReply.rpid}},[a("div",{staticClass:"commentChildItemInBox"},[a("a",{attrs:{href:"#/user/"+e.subReply.uid,target:"_blank"}},[a("img",{staticClass:"commentChildItemAvatar",attrs:{src:e.subReply.user.avatar?e.subReply.user.avatar:"../../../static/img/noAvatar.jpg"}})]),e._v(" "),a("div",{staticClass:"commentChildContentBox"},[a("div",{staticClass:"replyChildUsername"},[a("a",{staticStyle:{"text-decoration":"none",color:"#607D8B"},attrs:{href:"#/user/"+e.subReply.uid,target:"_blank"}},[e._v("\n          "+e._s(e.subReply.user.nick)+"\n        ")]),e._v(" "),a("div",{staticClass:"adminBoxOutBox",attrs:{tabindex:"1"},on:{blur:function(t){e.showAdminBox=!1}}},[a("img",{attrs:{src:s("3zQ2")},on:{click:function(t){e.showAdminBox=!e.showAdminBox}}}),e._v(" "),a("transition",{attrs:{name:"adminBoxTran"}},[e.showAdminBox?a("div",{staticClass:"adminBox"},[a("div",{staticClass:"adminInBox"},[e.canReport?a("p",{staticClass:"report",on:{click:function(t){e.handleReport(1,e.subReply.rpid)}}},[e._v("举报")]):e._e(),e._v(" "),e.canDelReply?a("p",{staticClass:"delete",on:{click:e.showDelDialog}},[e._v("删除")]):e._e()])]):e._e()])],1)]),e._v(" "),a("p",{staticClass:"replyChildContent",domProps:{innerHTML:e._s(e.replyContent)}}),e._v(" "),a("div",{staticClass:"commentChildControlBox"},[a("p",{staticClass:"commentChildTime"},[e._v(e._s(e.getDateDiff))]),e._v(" "),a("div",{staticClass:"commentChildUpvote",on:{click:e.upvote}},[a("img",{attrs:{src:0===e.subReply.like_status?"../../../static/img/upvote2.png":"../../../static/img/upvoted2.png"}}),e._v(" "),a("p",[e._v(e._s(e.subReply.like))])]),e._v(" "),a("p",{staticClass:"commentChildReplyBtn",on:{click:e.showReplyBox}},[e._v("回复")]),e._v(" "),a("div",{staticClass:"delConfirmOutBox",attrs:{tabindex:"1"},on:{blur:function(t){e.showDelBox=!1}}},[a("transition",{attrs:{name:"delConfirmTran"}},[e.showDelBox?a("div",{staticClass:"deleteConfirm"},[a("p",{staticClass:"deleteConfirmTip"},[e._v("确定删除吗？")]),e._v(" "),a("div",{staticClass:"confirmDeleBtnBox"},[a("p",{staticClass:"cancelDelBtn",on:{click:function(t){e.showDelBox=!e.showDelBox}}},[e._v("取消")]),e._v(" "),a("p",{staticClass:"confirmDelBtn",on:{click:e.delSubReply}},[e._v("确定")])])]):e._e()])],1)])])])])},staticRenderFns:[]};var Oe={name:"RootReply",props:["rootReply","rootIndex","oid","type","rpid","subPage","refresh","top","hot"],components:{"post-reply":Qe,"sub-reply":s("VU/8")(ze,Ge,!1,function(e){s("3CZ4")},"data-v-49c57464",null).exports,"login-box":je},data:function(){return{uid:"",role:"",page:"",showReplyBox:!1,noMore:!1,replyInfo:"",placeholder:"",showDelBox:!1,showAdminBox:!1,showReportBox:!1,showLoginBox:!1,reportType:"",rtt:"",tid:""}},watch:{refresh:function(e){console.log("refresh!!!",e),this.page="",this.noMore=!1}},computed:{getDateDiff:function(){var e=(new Date).getTime()-this.rootReply.ctime;if(!(e<0)){var t=e/36e5,s=e/6e4;return e/864e5>=1?ye(new Date(this.rootReply.ctime),"yyyy-MM-dd hh:mm"):t>=1?parseInt(t)+"小时前":s>=1?parseInt(s)+"分钟前":"刚刚"}},canDelReply:function(){if(!this.uid)return!1;if(4===this.type){if(this.uid===this.oid)return!0;if(this.role){if("ROLE_ADMIN"===this.role||"ROLE_MANAGER"===this.role)return!0}else if(this.uid===this.rootReply.uid)return!0}else{if(this.uid===this.rootReply.uid)return!0;if(this.role&&("ROLE_ADMIN"===this.role||"ROLE_MANAGER"===this.role))return!0}return!1},canSetTop:function(){if(!this.uid)return!1;if(4===this.type){if(this.uid===this.oid)return!0;if("ROLE_ADMIN"===this.role||"ROLE_MANAGER"===this.role)return!0}else if("ROLE_ADMIN"===this.role||"ROLE_MANAGER"===this.role)return!0;return!1},canReport:function(){return this.uid!=this.rootReply.uid},replyContent:function(){var e=this.rootReply.content;return e=(e=(e=e.replace(/\r\n/g,"<br>")).replace(/\n/g,"<br>")).replace(/\s/g,"&nbsp;")}},methods:{cancelReport:function(){this.showReportBox=!1,this.reportType=""},clickReport:function(e,t){this.uid?(this.rtt=e,this.tid=t,this.showReportBox=!0):this.showLoginBox=!0},handleRootReplyReoprt:function(){var e=this;return r()(o.a.mark(function t(){var s,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.uid){t.next=4;break}return console.log("show Login Box"),e.showLoginBox=!0,t.abrupt("return");case 4:if(e.reportType){t.next=7;break}return console.log("no type selcted"),t.abrupt("return");case 7:return t.next=9,h.postReport({rtt:e.rtt,rt:e.reportType,tid:e.tid});case 9:s=t.sent,0===(a=s.data).code?(e.$message({message:"举报成功",type:"success"}),e.reportType=""):e.$notify({title:"",message:a.msg,type:"warning"}),e.showReportBox=!1;case 13:case"end":return t.stop()}},t,e)}))()},showDelDialog:function(){this.showAdminBox=!1,this.showDelBox=!this.showDelBox},seeMore:function(){var e=this;return r()(o.a.mark(function t(){var s,a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.noMore=!0,t.next=3,h.getRepliesOfAnyClassPage({pn:1,oid:e.oid,type:e.type,root:e.rootReply.rpid});case 3:if(s=t.sent,a=s.data,console.log("view more subReplies:",a),0===a.code){for(e.rootReply.replies.splice(0),i=0,i=0;i<a.data.replies.length;i++)e.rootReply.replies.push(a.data.replies[i]);e.page=a.data.page,e.noMore=!0}else console.log("查看更多子评论失败");case 7:case"end":return t.stop()}},t,e)}))()},pageSelect:function(e){var t=this;return r()(o.a.mark(function s(){var a,i,n;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.getRepliesOfAnyClassPage({pn:e,oid:t.oid,type:t.type,root:t.rootReply.rpid});case 2:if(a=s.sent,0===(i=a.data).code){for(t.rootReply.replies.splice(0),n=0,n=0;n<i.data.replies.length;n++)t.rootReply.replies.push(i.data.replies[n]);t.page=i.data.page}else console.log("查看更多子评论失败");case 5:case"end":return s.stop()}},s,t)}))()},upvote:function(){var e=this;return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.uid){t.next=3;break}return e.showLoginBox=!0,t.abrupt("return");case 3:if(void 0,0!==e.rootReply.like_status){t.next=12;break}return t.next=7,h.upvoteReply(e.rootReply.rpid);case 7:t.sent,e.rootReply.like++,e.rootReply.like_status=1,t.next=17;break;case 12:return t.next=14,h.cancelUpvoteReply(e.rootReply.rpid);case 14:t.sent,e.rootReply.like--,e.rootReply.like_status=0;case 17:case"end":return t.stop()}},t,e)}))()},delRootReply:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.deleteMyRpely(e.rootReply.rpid);case 2:s=t.sent,0===s.data.code?(e.top?(e.$emit("onRemoveTopReply"),e.page="",e.noMore=!1):e.$emit("onRemoveRootReply",e.rootIndex),e.$message({message:"删除成功",type:"success"})):console.log("删除根评论失败，index:",e.rootIndex);case 5:case"end":return t.stop()}},t,e)}))()},removeSubReply:function(e){console.log("remove sub reply: ",e),this.rootReply.replies.splice(e,1)},showSubReplyBox:function(e){this.replyInfo=e,this.showReplyBox=!0},toggleReplyBox:function(){this.replyInfo=this.rootReply,this.showReplyBox=!this.showReplyBox},addSubReply:function(e){var t=this;return r()(o.a.mark(function s(){var a,i;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.getRepliesOfAnyClassPage({rpid:e,oid:t.oid,type:t.type});case 2:a=s.sent,0===(i=a.data).code?(t.$emit("onUpdateRootReply",i.data),t.page=i.data.subpage,t.showReplyBox=!1,t.noMore=!0):console.log("添加评论后刷新子评论失败");case 5:case"end":return s.stop()}},s,t)}))()},addTopSubReply:function(e){var t=this;return r()(o.a.mark(function s(){var a,i;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.getRepliesOfAnyClassPage({rpid:e,oid:t.oid,type:t.type});case 2:a=s.sent,0===(i=a.data).code?(t.$emit("onUpdateTopReply",i.data),t.page=i.data.subpage,t.showReplyBox=!1,t.noMore=!0):console.log("添加评论后刷新置顶子评论失败");case 5:case"end":return s.stop()}},s,t)}))()},addHotSubReply:function(e){var t=this;return r()(o.a.mark(function s(){var a,i;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.getRepliesOfAnyClassPage({rpid:e,oid:t.oid,type:t.type});case 2:a=s.sent,0===(i=a.data).code?(t.$emit("onUpdateHotReply",i.data,t.rootIndex),console.log("刷新热评：",i.data),t.page=i.data.subpage,t.showReplyBox=!1,t.noMore=!0):console.log("添加评论后刷新热评失败");case 5:case"end":return s.stop()}},s,t)}))()},stickReply:function(e){var t=this;return r()(o.a.mark(function s(){var a;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("置顶rpid",e),s.next=3,h.stickReply(e);case 3:a=s.sent.data,console.log("置顶",a),0===a.code?(t.$emit("onRefreshComment"),t.$message({message:"置顶成功",type:"success"})):t.$message({message:message.msg,type:"error"});case 6:case"end":return s.stop()}},s,t)}))()},unStickReply:function(e){var t=this;return r()(o.a.mark(function s(){var a;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("取消置顶rpid",e),s.next=3,h.unstickReply(e);case 3:a=s.sent.data,console.log("取消置顶",a),0===a.code?(t.$emit("onRefreshComment"),t.$message({message:"取消置顶成功",type:"success"})):t.$message({message:message.msg,type:"error"});case 6:case"end":return s.stop()}},s,t)}))()}},created:function(){var e=localStorage.getItem("USER_ID"),t=localStorage.getItem("ROLE");e&&(this.uid=parseInt(e)),t&&(this.role=t),this.subPage&&this.rootReply.rpid===this.subPage.rootId&&(this.page=this.subPage,this.noMore=!0)}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"commentItemBox",attrs:{id:e.rootReply.rpid}},[a("div",{staticClass:"commentItemInBox"},[a("a",{attrs:{href:"#/user/"+e.rootReply.uid,target:"_blank"}},[a("img",{staticClass:"commentItemAvatar",attrs:{src:e.rootReply.user.avatar?e.rootReply.user.avatar:"../../../static/img/noAvatar.jpg"}})]),e._v(" "),a("div",{staticClass:"commentContentBox"},[a("div",{staticClass:"replyUsername"},[a("a",{staticStyle:{"text-decoration":"none",color:"#D1EEEE"},attrs:{href:"#/user/"+e.rootReply.uid,target:"_blank"}},[e._v("\n          "+e._s(e.rootReply.user.nick)+"\n        ")]),e._v(" "),e.top?a("img",{staticClass:"stickFlag",attrs:{src:s("IWHN")}}):e._e(),e._v(" "),a("div",{staticClass:"adminBoxOutBox",attrs:{tabindex:"1"},on:{blur:function(t){e.showAdminBox=!1}}},[a("img",{staticClass:"adminMenuBtn",attrs:{src:s("3zQ2")},on:{click:function(t){e.showAdminBox=!e.showAdminBox}}}),e._v(" "),a("transition",{attrs:{name:"adminBoxTran"}},[e.showAdminBox?a("div",{staticClass:"adminBox"},[a("div",{staticClass:"adminInBox"},[!e.top&&e.canSetTop?a("p",{class:["stick","greyBtn"],on:{click:function(t){e.stickReply(e.rootReply.rpid)}}},[e._v("置顶")]):e._e(),e._v(" "),e.top&&e.canSetTop?a("p",{staticClass:"stick",class:["stick","greyBtn"],on:{click:function(t){e.unStickReply(e.rootReply.rpid)}}},[e._v("取消置顶")]):e._e(),e._v(" "),e.canReport?a("p",{staticClass:"report",on:{click:function(t){e.clickReport(1,e.rootReply.rpid)}}},[e._v("举报")]):e._e(),e._v(" "),e.canDelReply?a("p",{staticClass:"delete",on:{click:e.showDelDialog}},[e._v("删除")]):e._e()])]):e._e()])],1)]),e._v(" "),a("p",{staticClass:"replyContent",domProps:{innerHTML:e._s(e.replyContent)}}),e._v(" "),a("div",{staticClass:"commentControlBox"},[a("p",{staticClass:"commentFloor"},[e._v("#"+e._s(e.rootReply.floor))]),e._v(" "),a("p",{staticClass:"commentTime"},[e._v(e._s(e.getDateDiff))]),e._v(" "),a("div",{staticClass:"commentUpvote",on:{click:e.upvote}},[a("img",{attrs:{src:0===e.rootReply.like_status?"../../../static/img/upvote2.png":"../../../static/img/upvoted2.png"}}),e._v(" "),a("p",[e._v(e._s(e.rootReply.like))])]),e._v(" "),a("p",{staticClass:"commentReplyBtn",on:{click:e.toggleReplyBox}},[e._v("回复")]),e._v(" "),a("div",{staticClass:"delConfirmOutBox",attrs:{tabindex:"1"},on:{blur:function(t){e.showDelBox=!1}}},[a("transition",{attrs:{name:"delConfirmTran"}},[e.showDelBox?a("div",{staticClass:"deleteConfirm"},[a("p",{staticClass:"deleteConfirmTip"},[e._v("确定删除吗？")]),e._v(" "),a("div",{staticClass:"confirmDeleBtnBox"},[a("p",{staticClass:"cancelDelBtn",on:{click:function(t){e.showDelBox=!e.showDelBox}}},[e._v("取消")]),e._v(" "),a("p",{staticClass:"confirmDelBtn",on:{click:e.delRootReply}},[e._v("确定")])])]):e._e()])],1)])])]),e._v(" "),e._l(e.rootReply.replies,function(t,s){return a("div",{key:t.rpid},[a("sub-reply",{attrs:{subReply:t,subIndex:s,oid:e.oid,type:e.type},on:{onRecvSubReport:e.clickReport,onRecvShowLoginBox:function(t){e.showLoginBox=!0},onRemoveSubReply:e.removeSubReply,onShowSubReplyBox:e.showSubReplyBox}})],1)}),e._v(" "),e.rootReply.rcount>3&&!e.page?a("div",{staticStyle:{"text-align":"left","margin-bottom":"10px"}},[a("span",{staticStyle:{color:"#c5c8c6","font-size":"13px"}},[e._v("共"+e._s(e.rootReply.rcount)+"条回复，")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.noMore,expression:"!noMore"}],staticClass:"seeMore",on:{click:e.seeMore}},[e._v("点击查看更多")])]):e._e(),e._v(" "),e.noMore?a("div",[e.page.totalSize>10?a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.noMore,expression:"noMore"}],staticClass:"sub-pgn",staticStyle:{"margin-left":"45px"},attrs:{small:!0,"current-page":e.page.pageNumber,"page-count":11,"page-size":e.page.pageSize,layout:"total, prev, pager, next",total:e.page.totalSize},on:{"current-change":e.pageSelect,"update:currentPage":function(t){e.$set(e.page,"pageNumber",t)}}}):e._e()],1):e._e(),e._v(" "),a("post-reply",{directives:[{name:"show",rawName:"v-show",value:e.showReplyBox,expression:"showReplyBox"}],staticClass:"commentReplyBox",attrs:{oid:e.oid,type:e.type,replyInfo:e.replyInfo,parentRpid:e.rootReply.rpid,mode:1,top:e.top,hot:e.hot},on:{onAddHotSubReply:e.addHotSubReply,onAddTopSubReply:e.addTopSubReply,onAddSubReply:e.addSubReply}}),e._v(" "),a("el-dialog",{attrs:{title:"举报",width:"400",visible:e.showReportBox,"append-to-body":""},on:{"update:visible":function(t){e.showReportBox=t}}},[a("el-radio-group",{model:{value:e.reportType,callback:function(t){e.reportType=t},expression:"reportType"}},[a("div",[a("el-radio",{attrs:{label:1}},[e._v("辱骂")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("色情")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("垃圾广告")]),e._v(" "),a("el-radio",{attrs:{label:4}},[e._v("引战")])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-radio",{attrs:{label:5}},[e._v("剧透")]),e._v(" "),a("el-radio",{attrs:{label:6}},[e._v("人身攻击")]),e._v(" "),a("el-radio",{attrs:{label:7}},[e._v("隐私侵犯")]),e._v(" "),a("el-radio",{attrs:{label:8}},[e._v("刷屏")])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-radio",{attrs:{label:9}},[e._v("违法违规")]),e._v(" "),a("el-radio",{attrs:{label:10}},[e._v("低俗")]),e._v(" "),a("el-radio",{attrs:{label:11}},[e._v("赌博诈骗")]),e._v(" "),a("el-radio",{attrs:{label:12}},[e._v("其他")])],1)]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelReport}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.reportType,type:"primary"},on:{click:e.handleRootReplyReoprt}},[e._v("确定")])],1)],1),e._v(" "),a("transition",{attrs:{name:"loginNowBoxTran"}},[e.showLoginBox?a("login-box",{staticClass:"loginNowBox",on:{closeLoginBox:function(t){e.showLoginBox=!1}}}):e._e()],1)],2)},staticRenderFns:[]};var He={name:"RealComment",props:["oid","type","rpid"],components:{RootReply:s("VU/8")(Oe,Pe,!1,function(e){s("vxG1"),s("3mTr")},"data-v-11cbdbfd",null).exports,commentItem:Ee,"post-reply":Qe},data:function(){return{sort:1,topReplies:"",hotReplies:[],rootReplies:[],page:"",subPage:"",refreshVal:0}},watch:{oid:function(e){this.initComment()}},methods:{refreshComment:function(){var e=this;return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("refresh comment"),e.sort=1,e.$nextTick(function(){var t=e.$refs.topReply;t&&(t.page="",t.noMore=!1),console.log("topReply:",t)}),e.refreshVal++,e.initComment();case 5:case"end":return t.stop()}},t,e)}))()},initComment:function(){var e=this;return r()(o.a.mark(function t(){var s,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getRepliesOfAnyClassPage({pn:1,oid:e.oid,type:e.type,sort:e.sort});case 2:s=t.sent,a=s.data,console.log("初始化评论：",a),0===a.code?(e.topReplies=a.data.top,console.log("置顶评论",a.data.top,e.topReplies),e.rootReplies=a.data.replies,e.hotReplies=a.data.hot,e.page=a.data.page):console.log("初始化评论出错！");case 6:case"end":return t.stop()}},t,e)}))()},sortByHot:function(){var e=this;return r()(o.a.mark(function t(){var s,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.sort=2,t.next=3,h.getRepliesOfAnyClassPage({oid:e.oid,type:e.type,sort:e.sort});case 3:s=t.sent,0===(a=s.data).code?(e.rootReplies=a.data.replies,e.page=a.data.page,e.hotReplies=[]):console.log("按点赞数排序获取消息失败");case 6:case"end":return t.stop()}},t,e)}))()},pageSelect:function(e){var t=this;return r()(o.a.mark(function s(){var a,i;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.getRepliesOfAnyClassPage({pn:e,oid:t.oid,type:t.type,sort:t.sort});case 2:a=s.sent,0===(i=a.data).code?(t.rootReplies=i.data.replies,t.hotReplies=i.data.hot,t.topReplies=i.data.top,t.page=i.data.page):console.log("翻页获取消息失败");case 5:case"end":return s.stop()}},s,t)}))()},removeRootReply:function(e){console.log("remove root reply: ",e),this.rootReplies.splice(e,1)},addRootReply:function(e){console.log("add rootReply: ",e),this.refreshComment()},updateRootReply:function(e){console.log("updateRootReply:",e),this.topReplies=e.top,this.rootReplies=e.replies,this.page=e.page},updateHotReply:function(e,t){for(var s=0;s<e.replies.length;s++)e.replies[s].rpid===e.subpage.rootId&&(this.hotReplies.splice(t,1,e.replies[s]),console.log("found hotReply,update it :",e.replies[s]));console.log("hotReplies:",this.hotReplies)},removeTopReply:function(){this.topReplies=""},updateTopReply:function(e){console.log("updateTopReply:",e);for(var t=e.subpage.rootId,s=e.replies?e.replies.length:0;s--;)if(t===e.replies[s].rpid){console.log("found topReply:",e.replies[s]),this.topReplies=e.replies[s];break}},goAnchor:function(e){var t=document.getElementById(e);console.log("selector:",e),console.log("anchor:",t),t?(console.log("scrollIntoView!!!"),t.scrollIntoView()):this.$message({message:"评论已被删除",type:"info"})}},created:function(){!this.rpid&&this.initComment()},mounted:function(){var e=this;return r()(o.a.mark(function t(){var s,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("mounted.....rpid:",e.rpid),!e.rpid){t.next=8;break}return t.next=4,h.getRepliesOfAnyClassPage({rpid:e.rpid,oid:e.oid,type:e.type});case 4:s=t.sent,0===(a=s.data).code?(e.rootReplies=a.data.replies,e.page=a.data.page,0!==a.data.subpage.totalSize&&(e.subPage=a.data.subpage,console.log("subPage:",e.subPage))):console.log("position err..."),e.$nextTick(function(){e.goAnchor(e.rpid)});case 8:case"end":return t.stop()}},t,e)}))()}},Ye={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"commentBox"},[s("div",{staticClass:"commentNum"},[s("p",[e._v(e._s(e.page?e.page.allTotalSize:0)+" 条评论")])]),e._v(" "),s("div",{staticClass:"commentTitle"},[s("p",{staticClass:"commentAll"},[e._v("全部评论")]),e._v(" "),s("p",{staticClass:"refreshBtn",on:{click:e.refreshComment}},[e._v("刷新评论")])]),e._v(" "),s("div",[s("post-reply",{staticStyle:{"border-bottom":"1px solid gray"},attrs:{oid:e.oid,type:e.type,mode:0},on:{onAddRootReply:e.addRootReply}})],1),e._v(" "),1==e.page.pageNumber&&this.topReplies?s("div",{staticClass:"stickReplyBox"},[s("root-reply",{ref:"topReply",attrs:{oid:e.oid,type:e.type,rootReply:e.topReplies,subPage:e.subPage,refresh:e.refreshVal,top:!0},on:{onRefreshComment:e.refreshComment,onRemoveTopReply:e.removeTopReply,onUpdateTopReply:e.updateTopReply}})],1):e._e(),e._v(" "),e.hotReplies&&0!==e.hotReplies.length?s("div",e._l(e.hotReplies,function(t,a){return s("div",{key:t.rpid,staticStyle:{color:"red"}},[s("root-reply",{attrs:{oid:e.oid,type:e.type,hot:!0,rootReply:t,rootIndex:a,subPage:e.subPage,refresh:e.refreshVal},on:{onRefreshComment:e.refreshComment,onRemoveRootReply:e.removeRootReply,onUpdateHotReply:e.updateHotReply}})],1)})):e._e(),e._v(" "),e.hotReplies&&0!==e.hotReplies.length?s("div",{staticClass:"hot-line"},[s("span",[e._v("以上为热门评论，"),s("a",{staticClass:"more-hot",on:{click:e.sortByHot}},[e._v("查看更多")])])]):e._e(),e._v(" "),s("div",e._l(e.rootReplies,function(t,a){return s("div",{key:t.rpid,staticStyle:{color:"red"}},[s("root-reply",{attrs:{rootReply:t,rootIndex:a,oid:e.oid,type:e.type,subPage:e.subPage,refresh:e.refreshVal},on:{onRefreshComment:e.refreshComment,onRemoveRootReply:e.removeRootReply,onUpdateRootReply:e.updateRootReply}})],1)})),e._v(" "),e.page||e.rootReplies.length>0?s("div",{staticClass:"pagination"},[e.page.totalSize>20?s("el-pagination",{staticClass:"root-pgn",attrs:{background:"","current-page":e.page.pageNumber,"page-count":11,"page-size":e.page.pageSize,layout:"total, prev, pager, next, jumper",total:e.page.totalSize},on:{"current-change":e.pageSelect,"update:currentPage":function(t){e.$set(e.page,"pageNumber",t)}}}):e._e()],1):e._e()])},staticRenderFns:[]};var Ke=s("VU/8")(He,Ye,!1,function(e){s("OEJT"),s("T5DL")},"data-v-0f1087b3",null).exports,Je={components:{VueDPlayer:ne.a,submitMovie:Z,"real-comment":Ke,footer1:b,"login-box":je},data:function(){return{dp:"",online:0,ws:null,webSocketInterval:null,hasInfo:!1,videoCover:"../../../static/img/1.jpg",videoURL:"",videoMd5:"",videoSize:0,videoInfo:{bangumiId:-1,bangumiName:"",danmakuCount:0,danmakuId:"",episodeId:-1,episodeIndex:-1,replyable:-1,thumb:"",videoId:-1,viewCount:-1},showSubmitMvBox:!1,specificRpid:this.$route.query.rpid,loading:!1,videoListShow:!1,videoList:[],mvIndex:0,showMatchBox:!1,searchMvKey:"",searchMvResult:[],searchMvBoxShow:!0,searchWaitingShow:!1,noSearchMvResult:!1,searchResultChoose:{},searchResultEpisodeNum:0,wsSendIntervalId:"",bugTmp:0,tmpDanmaku:{text:"",color:"#ffffff",type:0},showDanPos:!1,showFontSet:!1,opacity:100,fontSize:25,danmakuStyle:{opacity:"1",fontSize:"25px"},loginBoxShow:!1,isLogin:!1,manualSetDisabled:!1,hideBottomDan:!1,predefineColors:["#00FFFF","#000000","#0000FF","#FF00FF","#808080","#008000","#00FF00","#800000","#000080","#808000","#800080","#FF0000","#C0C0C0","#008080","#FFFFFF","#FFFF00"]}},watch:{$route:function(e,t){var s=this;console.log("to: ",e+" from: ",t),this.resetAllData(),setTimeout(function(){s.initDp()},1)},opacity:function(){var e=document.getElementsByClassName("dplayer-danmaku");console.log("弹幕节点",e),e[0].style.opacity=(this.opacity/100).toString()},fontSize:function(){var e=document.getElementsByClassName("dplayer-danmaku");console.log(this.fontSize.toString()+"px"),e[0].setAttribute("style","font-size: "+this.fontSize.toString()+"px !important")},hideBottomDan:function(){this.hideBottomDan?this.$nextTick(function(){var e=document.getElementsByClassName("dplayer-danmaku");e&&e[0]&&(e[0].classList.add("my-block-bottom"),localStorage.setItem("dbb",!0))}):this.$nextTick(function(){var e=document.getElementsByClassName("dplayer-danmaku");e&&e[0]&&(e[0].classList.remove("my-block-bottom"),localStorage.setItem("dbb",!1))})},videoInfo:function(){this.dp&&this.switchVideo(),this.videoCover=""===this.videoInfo.thumb?"../../../static/img/1.jpg":this.videoInfo.thumb,clearInterval(this.webSocketInterval),this.ws&&this.ws.close(),this.webSocketInterval=null,this.initWebsocket(this.videoInfo.episodeId)},searchMvKey:function(e){var t=this;return r()(o.a.mark(function s(){var a;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(console.log("searching...",t.searchMvKey),t.searchResultEpisodeNum=0,t.noSearchMvResult=!1,console.log("选择了的番剧名称",t.searchResultChoose.bangumiName),""!==t.searchMvKey&&t.searchMvKey!=t.searchResultChoose.bangumiName){s.next=7;break}return t.searchMvBoxShow=!1,s.abrupt("return");case 7:return t.searchMvBoxShow=!0,t.searchResultChoose={},t.searchWaitingShow=!0,t.searchMvResult=[],s.next=13,h.getsearchBangumisIdResult(t.searchMvKey);case 13:if(a=s.sent,t.searchMvKey==e){s.next=16;break}return s.abrupt("return");case 16:if(t.searchWaitingShow=!1,console.log("搜索结果",a),0!=a.data.code||void 0===a.data.data.content){s.next=24;break}if(t.searchMvKey==e){s.next=21;break}return s.abrupt("return");case 21:t.searchMvResult=a.data.data.content,s.next=30;break;case 24:if(void 0!==a.data.data.content){s.next=30;break}if(t.searchMvKey==e){s.next=27;break}return s.abrupt("return");case 27:t.searchMvResult=[],t.noSearchMvResult=!0,console.log("没有数据");case 30:case"end":return s.stop()}},s,t)}))()}},methods:{parseColor:function(e){return parseInt(e.substring(1),16)},sendDanmaku:function(){var e=this;if(this.dp){if(""===this.tmpDanmaku.text)return;this.manualSetDisabled=!0,setTimeout(function(){e.manualSetDisabled=!1,e.$nextTick(function(){console.log("time out refs: ",e.$refs.dipt),e.$refs.dipt.focus(),console.log("danmaku input focus!!!!")})},3e3),this.dp.danmaku.send({text:this.tmpDanmaku.text,color:this.tmpDanmaku.color?this.parseColor(this.tmpDanmaku.color):this.parseColor("#ffffff"),type:parseInt(this.tmpDanmaku.type)},function(){e.tmpDanmaku.text=""})}},initWebsocket:function(e){var t=this;this.ws=new WebSocket(this.GLOBAL.wsURL+"/watch/"+e),this.ws.onmessage=this.getMessage,this.wsSendIntervalId=setInterval(function(){console.log("send ws interval....."),t.ws&&(console.log("ws state:",t.ws.readyState),t.ws.readyState===t.ws.OPEN&&(console.log("send ws!!!!"),t.ws.send(t.online?t.online:1)))},9e4)},runws:function(e){var t=this;if(this.ws.readyState===this.ws.OPEN)this.getMessage();else if(this.ws.readyState===this.ws.CONNECTING){var s=this;this.webSocketInterval=setInterval(function(){s.getMessage()},300)}else{this.videoList=videosInfos,this.hasInfo=!0,this.videoInfo=expectVideo,setTimeout(function(){t.$notify({title:"识别成功",message:t.bangumiName+" "+t.episodeIndex,type:"success"})},800),this.initWebsocket(e);var a=this;this.webSocketInterval=setInterval(function(){a.getMessage()},500)}},getMessage:function(e){this.online=e.data},resetAllData:function(){console.log("begin reset add data......."),this.dp="",this.hasInfo=!1,this.videoCover="../../../static/img/1.jpg",this.videoURL="",this.videoMd5="",this.videoSize=0,this.videoInfo={bangumiId:-1,bangumiName:"",danmakuCount:0,danmakuId:"",episodeId:-1,episodeIndex:-1,replyable:-1,thumb:"",videoId:-1,viewCount:-1},this.showSubmitMvBox=!1,this.specificRpid=this.$route.query.rpid,this.loading=!1,this.videoListShow=!1,this.videoList=[],this.mvIndex=0,this.showMatchBox=!1,this.searchMvKey="",this.searchMvResult=[],this.searchMvBoxShow=!0,this.searchWaitingShow=!1,this.noSearchMvResult=!1,this.searchResultChoose={},this.searchResultEpisodeNum=0,this.videoCover="../../../static/img/1.jpg",console.log("end reset add data.......")},getFileMd5:function(e){return new p.a(function(t,s){try{new Ie(e,function(e){t(e)})}catch(e){s(e)}})},switchVideo:function(){console.log("弹幕id",this.videoInfo.danmakuId);var e={id:this.videoInfo.danmakuId,api:this.GLOBAL.danmakuURL,token:localStorage.getItem("JWT_TOKEN"),maximum:1e3,user:localStorage.getItem("loginUserName"),bottom:"15%",unlimited:!0};this.dp.switchVideo({url:this.videoURL},e)},handleChange:function(e){var t=this;return r()(o.a.mark(function s(){var a,i,n;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.specificRpid=null,t.loading=!0,t.bugTmp++,t.showMatchBox=!1,t.videoURL=e.url,s.next=7,t.getFileMd5(e.raw);case 7:return t.videoMd5=s.sent,t.videoSize=e.size,s.next=11,h.getVideosInfo(t.videoSize,t.videoMd5);case 11:a=s.sent.data,console.log("resData:",a),i=a.data.videoInfos,n=a.data.ev,0===a.code||"OK"===a.msg?void 0===n?i.length>1?(t.videoListShow=!0,t.videoList=i):1===i.length?(t.hasInfo=!0,t.videoInfo=i[0],setTimeout(function(){t.$notify({title:"识别成功",message:t.videoInfo.bangumiName+" "+t.videoInfo.episodeIndex,type:"success"})},800)):(t.hasInfo=!1,t.videoInfo={bangumiId:-1,bangumiName:"",danmakuCount:0,danmakuId:"",episodeId:-1,episodeIndex:-1,replyable:-1,thumb:"",videoId:-1,viewCount:-1}):(t.videoList=i,t.hasInfo=!0,t.videoInfo=n,setTimeout(function(){t.$notify({title:"识别成功",message:t.videoInfo.bangumiName+" "+t.videoInfo.episodeIndex,type:"success"})},800)):(t.showMatchBox=!0,t.hasInfo=!1,t.videoInfo={bangumiId:-1,bangumiName:"",danmakuCount:0,danmakuId:"",episodeId:-1,episodeIndex:-1,replyable:-1,thumb:"",videoId:-1,viewCount:-1}),t.loading=!1;case 17:case"end":return s.stop()}},s,t)}))()},chooseMv:function(){var e=this;this.loading=!0,this.videoListShow=!1,this.videoInfo=this.videoList[this.mvIndex],this.hasInfo=!0,console.log(this.videoInfo),this.loading=!1,setTimeout(function(){e.$notify({title:"识别成功",message:e.videoInfo.bangumiName+" "+e.videoInfo.episodeIndex,type:"success"}),h.matchVideoSuccess({v:e.videoInfo.videoId})},800)},noChoose:function(){this.loading=!0,this.videoListShow=!1,this.showMatchBox=!0,this.loading=!1},chooseResult:function(e){this.searchResultChoose=this.searchMvResult[e],this.searchMvResult=[this.searchResultChoose],console.log("选择了",this.searchResultChoose),this.searchMvKey=this.searchResultChoose.bangumiName,this.searchMvBoxShow=!1},confirmMvSearch:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("番剧id和集数",e.searchResultChoose.bangumiId,e.searchResultEpisodeNum),e.searchResultChoose!={}&&0!=e.searchResultEpisodeNum){t.next=4;break}return e.$message({message:"请填入正确番剧或集数",type:"error"}),t.abrupt("return");case 4:return e.showMatchBox=!1,e.loading=!0,t.next=8,h.getDanmakujiIdByBangumisIdAndepIndex(e.searchResultChoose.bangumiId,e.searchResultEpisodeNum);case 8:s=t.sent,console.log("手动选择番剧信息",s),e.videoInfo=s.data.data,e.hasInfo=!0,e.sendMvInfo(),e.searchMvKey="",e.searchMvResult=[],e.noSearchMvResult=!1,e.searchWaitingShow=!1,e.searchResultChoose={},e.searchResultEpisodeNum=0,e.loading=!1,setTimeout(function(){e.$notify({title:"手动匹配成功",message:e.videoInfo.bangumiName+" "+e.videoInfo.episodeIndex,type:"success"}),h.sendVideoMatchInfo({ep_id:e.videoInfo.episodeId,v_md5:e.videoMd5,v_size:e.videoSize})},800);case 21:case"end":return t.stop()}},t,e)}))()},cancelMvSearch:function(){this.showMatchBox=!1,this.searchMvKey="",this.searchMvResult=[],this.noSearchMvResult=!1,this.searchWaitingShow=!1,this.searchResultChoose={},this.searchResultEpisodeNum=0,this.loading=!1},sendMvInfo:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("发送视频信息"),t.next=3,h.sendVideoMatchInfo({ep_id:e.videoInfo.episodeId,v_md5:e.videoMd5,v_size:e.videoSize});case 3:s=t.sent.data,console.log(s);case 5:case"end":return t.stop()}},t,e)}))()},initDp:function(){var e=this;return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("init dplayer!!!!"),console.log("pic:",e.videoCover),t.next=4,new ne.a({container:document.getElementById("dplayer"),autoplay:!1,video:{url:e.videoURL,pic:e.videoCover,poster:e.videoCover},danmaku:{id:e.videoInfo.danmakuId,api:e.GLOBAL.danmakuURL,token:localStorage.getItem("JWT_TOKEN"),maximum:1e3,user:localStorage.getItem("loginUserName"),bottom:"15%",unlimited:!0},opacity:1,lang:"zh-cn"});case 4:e.dp=t.sent;case 5:case"end":return t.stop()}},t,e)}))()},closeSubmitMvBox:function(){this.showSubmitMvBox=!1},reloadMvInfo:function(){this.$message({message:"提交成功，审核通过后即可选择您的番剧信息。",type:"success"})},initEpisodeInfo:function(e){var t=this;return r()(o.a.mark(function s(){var a;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.getEpisodeInfoByEpId(e);case 2:a=s.sent.data,console.log("根据epid获取视频信息",a),console.log("begin initEpisodeInfo"),0===a.code&&(t.videoInfo=a.data,t.hasInfo=!0,t.videoURL=a.data.videoUrl,console.log("url!!!!!!!!!!!:",a.data.videoUrl),t.videoCover=""===a.data.thumb?"../../../static/img/1.jpg":a.data.thumb),console.log("end initEpisodeInfo");case 7:case"end":return s.stop()}},s,t)}))()}},computed:{canSendDanmaku:function(){return!!localStorage.getItem("USER_ID")&&(!!this.videoInfo.danmakuId&&(!!this.hasInfo&&!!this.videoURL))}},mounted:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("watchpage mounted!!!!"),(s=e.$route.params.epid)?(e.initWebsocket(s),e.initEpisodeInfo(s).then(function(){console.log("initEpisode end......."),e.initDp()})):e.initDp();case 3:case"end":return t.stop()}},t,e)}))()},created:function(){console.log("watchPage created!!!"),localStorage.getItem("USER_ID")&&(this.isLogin=!0),localStorage.getItem("dbb")&&"true"===localStorage.getItem("dbb")&&(this.hideBottomDan=!0)},beforeDestroy:function(){this.ws&&this.ws.close(),clearInterval(this.webSocketInterval),this.webSocketInterval=null,this.wsSendIntervalId&&(clearInterval(this.wsSendIntervalId),this.wsSendIntervalId="")}},Ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:["watchPageBox",{watchPageBoxB:e.showSubmitMvBox||e.loading}],style:e.hasInfo?"":{height:"845px"}},[a("div",{staticClass:"searchResultBg2"},[a("div",{staticClass:"searchResultBgInBox"}),e._v(" "),a("div",{staticClass:"searchResultBgBox"},[a("img",{staticClass:"searchResultBgImg",attrs:{src:e.videoCover}})])]),e._v(" "),a("transition",{attrs:{name:"submitMvBoxTran"}},[e.showSubmitMvBox?a("div",{staticClass:"submitMovieBox"},[a("submit-movie",{staticClass:"submitMovieInBox",attrs:{show:e.showSubmitMvBox},on:{closeBox:e.closeSubmitMvBox,updateMvList:e.reloadMvInfo}})],1):e._e()]),e._v(" "),e.hasInfo?a("div",[a("div",{staticClass:"mvInfo"},[a("p",{staticClass:"mvTitle"},[e._v(e._s(e.videoInfo.bangumiName)+"：第"+e._s(e.videoInfo.episodeIndex)+"集")]),e._v(" "),a("p",{staticClass:"mvMatch",on:{click:function(t){e.showMatchBox=!e.showMatchBox,e.showSubmitMvBox=!1}}},[e._v("手动匹配")])]),e._v(" "),a("div",{staticClass:"mvOtherInfo"},[a("div",[a("img",{attrs:{src:s("Qb+L"),title:"访问量"}}),e._v(" "),a("p",[e._v(e._s(e.videoInfo.viewCount))])]),e._v(" "),a("div",[a("img",{attrs:{src:s("uabP"),title:"弹幕数"}}),e._v(" "),a("p",[e._v(e._s(e.videoInfo.danmakuCount))])])])]):e._e(),e._v(" "),a("div",{class:[e.hasInfo?"":"noMvInfo"]},[a("el-upload",{staticClass:"videoBox",attrs:{id:"uploadBox",drag:"",multiple:!1,"auto-upload":!1,"on-change":e.handleChange,action:"/","show-file-list":!1}},[a("div",{staticClass:"uploadTips"},[e._v("将视频文件拖动到播放窗口，或点击这里可以手动选择视频文件")]),e._v(" "),e.loading?a("div",{staticClass:"wattingBox"},[a("img",{attrs:{src:"data:image/gif;base64,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"}}),e._v(" "),a("p",[e._v("加载数据中...")])]):e._e(),e._v(" "),a("transition",{attrs:{name:"chooseMvBoxTrans"}},[e.videoListShow?a("div",{staticClass:"chooseMvBox",on:{click:function(e){e.stopPropagation()}}},[a("p",{staticClass:"choosMvTitle"},[e._v("确认番剧")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.mvIndex,expression:"mvIndex"}],staticClass:"chooseMv",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.mvIndex=t.target.multiple?s:s[0]}}},e._l(e.videoList,function(t,s){return a("option",{key:t.bangumiId,domProps:{value:s}},[e._v(e._s(t.bangumiName)+" -\n              第"+e._s(t.episodeIndex)+"集\n            ")])})),e._v(" "),a("div",{staticClass:"chooseMvBtnBox"},[a("div",{staticClass:"confrimMvBtn",on:{click:e.chooseMv}},[e._v("确定")]),e._v(" "),a("div",{staticClass:"noChooseBtn",on:{click:e.noChoose}},[e._v("以上都不是")])])]):e._e()]),e._v(" "),a("transition",{attrs:{name:"mvMatchBox"}},[e.showMatchBox?a("div",{staticClass:"matchBox",on:{click:function(e){e.stopPropagation()}}},[a("div",{staticClass:"matchInBox"},[a("div",{staticClass:"matchInfoBox"},[a("div",{staticClass:"searchMvKeyBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchMvKey,expression:"searchMvKey"}],attrs:{placeholder:"请输入番剧关键词"},domProps:{value:e.searchMvKey},on:{input:function(t){t.target.composing||(e.searchMvKey=t.target.value)}}}),e._v(" "),""!=e.searchMvKey&&e.searchMvBoxShow?a("div",{staticClass:"searchMvResultBox"},[e.searchWaitingShow?e._e():a("div",{staticClass:"searchMvResultInBox"},e._l(e.searchMvResult,function(t,s){return a("p",{key:t.bangumiId,on:{click:function(t){e.chooseResult(s)}}},[e._v("\n                      "+e._s(t.bangumiName))])})),e._v(" "),e.searchWaitingShow?a("div",{staticClass:"searchMvResultInBox"},[a("p",[e._v("搜索中...")])]):e._e(),e._v(" "),e.noSearchMvResult?a("div",{staticClass:"searchMvResultInBox"},[a("p",{on:{click:function(t){e.showSubmitMvBox=!0}}},[e._v("没找到结果？马上创建！")])]):e._e()]):e._e()]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.searchResultEpisodeNum,expression:"searchResultEpisodeNum"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.searchResultEpisodeNum=t.target.multiple?s:s[0]}}},[a("option",{attrs:{value:"0"}},[e._v("请选择集数")]),e._v(" "),e._l(e.searchResultChoose.episodeTotal,function(t){return a("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})],2)]),e._v(" "),a("div",{staticClass:"matchBtnBox"},[a("p",{on:{click:e.confirmMvSearch}},[e._v("确定")]),e._v(" "),a("p",{on:{click:e.cancelMvSearch}},[e._v("取消")])])])]):e._e()]),e._v(" "),a("div",{ref:"player",staticClass:"videoSize",attrs:{id:"dplayer"},on:{click:function(e){e.stopPropagation()}}}),e._v(" "),a("div",{staticClass:"mvBarrageBox",on:{click:function(e){e.stopPropagation()}}},[a("div",{staticClass:"onlineNumBox"},[a("p",[e._v("在线人数 "+e._s(e.online))])]),e._v(" "),a("div",{staticClass:"dm-color-wrapper",attrs:{title:"选择弹幕颜色"}},[a("el-color-picker",{attrs:{predefine:e.predefineColors,size:"mini"},model:{value:e.tmpDanmaku.color,callback:function(t){e.$set(e.tmpDanmaku,"color",t)},expression:"tmpDanmaku.color"}})],1),e._v(" "),a("el-popover",{attrs:{"visible-arrow":!1,placement:"top",width:"180",trigger:"click"},model:{value:e.showDanPos,callback:function(t){e.showDanPos=t},expression:"showDanPos"}},[a("div",{staticClass:"dm-pos-choose-wrapper"},[a("div",{staticClass:"dm-pos-setting-title"},[a("span",[e._v("选择弹幕类型")])]),e._v(" "),a("el-radio-group",{staticStyle:{cursor:"pointer"},attrs:{size:"mini"},on:{change:function(t){e.showDanPos=!1}},model:{value:e.tmpDanmaku.type,callback:function(t){e.$set(e.tmpDanmaku,"type",t)},expression:"tmpDanmaku.type"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("顶部")]),e._v(" "),a("el-radio-button",{attrs:{label:"0"}},[e._v("滚动")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("底部")])],1)],1),e._v(" "),a("div",{staticClass:"choose-dan-pos",attrs:{slot:"reference",title:"选择弹幕类型"},slot:"reference"},[a("i",{staticClass:"el-icon-tickets dan-icon"})])]),e._v(" "),a("el-popover",{attrs:{"visible-arrow":!1,placement:"top",width:"250",trigger:"click"},model:{value:e.showFontSet,callback:function(t){e.showFontSet=t},expression:"showFontSet"}},[a("div",{staticClass:"dm-pos-choose-wrapper"},[a("div",{staticClass:"dm-pos-setting-title"},[a("span",[e._v("弹幕显示设置")])]),e._v(" "),a("div",[a("div",{staticClass:"displaySet"},[a("span",{staticClass:"demonstration",staticStyle:{width:"30%"}},[e._v("透明度")]),e._v(" "),a("el-slider",{staticStyle:{width:"60%",margin:"-10px auto"},model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}})],1),e._v(" "),a("div",{staticClass:"displaySet"},[a("span",{staticClass:"demonstration",staticStyle:{width:"30%"}},[e._v("字体大小")]),e._v(" "),a("el-slider",{staticStyle:{width:"60%",margin:"-10px auto"},attrs:{max:30,min:10},model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}})],1),e._v(" "),a("div",{staticClass:"displaySet"},[a("span",{staticClass:"demonstration",staticStyle:{width:"100px"}},[e._v("尽量防挡字幕")]),e._v(" "),a("el-switch",{attrs:{"active-color":"#3a86ef","inactive-color":"#777"},model:{value:e.hideBottomDan,callback:function(t){e.hideBottomDan=t},expression:"hideBottomDan"}})],1)])]),e._v(" "),a("div",{staticClass:"choose-dan-pos",attrs:{slot:"reference",title:"弹幕显示设置"},slot:"reference"},[a("i",{staticClass:"el-icon-setting dan-icon",on:{click:function(t){e.showFontSet=!e.showFontSet}}})])]),e._v(" "),e.canSendDanmaku?e._e():a("div",{staticClass:"wp-replyLoginTip"},[a("div",{staticClass:"wp-replyLoginTipInBox"},[a("p",{staticClass:"wp-loginTipText wp-loginTipText1"},[e._v("请先 ")]),e._v(" "),e.isLogin?a("p",{staticClass:"wp-load-video-btn"},[a("el-upload",{attrs:{multiple:!1,"auto-upload":!1,"on-change":e.handleChange,action:"/","show-file-list":!1}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("载入视频")])],1)],1):a("p",{staticClass:"wp-replyLoginBtn",on:{click:function(t){e.loginBoxShow=!0}}},[e._v("登陆")]),e._v(" "),a("p",{staticClass:"wp-loginTipText"},[e._v("后发表弹幕 (・ω・)")])])]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.tmpDanmaku.text,expression:"tmpDanmaku.text"}],ref:"dipt",attrs:{maxlength:"50",disabled:!e.canSendDanmaku||e.manualSetDisabled,placeholder:"请输入弹幕"},domProps:{value:e.tmpDanmaku.text},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.sendDanmaku(t):null},input:function(t){t.target.composing||e.$set(e.tmpDanmaku,"text",t.target.value)}}}),e._v(" "),a("button",{class:{mvBarrageBoxBtn:e.canSendDanmaku,"nl-mvBarrageBoxBtn":!e.canSendDanmaku||e.manualSetDisabled},staticStyle:{"text-align":"center",border:"none",outline:"none"},attrs:{disabled:!e.canSendDanmaku||e.manualSetDisabled},on:{click:e.sendDanmaku}},[a("span",[e._v("发送")])])],1)],1)],1),e._v(" "),e.hasInfo?a("div",{staticClass:"commentList",attrs:{id:"comment"}},[a("real-comment",{attrs:{oid:e.videoInfo?e.videoInfo.episodeId:"",type:1,rpid:e.specificRpid}})],1):e._e(),e._v(" "),a("transition",{attrs:{name:"loginNowBoxTran"}},[e.loginBoxShow?a("login-box",{staticClass:"wp-loginNowBox",on:{closeLoginBox:function(t){e.loginBoxShow=!1}}}):e._e()],1)],1)},staticRenderFns:[]};var Xe=s("VU/8")(Je,Ve,!1,function(e){s("SyLs"),s("7VCx")},"data-v-8448b41a",null).exports,Ze={data:function(){return{choose:!1,username:"",password:""}},components:{darkerSwitch:Te},watch:{},methods:{login:function(){var e=this;return r()(o.a.mark(function t(){var s,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.username&&""!=e.password){t.next=3;break}return e.$message({message:"账号或密码不能为空！",type:"error"}),t.abrupt("return");case 3:return t.next=5,h.login({principal:e.username,password:e.password,remember_me:e.choose?1:0});case 5:if(s=t.sent,console.log(s),2002!==(a=s.data).code&&null!=a.data){t.next=11;break}return e.$message({message:"账号或密码错误，请重试！",type:"error"}),t.abrupt("return",!1);case 11:if(0!==a.code&&"OK"!==a.msg){t.next=16;break}if(a.data.token){t.next=15;break}return e.$message({message:"登陆错误，请重试！(Error message: Can't not get the Token)",type:"error"}),t.abrupt("return");case 15:e.checkLocalStorage()&&(localStorage.setItem("USER_ID",a.data.user.uid),localStorage.setItem("JWT_TOKEN",a.data.token),localStorage.setItem("loginUserName",e.username),localStorage.setItem("face",a.data.user.face),localStorage.setItem("ROLE",a.data.user.role),console.log("登录成功了！",localStorage),window.location.href="/");case 16:case"end":return t.stop()}},t,e)}))()},checkLocalStorage:function(){return void 0!==window.localStorage||(this.$message({message:"错误：无法保持登录状态！（浏览器不支持，或开启了关闭隐私模式）",type:"warning"}),!1)}}},We={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loginPage"},[a("div",{staticClass:"loginBox"},[a("form",{attrs:{action:"",method:"get"}},[a("img",{staticClass:"loginLogo",attrs:{src:s("ZBJ4")}}),e._v(" "),a("p",[e._v("登入 Darker")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",name:"fname",placeholder:"昵称/邮箱"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"lname",min:"6",max:"20",placeholder:"请输入密码"},domProps:{value:e.password},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null},input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),a("div",{staticClass:"switchBox"},[e._v("\n                记住我\n                "),a("darker-switch",{staticClass:"switch",attrs:{choose:e.choose},on:{"update:choose":function(t){e.choose=t}}})],1),e._v(" "),a("a",{on:{click:e.login}},[e._v("登陆")]),e._v(" "),e._m(0)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pswToolBox"},[t("a",{staticClass:"pswToolBtn",attrs:{href:"#/register"}},[this._v("马上注册")]),this._v(" | "),t("a",{staticClass:"pswToolBtn",attrs:{href:"#/forget"}},[this._v("忘记密码？")])])}]};var qe=s("VU/8")(Ze,We,!1,function(e){s("+4Ka")},"data-v-1aea517a",null).exports,$e={data:function(){return{nickname:"",mail:"",psw1:"",psw2:"",choose:!1,correctNickname:!1,correctMail:!1,correctPsw1:!1,correctPsw2:!1}},components:{darkerSwitch:Te},computed:{},watch:{psw1:function(){var e=new RegExp("[a-z0-9A-Z._]{6,20}","g");this.correctPsw1=!e.test(this.psw1),""!=this.psw2&&(this.correctPsw2=!(this.psw1==this.psw2))},psw2:function(){this.correctPsw2=!(this.psw1==this.psw2)}},methods:{register:function(){var e=this;return r()(o.a.mark(function t(){var s,a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.correctNickname||e.correctMail||e.correctPsw1||e.correctPsw2||""==e.nickname||""==e.mail||""==e.psw1||""==e.psw2)){t.next=3;break}return e.$message({message:"请重新检查注册信息是否正确后再试！",type:"error"}),t.abrupt("return");case 3:return t.next=5,h.register({nick:e.nickname,email:e.mail,pwd:e.psw1});case 5:if(s=t.sent,console.log(s),0!=s.data.code){t.next=16;break}return e.$message({message:"注册成功，正在为您自动登陆...",type:"success"}),t.next=11,h.login({principal:e.nickname,password:e.psw1,remember_me:1});case 11:a=t.sent,i=a.data.data,0==a.data.code?(console.log("登陆成功，跳转页面中..."),localStorage.setItem("USER_ID",i.user.uid),localStorage.setItem("JWT_TOKEN",i.token),localStorage.setItem("loginUserName",i.user.nick),localStorage.setItem("ROLE",i.user.role),window.location.href="/"):e.$message({message:"自动登陆失败，请手动登陆重试！",type:"error"}),t.next=17;break;case 16:e.$message({message:"注册失败，"+s.data.msg+"！",type:"error"});case 17:case"end":return t.stop()}},t,e)}))()},checkNick:function(){var e=new RegExp("[a-z0-9A-Z\\u4e00-\\u9fa5_]{1,20}","g");this.correctNickname=!e.test(this.nickname)},checkMail:function(){var e=new RegExp("^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$","g");this.correctMail=!e.test(this.mail)},checkPsw:function(){var e=new RegExp("[a-z0-9A-Z._]{6,20}","g");this.correctPsw1=!e.test(this.psw1),""!=this.psw2&&(this.correctPsw2=!(this.psw1==this.psw2))},checkPsw2:function(){this.correctPsw2=!(this.psw1==this.psw2)}}},et={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"registerPage"},[a("div",{staticClass:"registerBox"},[a("form",{attrs:{action:"",method:"get"}},[a("img",{staticClass:"registerLogo",attrs:{src:s("ZBJ4")}}),e._v(" "),a("p",[e._v("加入 Darker")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.nickname,expression:"nickname"}],attrs:{type:"text",name:"nick",placeholder:"请输入一个昵称","data-correct":e.correctNickname},domProps:{value:e.nickname},on:{blur:e.checkNick,input:function(t){t.target.composing||(e.nickname=t.target.value)}}}),e._v(" "),e.correctNickname?a("p",{staticClass:"wrongTips"},[e._v("请输入正确的昵称")]):e._e(),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.mail,expression:"mail"}],attrs:{type:"text",name:"mail",placeholder:"请输入您的邮箱","data-correct":e.correctMail},domProps:{value:e.mail},on:{blur:e.checkMail,input:function(t){t.target.composing||(e.mail=t.target.value)}}}),e._v(" "),e.correctMail?a("p",{staticClass:"wrongTips"},[e._v("请输入正确的邮箱")]):e._e(),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.psw1,expression:"psw1"}],attrs:{type:"password",name:"psw1",min:"6",max:"20",placeholder:"请输入一个6-20位密码","data-correct":e.correctPsw1},domProps:{value:e.psw1},on:{blur:e.checkPsw,input:function(t){t.target.composing||(e.psw1=t.target.value)}}}),e._v(" "),e.correctPsw1?a("p",{staticClass:"wrongTips"},[e._v("密码不符合格式或为空")]):e._e(),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.psw2,expression:"psw2"}],attrs:{type:"password",name:"psw2",min:"6",max:"20",placeholder:"确认密码","data-correct":e.correctPsw2},domProps:{value:e.psw2},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.register(t):null},blur:e.checkPsw2,input:function(t){t.target.composing||(e.psw2=t.target.value)}}}),e._v(" "),e.correctPsw2?a("p",{staticClass:"wrongTips",on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.register(t):null}}},[e._v("两次输入密码不相同或为空，请重新输入")]):e._e(),e._v(" "),a("a",{attrs:{type:"submit"},on:{click:e.register}},[e._v("注册")]),e._v(" "),e._m(0)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pswToolBox"},[t("a",{staticClass:"pswToolBtn",attrs:{href:"#/login"}},[this._v("已有账号？马上登录")])])}]};var tt=s("VU/8")($e,et,!1,function(e){s("qq05")},"data-v-8ad8c7f2",null).exports,st={data:function(){return{step:1,finished:0,mail:"",ticket:"",psw1:"",psw2:"",correctPsw1:!1,correctPsw2:!1,mailCode:"",time:0,timer:null}},watch:{psw1:function(){var e=new RegExp("[a-z0-9A-Z._]{6,20}","g");this.correctPsw1=!e.test(this.psw1),""!=this.psw2&&(this.correctPsw2=!(this.psw1==this.psw2))},psw2:function(){this.correctPsw2=!(this.psw1==this.psw2)}},methods:{selectStep:function(e){3!=this.step&&this.finished+1>=e&&(this.step=e)},getEmailCode:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getMailCode({ticket:e.ticket});case 2:s=t.sent.data,console.log("发送验证码",s),0===s.code?(e.$message({message:s.msg,type:"success"}),clearInterval(e.timer),e.timer=null,e.time=60,e.timer=setInterval(function(){e.time--,0==e.time&&(clearInterval(e.timer),e.timer=null)},1e3)):e.$message({message:s.msg,type:"error"});case 5:case"end":return t.stop()}},t,e)}))()},finishStep:function(e){var t=this;return r()(o.a.mark(function s(){var a,i;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(1!=e){s.next=12;break}if(""!=t.mail){s.next=5;break}t.$message({message:"邮箱不可为空",type:"error"}),s.next=10;break;case 5:return s.next=7,h.checkEmail({email:t.mail});case 7:a=s.sent.data,console.log(a),0===a.code?(t.finished=1,t.step=2,t.mail=a.data.value,t.ticket=a.data.ticket,console.log("邮箱检测成功",t.ticket)):t.$message({message:a.msg,type:"error"});case 10:s.next=24;break;case 12:if(2!=e){s.next=24;break}if(!t.correctPsw1&&!t.correctPsw2){s.next=16;break}return t.$message({message:"请输入正确的新密码",type:"error"}),s.abrupt("return");case 16:if(!(""==t.mailCode||t.mailCode.length<6)){s.next=19;break}return t.$message({message:"请输入正确的验证码",type:"error"}),s.abrupt("return");case 19:return s.next=21,h.resetPassword({ticket:t.ticket,pwd:t.psw2,rcode:t.mailCode});case 21:i=s.sent.data,console.log("提交密码",i),0===i.code?(t.step=3,t.finished=2,t.time=5,clearInterval(t.timer),t.timer=null,console.log("outside",t.timer),t.timer=setInterval(function(){t.time--,console.log("inside",t.timer),0==t.time&&(clearInterval(t.timer),t.timer=null,t.$router.push({name:"login"}))},1e3)):5005===i.code?(t.$message({message:i.msg,type:"error"}),t.step=1,t.finished=0,t.ticket="",t.mail="",t.psw1="",t.psw2="",t.correctPsw1=!1,t.correctPsw2=!1,t.mailCode="",t.time=0,clearInterval(t.timer),t.timer=null):t.$message({message:i.msg,type:"error"});case 24:case"end":return s.stop()}},s,t)}))()},backToMain:function(){clearInterval(this.timer),this.timer=null,this.$router.push({name:"index"})},backToLogin:function(){this.$router.push({name:"login"})}}},at={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"forgetBox"},[s("div",{staticClass:"nowPath"},[s("p",{staticClass:"nowPathItem1",on:{click:e.backToLogin}},[e._v("登陆")]),e._v(" "),s("p",{staticClass:"nowPathTo"},[e._v("〉")]),e._v(" "),s("p",{staticClass:"nowPathItem2"},[e._v("忘记密码")])]),e._v(" "),s("div",{staticClass:"forgetPath"},[s("div",{class:["pathItem",1==e.step?"selectedPathItem":"finishedPathItem"],on:{click:function(t){e.selectStep(1)}}},[s("div",{class:["pathItemNum",1==e.step?"selectedPathItemNum":"finishedPathItemNum"]},[e._v("1")]),e._v(" "),s("div",{staticClass:"pathItemTitle"},[e._v("确认账号")])]),e._v(" "),s("div",{staticClass:"pathLine"},[e._v("————")]),e._v(" "),s("div",{class:["pathItem",2==e.step?"selectedPathItem":e.finished<2?"":"finishedPathItem"],on:{click:function(t){e.selectStep(2)}}},[s("div",{class:["pathItemNum",2==e.step?"selectedPathItemNum":e.finished<2?"":"finishedPathItemNum"]},[e._v("2")]),e._v(" "),s("div",{staticClass:"pathItemTitle"},[e._v("重置密码")])]),e._v(" "),s("div",{staticClass:"pathLine"},[e._v("————")]),e._v(" "),s("div",{class:["pathItem",3==e.step?"selectedPathItem":""]},[s("div",{class:["pathItemNum",3==e.step?"selectedPathItemNum":""]},[e._v("3")]),e._v(" "),s("div",{staticClass:"pathItemTitle"},[e._v("重置成功")])])]),e._v(" "),1==e.step?s("div",{staticClass:"forgetStep1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.mail,expression:"mail"}],attrs:{placeholder:"请输入绑定的邮箱"},domProps:{value:e.mail},on:{input:function(t){t.target.composing||(e.mail=t.target.value)}}}),e._v(" "),s("p",{on:{click:function(t){e.finishStep(1)}}},[e._v("确认")])]):e._e(),e._v(" "),2==e.step?s("div",{staticClass:"forgetStep2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.psw1,expression:"psw1"}],style:e.correctPsw1?"border: 1px solid red":"",attrs:{placeholder:"新密码：6-20位字符",type:"password"},domProps:{value:e.psw1},on:{input:function(t){t.target.composing||(e.psw1=t.target.value)}}}),e._v(" "),s("p",{staticClass:"errorTip"},[e._v(e._s(e.correctPsw1?"密码不符合格式或为空":""))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.psw2,expression:"psw2"}],style:e.correctPsw2?"border: 1px solid red":"",attrs:{placeholder:"请输入确认密码",type:"password"},domProps:{value:e.psw2},on:{input:function(t){t.target.composing||(e.psw2=t.target.value)}}}),e._v(" "),s("p",{staticClass:"errorTip"},[e._v(e._s(e.correctPsw2?"两次密码不相同":""))]),e._v(" "),s("div",{staticClass:"changeMailBox"},[s("p",{staticClass:"mailShow"},[e._v("邮箱："+e._s(e.mail))]),e._v(" "),s("p",{staticClass:"changeMailBtn",on:{click:function(t){e.selectStep(1)}}},[e._v("修改")])]),e._v(" "),s("div",{staticClass:"mailCodeBox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.mailCode,expression:"mailCode"}],attrs:{placeholder:"请输入邮件验证码",maxlength:"6"},domProps:{value:e.mailCode},on:{input:function(t){t.target.composing||(e.mailCode=t.target.value)}}}),e._v(" "),0==e.time?s("p",{staticClass:"getCodeBtn",on:{click:e.getEmailCode}},[e._v("获取验证码")]):e._e(),e._v(" "),e.time>0?s("p",{staticClass:"getCodeGreyBtn"},[e._v("重新发送("+e._s(e.time)+"s)")]):e._e()]),e._v(" "),s("p",{staticClass:"confirmReset",on:{click:function(t){e.finishStep(2)}}},[e._v("确认修改")])]):e._e(),e._v(" "),3==e.step?s("div",{staticClass:"forgetStep3"},[s("p",{staticClass:"successTip"},[e._v("重置密码成功")]),e._v(" "),s("p",{staticClass:"timeoutJmp"},[e._v(e._s(e.time)+"s后将跳转至登陆页面")]),e._v(" "),s("p",{staticClass:"backToMain",on:{click:e.backToMain}},[e._v("回到首页")])]):e._e()])},staticRenderFns:[]};var it=s("VU/8")(st,at,!1,function(e){s("0I4V")},"data-v-136291ac",null).exports,ot={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"leftMenuBox"},[s("div",{staticClass:"menuTitle"},[e._v(e._s(e.menuTitle))]),e._v(" "),e._l(e.btnTitle,function(t,a){return s("div",{key:a},[s("p",{staticStyle:{"font-size":"13px"},style:e.index==a?"background: rgba(255, 254, 254, 0.651)":"",on:{click:function(t){e.index=a}}},[e._v(e._s(t))])])})],2)},staticRenderFns:[]};var nt=s("VU/8")({props:["menuTitle","btnTitle","pageIndex"],data:function(){return{index:this.pageIndex,key:"leftMenu"}},watch:{index:function(e){this.$emit("update:pageIndex",e)}}},ot,!1,function(e){s("QCLj")},"data-v-ff4f5e7a",null).exports,rt={components:{myUpload:J},data:function(){return{avatar:localStorage.getItem("face")==h.baseURL+"/"||null==localStorage.getItem("face")?"../../../static/img/noAvatar.jpg":localStorage.getItem("face"),userInfo:{nick:"loading",sex:"不明",age:"loading",sign:"loading"},imgDataUrl:"",curImageUrl:"",avatarSettingShow:!1,loading:!0}},methods:{initUserInfo:function(){var e=this;return r()(o.a.mark(function t(){var s,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(s=localStorage.getItem("USER_ID"))){t.next=9;break}return t.next=4,h.getUserInfoByUid(s);case 4:a=t.sent.data,console.log("用户信息",a),0===a.code?e.userInfo=a.data:console.log("获取用户信息失败"),t.next=10;break;case 9:console.log("uid为空");case 10:e.loading=!1;case 11:case"end":return t.stop()}},t,e)}))()},updateUserInfo:function(){var e=this;return r()(o.a.mark(function t(){var s,a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt("return");case 2:if(s=localStorage.getItem("USER_ID"),""===(a={sex:e.userInfo.sex,age:e.userInfo.age,sign:e.userInfo.sign}).sex||""===a.age){t.next=10;break}return t.next=7,h.updateUserInfo(s,a);case 7:i=t.sent.data,console.log("提交结果:",i),0===i.code?(e.userInfo.age=i.data.age,e.userInfo.sex=i.data.sex,e.userInfo.sign=i.data.sign,e.$message.success("修改成功")):(e.loading=!0,e.initUserInfo(),e.$message({message:i.msg,type:"error"}));case 10:case"end":return t.stop()}},t,e)}))()},cropSuccess:function(e,t){console.log("-------- crop success --------")},cropUploadSuccess:function(e,t){console.log("-------- upload success --------"),console.log(e);var s=e.data.link;s=s.substring(s.lastIndexOf("/")),console.log("link:",s);var a=s;this.imgDataUrl=this.GLOBAL.imgURL+a,this.curImageUrl=this.GLOBAL.imgURL+a,console.log("field: "+t),this.updateUserAvatar()},cropUploadFail:function(e,t){console.log("-------- upload fail --------"),console.log(e),console.log("field: "+t)},updateUserAvatar:function(){var e=this;return r()(o.a.mark(function t(){var s,a,i,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=localStorage.getItem("USER_ID"),console.log("uid:",s),a={face:e.curImageUrl},t.next=5,h.updateUserInfo(s,a);case 5:i=t.sent,n=i.data,console.log(n),0===n.code?(console.log("修改成功"),localStorage.setItem("face",e.curImageUrl),setTimeout(function(){e.$router.go(0)},800)):console.log(n.msg);case 9:case"end":return t.stop()}},t,e)}))()}},mounted:function(){this.initUserInfo()}},ct={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"personalInfoBox"},[e.loading?s("div",{staticClass:"wattingBox"},[s("img",{attrs:{src:"data:image/gif;base64,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"}}),e._v(" "),s("p",[e._v("加载数据中...")])]):e._e(),e._v(" "),s("div",{staticClass:"avatarBox"},[s("p",[e._v("当前头像")]),e._v(" "),s("img",{attrs:{src:""!=e.avatar?e.avatar:"../../../static/img/noAvatar.jpg"},on:{click:function(t){e.avatarSettingShow=!0}}}),e._v(" "),s("my-upload",{attrs:{field:"image",width:300,height:300,noSquare:!0,url:e.GLOBAL.uploadURL,headers:e.GLOBAL.uploadHEADERS,"img-format":"jpg"},on:{"crop-success":e.cropSuccess,"crop-upload-success":e.cropUploadSuccess,"crop-upload-fail":e.cropUploadFail},model:{value:e.avatarSettingShow,callback:function(t){e.avatarSettingShow=t},expression:"avatarSettingShow"}})],1),e._v(" "),s("form",{staticClass:"infoForm"},[s("div",[s("p",[e._v("昵称：")]),s("input",{attrs:{disabled:"true"},domProps:{value:e.userInfo.nick}})]),e._v(" "),s("div",[s("p",[e._v("性别：")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.sex,expression:"userInfo.sex"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.userInfo,"sex",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"不明"}},[e._v("不明")]),e._v(" "),s("option",{attrs:{value:"男"}},[e._v("男")]),e._v(" "),s("option",{attrs:{value:"女"}},[e._v("女")])])]),e._v(" "),s("div",[s("p",[e._v("年龄：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.age,expression:"userInfo.age"}],domProps:{value:e.userInfo.age},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"age",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"sign"},[s("p",[e._v("我的签名：")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.sign,expression:"userInfo.sign"}],domProps:{value:e.userInfo.sign},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"sign",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"submitUserInfoBtn",on:{click:e.updateUserInfo}},[s("p",[e._v("提交")])])])},staticRenderFns:[]};var lt=s("VU/8")(rt,ct,!1,function(e){s("OkLb")},null,null).exports,ut=s("bOdI"),dt=s.n(ut),pt={data:function(){var e;return e={loading:!0,finishStyle:{background:"red"},flag:"×",finishMail:!0,mail:"",safeMode:0,oldPsw:"",newPsw:"",renewPsw:""},dt()(e,"mail",""),dt()(e,"newMail",""),dt()(e,"mailVerified",!1),dt()(e,"mailVerifiedText","(未验证)"),dt()(e,"mailBtnText","验证邮箱"),dt()(e,"mailCodeText","等待提交"),dt()(e,"mailCodeStyle",{color:"wheat"}),dt()(e,"mailCode",""),dt()(e,"oldPswCorrect",!1),dt()(e,"newPswCorrect",!1),dt()(e,"renewPswCorrect",!1),dt()(e,"mailCorrect",!1),dt()(e,"mailCodeCorrect",!1),dt()(e,"sentMailCode",!1),dt()(e,"codeTimer",60),dt()(e,"codeInterval",null),e},watch:{oldPsw:function(){this.oldPswCorrect=""==this.oldPsw},newPsw:function(){var e=new RegExp("[a-z0-9A-Z._]{6,20}","g");this.newPswCorrect=!e.test(this.newPsw),""!=this.renewPsw&&(this.renewPswCorrect=!(this.newPsw==this.renewPsw))},renewPsw:function(){this.renewPswCorrect=!(this.newPsw==this.renewPsw)},newMail:function(){var e=new RegExp("^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$","g");this.mailCorrect=!e.test(this.mail)},mailCode:function(){this.mailCodeCorrect=""==this.mailCode}},methods:{initUserInfo:function(){var e=this;return r()(o.a.mark(function t(){var s,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(s=localStorage.getItem("USER_ID"))){t.next=9;break}return t.next=4,h.getUserInfoByUid(s);case 4:a=t.sent.data,console.log("用户信息",a),0===a.code?(e.flag="!",e.finishStyle={background:"rgb(153, 108, 25)"},e.mailCodeText="等待提交",e.mailCodeStyle={color:"wheat"},1==a.data.emailVerified?(e.mailVerified||null==e.codeInterval||(clearInterval(e.codeInterval),e.codeInterval=null,e.codeTimer=60),e.mailVerified=!0,e.flag="v",e.finishStyle={background:"green"},e.mailVerifiedText="(已验证)",e.mailBtnText="更换邮箱"):(e.mailBtnText="验证邮箱",e.mailVerified=!1,e.flag="!",e.finishStyle={background:"rgb(153, 108, 25)"},e.mailVerifiedText="(未验证)"),e.mail=a.data.email):console.log("获取用户信息失败"),t.next=10;break;case 9:console.log("uid为空");case 10:e.safeMode=0,e.loading=!1;case 12:case"end":return t.stop()}},t,e)}))()},updatePwd:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.updateUserPwd(localStorage.getItem("USER_ID"),{opwd:e.oldPsw,cpwd:e.renewPsw});case 2:s=t.sent.data,console.log(s),0===s.code?(e.$message.success("密码修改成功!"),e.showPwdBox=!1,e.safeMode=0):(e.oldPswCorrect=!0,e.$message.error(s.msg));case 5:case"end":return t.stop()}},t,e)}))()},showSetting:function(e){2!=e||this.mailVerified?this.safeMode=this.safeMode==e?0:e:this.verifyEmail()},forceChangeMail:function(e){this.safeMode=this.safeMode==e?0:e},verifyEmail:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.initUserInfo(),!e.mailVerified){t.next=4;break}return console.log("防重复发送"),t.abrupt("return");case 4:return t.next=6,h.reVerifyEmail();case 6:0===(s=t.sent.data).code?(console.log("验证码发送结果",s),e.$message.success("验证邮箱发送成功，请在20分钟内确认"),e.mailBtnText="重新发送("+e.codeTimer.toString()+"s)",clearInterval(e.codeInterval),e.codeInterval=null,e.codeInterval=setInterval(function(){e.codeTimer%10==0&&(e.loading=!0,e.initUserInfo()),0==e.codeTimer&&(e.codeTimer=60,e.mailBtnText="验证邮箱",clearInterval(e.codeInterval),e.codeInterval=null),e.codeTimer--,e.mailBtnText="重新发送("+e.codeTimer.toString()+"s)"},1e3)):e.$message.error(s.msg);case 8:case"end":return t.stop()}},t,e)}))()},sendMailCode:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.mail!=e.newMail&&""!=e.newMail){t.next=3;break}return e.$message({message:"不可重设为旧邮箱或为空",type:"error"}),t.abrupt("return");case 3:return e.sentMailCode=!0,t.next=6,h.getEmailResetCode();case 6:s=t.sent,console.log("发送验证码",s),clearInterval(e.codeInterval),e.codeInterval=null,e.codeInterval=setInterval(function(){0==e.codeTimer&&(e.codeTimer=60,e.sentMailCode=!1,clearInterval(e.codeInterval),e.codeInterval=null),e.codeTimer--},1e3),0===s.data.code?e.$message({message:"发送验证码成功",type:"success"}):e.$message({message:s.data.msg,type:"error"});case 12:case"end":return t.stop()}},t,e)}))()},updateMail:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.mail!=e.newMail&&""!=e.newMail){t.next=3;break}return e.$message({message:"不可重设为旧邮箱或为空",type:"error"}),t.abrupt("return");case 3:return e.mailCodeText="验证中...",t.next=6,h.modifyEmail(localStorage.getItem("USER_ID"),{email:e.newMail,rcode:e.mailCode});case 6:s=t.sent.data,console.log("更换邮箱",s),0===s.code?(e.mailCodeStyle={color:"green"},e.mailCodeText="验证成功",setTimeout(e.initUserInfo(),2e3),e.$message({message:s.msg,type:"success"})):(e.mailCodeStyle={color:"red"},e.mailCodeText=s.msg);case 9:case"end":return t.stop()}},t,e)}))()}},mounted:function(){this.initUserInfo()}},mt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"safeBox"},[e.loading?s("div",{staticClass:"wattingBox"},[s("img",{attrs:{src:"data:image/gif;base64,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"}}),e._v(" "),s("p",[e._v("加载数据中...")])]):e._e(),e._v(" "),s("div",{staticClass:"safeInBox"},[e._m(0),e._v(" "),s("p",[e._v("已设置")]),e._v(" "),s("p",{staticClass:"safeBtn",staticStyle:{cursor:"pointer"},on:{click:function(t){e.showSetting(1)}}},[e._v("修改密码")])]),e._v(" "),s("div",{staticClass:"safeInBox"},[s("div",[s("p",{staticClass:"finishLogo",style:e.finishStyle},[e._v(e._s(e.flag))]),e._v(" "),s("p",[e._v("绑定邮箱")])]),e._v(" "),""!=e.mail?s("p",{staticStyle:{cursor:"pointer"}},[e._v(e._s(e.mail)+e._s(e.mailVerifiedText))]):s("p",{staticStyle:{cursor:"pointer"}},[e._v("未绑定")]),e._v(" "),s("p",{staticClass:"safeBtn",staticStyle:{cursor:"pointer"},on:{click:function(t){e.showSetting(2)}}},[e._v(e._s(e.mailBtnText))]),e._v(" "),null==e.codeInterval?s("p",{staticClass:"safeBtn",staticStyle:{"padding-right":"0px","text-align":"center",width:"10px"}},[e._v("/")]):e._e(),e._v(" "),null==e.codeInterval?s("p",{staticClass:"safeBtn",staticStyle:{cursor:"pointer"},on:{click:function(t){e.forceChangeMail(2)}}},[e._v("更换邮箱")]):e._e()]),e._v(" "),1==e.safeMode?s("div",{staticClass:"setBox1"},[s("p",{staticClass:"safeTitle"},[e._v("修改密码")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPsw,expression:"oldPsw"}],attrs:{placeholder:"请输入原密码",type:"password","data-correct":e.oldPswCorrect},domProps:{value:e.oldPsw},on:{input:function(t){t.target.composing||(e.oldPsw=t.target.value)}}}),e._v(" "),e.oldPswCorrect?s("p",{staticClass:"wrongTip"},[e._v("原密码错误或为空")]):e._e(),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newPsw,expression:"newPsw"}],attrs:{placeholder:"请输入新密码",type:"password","data-correct":e.newPswCorrect},domProps:{value:e.newPsw},on:{input:function(t){t.target.composing||(e.newPsw=t.target.value)}}}),e._v(" "),e.newPswCorrect?s("p",{staticClass:"wrongTip"},[e._v("新密码不符合要求或为空")]):e._e(),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.renewPsw,expression:"renewPsw"}],attrs:{placeholder:"请确认新密码",type:"password","data-correct":e.renewPswCorrect},domProps:{value:e.renewPsw},on:{input:function(t){t.target.composing||(e.renewPsw=t.target.value)}}}),e._v(" "),e.renewPswCorrect?s("p",{staticClass:"wrongTip"},[e._v("两次密码输入不相同或为空")]):e._e(),e._v(" "),s("p",{staticClass:"safeSubmit",on:{click:e.updatePwd}},[e._v("提交")])]):e._e(),e._v(" "),2==e.safeMode?s("div",{staticClass:"setBox"},[s("p",{staticClass:"safeTitle"},[e._v("更换邮箱")]),e._v(" "),s("div",{staticClass:"newMailBox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newMail,expression:"newMail"}],attrs:{"data-correct":e.mailCorrect,placeholder:"请输入新邮箱"},domProps:{value:e.newMail},on:{input:function(t){t.target.composing||(e.newMail=t.target.value)}}}),e._v(" "),e.sentMailCode?e._e():s("p",{staticClass:"safeSubmit",on:{click:e.sendMailCode}},[e._v("发送验证码")]),e._v(" "),e.sentMailCode?s("p",{staticClass:"safeSubmitTime"},[e._v("重新发送("+e._s(e.codeTimer)+"s)")]):e._e()]),e._v(" "),e.mailCorrect?s("p",{staticClass:"mailWrongTip"},[e._v("邮箱格式错误或已被注册")]):e._e(),e._v(" "),s("div",{staticClass:"mailCodeSubmit"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.mailCode,expression:"mailCode"}],attrs:{"data-correct":e.mailCodeCorrect,placeholder:"请输入验证码"},domProps:{value:e.mailCode},on:{input:function(t){t.target.composing||(e.mailCode=t.target.value)}}}),e._v(" "),s("p",{staticClass:"nothingCodeTip",style:e.mailCodeStyle},[e._v(e._s(e.mailCodeText))])]),e._v(" "),s("p",{staticClass:"safeSubmit mailSubmit",on:{click:e.updateMail}},[e._v("确定")])]):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("p",{staticClass:"finishLogo",staticStyle:{background:"green"}},[this._v("v")]),this._v(" "),t("p",[this._v("设置密码")])])}]};var gt=s("VU/8")(pt,mt,!1,function(e){s("wOT3")},"data-v-6cb642fc",null).exports,vt={props:["scrollHight","scrollWidth","itemHeight","itemSpacing","itemCount"],data:function(){return{marginTop:{"margin-top":"0px"},scrollBoxSize:{height:this.scrollHight+"px !important",width:this.scrollWidth+"px"},mtop:0,max:0,min:(this.itemSpacing+this.itemHeight)*Math.floor(this.itemCount-this.scrollHight/(this.itemHeight+this.itemSpacing))+this.scrollHight%(this.itemSpacing+this.itemHeight)/4}},watch:{itemCount:function(e,t){console.log(e,t),e<t&&(this.marginTop={"margin-top":"0px"},this.scrollBoxSize={height:this.scrollHight+"px",width:this.scrollWidth+"px"},this.mtop=0,this.max=0),this.min=(this.itemSpacing+this.itemHeight)*Math.floor(this.itemCount-this.scrollHight/(this.itemHeight+this.itemSpacing))+this.scrollHight%(this.itemSpacing+this.itemHeight)/4,console.log(this.min)}},methods:{scroll:function(e){if(console.log(this.scrollHight,this.min),!(this.min<=0)){var t=this.max+e.deltaY/1.5;t<0?(this.max=0,this.mtop=0):t>=this.min?(this.max=this.min,this.mtop=-this.min,this.$emit("nextPage"),console.log("到底啦！")):(this.max=t,this.mtop-=e.deltaY/1.5),this.marginTop={"margin-top":this.mtop+"px"}}}}},ht={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scrollBox"},[s("div",{staticClass:"scrollOutBox",style:e.scrollBoxSize,on:{mousewheel:function(t){e.scroll(t)}}},[s("div",{staticClass:"scrollInBox",style:e.marginTop},[e._t("default")],2)])])},staticRenderFns:[]};var At=s("VU/8")(vt,ht,!1,function(e){s("uCee")},"data-v-95f58d3e",null).exports,ft={components:{darkerScroll:At,submitMovie:Z,myUpload:J},data:function(){return{loading:!1,mvToolShow:[!1,!1,!1,!1,!1,!1,!1],showToolIndex:-1,showSubmitMvBox:!1,postBangumiList:[],pageSize:0,pageNum:1,totalSize:0,stateStyle:{PENDING:{background:"#a77427"},SUCCESS:{background:"#367b13"},NEED_PERFECT:{background:"#3580ce"},FAILED:{background:"#9e0c0c"},AUDITING:{background:"#f56c6c"}},pbParams:{pn:1,ps:10,sc:"",pbsc:"",pc:"",dc:"",bn:""},searchMvKey:"",pb:null,updateBangumiCoverShow:!1,uploadURL:"https://api.imgur.com/3/image",imgURL:"https://i.imgur.com",uploadHEADERS:{Authorization:"Client-ID 3855bbe9883a511"},langExtObj:{preview:"封面预览"}}},watch:{searchMvKey:function(){var e=this;return r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.loading=!0,console.log("查找",e.searchMvKey),e.pbParams={pn:1,ps:10,sc:"",pbsc:"",pc:"",dc:"",bn:e.searchMvKey},e.initMvList();case 4:case"end":return t.stop()}},t,e)}))()}},methods:{initMvList:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getUserPostBangumi(e.pbParams);case 2:s=t.sent.data,console.log("初始化番剧列表",s),0===s.code?(e.pageNum=1,e.postBangumiList=s.data.postBangumi,e.totalSize=s.data.page.totalSize,s.data.page.totalSize<=10?e.pageSize=e.totalSize:e.pageSize=10):console.log("请求列表失败"),e.loading=!1,e.pb=null;case 7:case"end":return t.stop()}},t,e)}))()},nextPage:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Math.ceil(e.totalSize/10)!=e.pageNum){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,e.pbParams.pn++,e.pageNum++,t.next=7,h.getUserPostBangumi(e.pbParams);case 7:s=t.sent.data,console.log("下一页",s),0===s.code?(e.postBangumiList=e.postBangumiList.concat(s.data.postBangumi),e.pageSize+=s.data.postBangumi.length):console.log("请求下一页失败"),e.loading=!1;case 11:case"end":return t.stop()}},t,e)}))()},updateListByStatus:function(e){this.loading=!0,console.log("状态排序",e.target.selectedIndex);var t=e.target.selectedIndex;0==t&&(t=""),this.pbParams={pn:1,ps:10,sc:"",pbsc:t,pc:"",dc:"",bn:""},this.initMvList()},updateListByTime:function(e){this.loading=!0,console.log("时间排序",e.target.selectedIndex),this.pbParams={pn:1,ps:10,sc:"",pbsc:"",pc:e.target.selectedIndex,dc:"",bn:""},this.initMvList()},reloadMvList:function(){this.loading=!0,this.pbParams={pn:1,ps:10,sc:"",pbsc:"",pc:"",dc:"",bn:""},this.initMvList()},toolDisplay:function(e,t){this.mvToolShow[e]=0==t,this.mvToolShow[e]?this.showToolIndex=e:this.showToolIndex=-1},updateBangumiCover:function(e,t){console.log(t),this.pb={id:e,index:t},this.updateBangumiCoverShow=!0,console.log(this.pb)},cropUploadSuccess:function(e,t){var s=this;return r()(o.a.mark(function a(){var i,n,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("-------- upload success --------"),console.log(e),i=(i=e.data.link).substring(i.lastIndexOf("/")),console.log("link:",i),n=s.imgURL+i,console.log("field: "+t),a.next=9,h.updatePostBangumiThumb({id:s.pb.id,thumb:n});case 9:0===(r=a.sent.data).code?(setTimeout(function(){return s.show=!1},100),s.$alert("修改封面需要审核，结果请留意系统通知","封面提交成功",{confirmButtonText:"确定",callback:function(e){}})):s.$message.error(r.msg),s.postBangumiList[s.pb.index].thumb=n,s.pb=null,console.log(s.pb);case 14:case"end":return a.stop()}},a,s)}))()},cropSuccess:function(e,t){console.log("-------- crop success --------")},cropUploadFail:function(e,t){console.log("-------- upload fail --------"),console.log(e),console.log("field: "+t)},submitMv:function(){this.showSubmitMvBox=!this.showSubmitMvBox},closeSubmitMvBox:function(){this.showSubmitMvBox=!1,this.pb=null},updatePostBangumi:function(e){var t=this;return r()(o.a.mark(function s(){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t.pb={id:e.id,bn:e.bn,et:e.et,hzi:e.hzi,thumb:e.thumb},t.showSubmitMvBox=!0;case 2:case"end":return s.stop()}},s,t)}))()},deletePostBangumi:function(e){var t=this;return r()(o.a.mark(function s(){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t.$confirm("注意! 一旦删除将无法恢复, 本操作仅会删除个人记录, 已采纳的番剧信息将会保留","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(r()(o.a.mark(function s(){var a;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.deletePostBangumi(e);case 2:a=s.sent.data,console.log("res:",a),0===a.code?(t.isDelete=!0,t.$message.success("删除成功"),t.reloadMvList()):t.$message.error(a.msg);case 5:case"end":return s.stop()}},s,t)}))).catch(function(){});case 1:case"end":return s.stop()}},s,t)}))()}},mounted:function(){this.loading=!0,this.initMvList()}},It={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"movieBox"},[e.loading?s("div",{staticClass:"wattingBox"},[s("img",{attrs:{src:"data:image/gif;base64,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"}}),e._v(" "),s("p",[e._v("加载数据中...")])]):e._e(),e._v(" "),s("div",{staticClass:"subBox"},[s("p",{staticClass:"subTitle"},[e._v("全部提交")]),e._v(" "),s("p",{staticClass:"subNum"},[e._v("("+e._s(e.totalSize)+")")]),e._v(" "),s("div",{staticClass:"subSelectBox"},[s("select",{staticClass:"subSelect",on:{change:function(t){e.updateListByStatus(t)}}},[s("option",{attrs:{value:"0"}},[e._v("全部")]),e._v(" "),s("option",{attrs:{value:"1"}},[e._v("待处理")]),e._v(" "),s("option",{attrs:{value:"2"}},[e._v("已采纳")]),e._v(" "),s("option",{attrs:{value:"3"}},[e._v("待完善")]),e._v(" "),s("option",{attrs:{value:"4"}},[e._v("未被采纳")]),e._v(" "),s("option",{attrs:{value:"5"}},[e._v("待审核")])])])]),e._v(" "),s("div",{staticClass:"sortBox"},[s("p",{staticClass:"sortTitle",on:{click:e.submitMv}},[e._v("提交番剧信息")]),e._v(" "),s("transition",{attrs:{name:"submitMvBoxTran"}},[e.showSubmitMvBox?s("div",{staticClass:"submitMovieBox"},[s("submit-movie",{staticClass:"submitMovieInBox",attrs:{show:e.showSubmitMvBox,pb:e.pb},on:{closeBox:e.closeSubmitMvBox,updateMvList:e.reloadMvList}})],1):e._e()]),e._v(" "),s("div",{staticClass:"sortSelectBox"},[s("select",{staticClass:"sortSelect",on:{change:function(t){e.updateListByTime(t)}}},[s("option",{attrs:{value:"0"}},[e._v("创建时间")]),e._v(" "),s("option",{attrs:{value:"1"}},[e._v("修改时间")])]),e._v(" "),s("div",{staticClass:"searchMvBox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchMvKey,expression:"searchMvKey"}],staticClass:"searchMv",attrs:{placeholder:"请输入番剧名称"},domProps:{value:e.searchMvKey},on:{input:function(t){t.target.composing||(e.searchMvKey=t.target.value)}}})])])],1),e._v(" "),s("div",{staticClass:"mvList"},[s("darker-scroll",{staticClass:"scroll",attrs:{"item-count":e.pageSize,"item-height":120,"item-spacing":15,"scroll-hight":630,"scroll-width":850},on:{nextPage:e.nextPage}},e._l(e.postBangumiList,function(t,a){return s("div",{key:t.id,staticClass:"movieItem"},[s("img",{staticClass:"mvImg",attrs:{src:t.thumb?t.thumb:"../../../static/img/1.jpg"}}),e._v(" "),s("div",{staticClass:"mvInfoBox"},[s("p",{staticClass:"mvTitle"},[e._v(e._s(t.bn)+" | 共"+e._s(t.et)+"集")]),e._v(" "),""!=t.msg?s("p",{staticClass:"mvMsg"},[e._v("修改提示: "+e._s(t.msg))]):e._e(),e._v(" "),s("p",{staticClass:"mvTime"},[e._v("创建时间: "+e._s(new Date(t.create_time).toLocaleString()))]),e._v(" "),s("p",{staticClass:"mvTime2"},[e._v("修改时间: "+e._s(new Date(t.modify_time).toLocaleString()))])]),e._v(" "),s("div",{staticClass:"mvOtherBox"},[s("div",{staticClass:"mvStateBox"},[s("p",{staticClass:"mvStateTitle"},[e._v("状态")]),e._v(" "),s("p",{staticClass:"mvState",style:e.stateStyle[t.pbs]},[e._v(e._s(t.pbs_name))])]),e._v(" "),s("div",{staticClass:"mvToolBox"},[s("el-dropdown",[s("span",{staticClass:"el-dropdown-link"},[s("span",{staticStyle:{color:"#e4e4e6"}},[e._v("操作")]),e._v(" "),s("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{color:"#8bc34a"}})]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[s("div",{staticClass:"action-btn-group"},["SUCCESS"===t.pbs||"AUDITING"===t.pbs?s("el-button",{staticClass:"show",attrs:{size:"mini"}},[e._v("设置为可见\n                            ")]):e._e()],1)]),e._v(" "),s("el-dropdown-item",[s("div",{staticClass:"action-btn-group"},["SUCCESS"===t.pbs||"AUDITING"===t.pbs?s("el-button",{staticClass:"thumb",attrs:{size:"mini"},on:{click:function(s){e.updateBangumiCover(t.id,a)}}},[e._v("设置封面\n                            ")]):e._e()],1)]),e._v(" "),s("el-dropdown-item",[s("div",{staticClass:"action-btn-group"},["SUCCESS"!==t.pbs&&"AUDITING"!==t.pbs?s("el-button",{staticClass:"edit",attrs:{size:"mini"},on:{click:function(s){e.updatePostBangumi(t)}}},[e._v("修改\n                            ")]):e._e()],1)]),e._v(" "),s("el-dropdown-item",[s("div",{staticClass:"action-btn-group"},[s("el-button",{staticClass:"delete",attrs:{size:"mini"},on:{click:function(s){e.deletePostBangumi(t.id)}}},[e._v("删除\n                            ")])],1)])],1)],1)],1)])])}))],1),e._v(" "),s("my-upload",{attrs:{field:"image",width:620,height:350,noCircle:!0,url:e.uploadURL,headers:e.uploadHEADERS,langExt:e.langExtObj,"img-format":"jpg"},on:{"crop-success":e.cropSuccess,"crop-upload-success":e.cropUploadSuccess,"crop-upload-fail":e.cropUploadFail},model:{value:e.updateBangumiCoverShow,callback:function(t){e.updateBangumiCoverShow=t},expression:"updateBangumiCoverShow"}})],1)},staticRenderFns:[]};var wt={components:{leftMenu:nt,info:lt,safe:gt,movie:s("VU/8")(ft,It,!1,function(e){s("63xc"),s("CI7M")},"data-v-6b360532",null).exports},data:function(){return{menuTitle:"个人信息",test:{0:"个人资料",1:"账号安全",2:"我的番剧"},pageIndex:0}},watch:{pageIndex:function(e){}}},Ct={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"personalBox"},[s("div",{staticClass:"personalInBox"},[s("left-menu",{staticClass:"leftMenu",attrs:{"menu-title":e.menuTitle,"btn-title":e.test,"page-index":e.pageIndex},on:{"update:pageIndex":function(t){e.pageIndex=t}}}),e._v(" "),s("div",{staticClass:"infoBox"},[0==e.pageIndex?s("info"):e._e(),e._v(" "),1==e.pageIndex?s("safe"):e._e(),e._v(" "),2==e.pageIndex?s("movie"):e._e()],1)],1)])},staticRenderFns:[]};var xt=s("VU/8")(wt,Ct,!1,function(e){s("yVSQ")},"data-v-a1c4fc84",null).exports,yt={components:{darkerScroll:At},data:function(){return{loading:!1,itemIndex:-1,atNoticeList:[],pageSize:0,pageNum:1,totalSize:0,pbParams:{type:5,pn:1,ps:20}}},methods:{initReplyMessage:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getMessageList({type:5});case 2:s=t.sent.data,console.log("艾特信息列表",s),0===s.code?(e.atNoticeList=s.data.messages,e.totalSize=s.data.page.totalSize,s.data.page.totalSize<=20?e.pageSize=e.totalSize:e.pageSize=20):console.log("请求列表失败"),e.loading=!1;case 6:case"end":return t.stop()}},t,e)}))()},nextPage:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Math.ceil(e.totalSize/20)!=e.pageNum){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,e.pbParams.pn++,e.pageNum++,t.next=7,h.getMessageList(e.pbParams);case 7:s=t.sent.data,console.log("下一页",s),0===s.code?(e.atNoticeList=e.atNoticeList.concat(s.data.messages),e.pageSize+=s.data.messages.length):console.log("请求下一页失败"),e.loading=!1;case 11:case"end":return t.stop()}},t,e)}))()},deleteReplyMessage:function(e){var t=this;return r()(o.a.mark(function s(){var a;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log(e),s.next=3,h.deleteMessage(e);case 3:0===(a=s.sent).data.code&&(console.log("删除成功啦",a),t.$message({message:"删除成功",type:"success"}),t.itemIndex=-1,t.loading=!0,t.initReplyMessage());case 5:case"end":return s.stop()}},s,t)}))()},getContent:function(e){return e.substring(2,e.lastIndexOf("}",e.lastIndexOf("}",e.length)-1))},getContentUrl:function(e){return e.substring(e.lastIndexOf('"',e.lastIndexOf('"',e.length)-1)+1,e.lastIndexOf('"',e.length))},personalPage:function(e){console.log(e),this.$router.push({name:"user",params:{uid:e}})}},mounted:function(){this.loading=!0,this.initReplyMessage()}},Bt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"atNoticeBox"},[e.loading?s("div",{staticClass:"wattingBox"},[s("img",{attrs:{src:"data:image/gif;base64,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"}}),e._v(" "),s("p",[e._v("加载数据中...")])]):e._e(),e._v(" "),s("p",{staticClass:"atNoticeTitle"},[e._v("   @我的")]),e._v(" "),s("div",{staticClass:"atNoticeInBox"},[s("darker-scroll",{staticClass:"scroll",staticStyle:{"margin-top":"0"},attrs:{"item-count":e.pageSize,"item-height":110,"item-spacing":20,"scroll-hight":740,"scroll-width":840},on:{nextPage:e.nextPage}},e._l(e.atNoticeList,function(t,a){return s("div",{key:t.id,staticClass:"atMsgItem"},[s("div",{staticClass:"atMsgInfoBox"},[s("img",{staticClass:"atAvatar",attrs:{src:t.publisher.face?t.publisher.face:"../../../static/img/noAvatar.jpg"},on:{click:function(s){e.personalPage(t.publisher.uid)}}}),e._v(" "),s("div",{staticClass:"atMsgInfo"},[s("div",{staticClass:"atMsgTitlBox"},[s("p",{staticClass:"ater",on:{click:function(s){e.personalPage(t.publisher.uid)}}},[e._v(e._s(t.publisher.nick))]),e._v(" "),s("p",{staticClass:"atTime"},[e._v(e._s(new Date(t.createTime).toLocaleString()))])]),e._v(" "),s("p",{staticClass:"atContent"},[s("a",{staticStyle:{color:"#409eff","font-size":"14px"},attrs:{href:e.getContentUrl(t.content)}},[e._v(e._s(e.getContent(t.content)))])])]),e._v(" "),s("el-popover",{attrs:{"popper-class":"del-pop",placement:"bottom",trigger:"hover"}},[s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.itemIndex=e.itemIndex==a?-1:a}}},[e._v("\n                      删除")]),e._v(" "),s("el-button",{staticStyle:{float:"right",padding:"2px 0",color:"#999",transform:"rotate(90deg)","font-size":"18px",top:"10px",right:"-50px",position:"relative"},attrs:{slot:"reference",icon:"el-icon-more",type:"text"},slot:"reference"})],1),e._v(" "),s("transition",{attrs:{name:"delConfirmTran"}},[a==e.itemIndex?s("div",{staticClass:"deleteConfirm"},[s("p",{staticClass:"deleteConfirmTip"},[e._v("确定删除吗？")]),e._v(" "),s("div",{staticClass:"confirmDeleBtnBox"},[s("p",{staticClass:"cancelDelBtn",on:{click:function(t){e.itemIndex=-1}}},[e._v("取消")]),e._v(" "),s("p",{staticClass:"confirmDelBtn",on:{click:function(s){e.deleteReplyMessage(t.id)}}},[e._v("确定")])])]):e._e()])],1),e._v(" "),s("div",{staticClass:"atAddr"},[s("p",{staticClass:"atAddrContent"},[s("a",{staticStyle:{color:"#03a9f4","font-size":"12px"},attrs:{href:e.getContentUrl(t.title)}},[e._v(e._s(e.getContent(t.title)))]),e._v("中@了你")])])])}))],1)])},staticRenderFns:[]};var bt={components:{darkerScroll:At},data:function(){return{loading:!1,itemIndex:-1,replyNoticeList:[],pageSize:0,pageNum:1,totalSize:0,pbParams:{type:2,pn:1,ps:20}}},methods:{deleteReplyMessage:function(e){var t=this;return r()(o.a.mark(function s(){var a;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log(e),s.next=3,h.deleteMessage(e);case 3:0===(a=s.sent).data.code&&(console.log("删除成功啦",a),t.$message({message:"删除成功",type:"success"}),t.itemIndex=-1,t.loading=!0,t.initReplyMessage());case 5:case"end":return s.stop()}},s,t)}))()},initReplyMessage:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getMessageList({type:2});case 2:s=t.sent.data,console.log("回复信息列表",s),0===s.code?(e.replyNoticeList=s.data.messages,e.totalSize=s.data.page.totalSize,s.data.page.totalSize<=20?e.pageSize=e.totalSize:e.pageSize=20):console.log("请求列表失败"),e.loading=!1;case 6:case"end":return t.stop()}},t,e)}))()},nextPage:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Math.ceil(e.totalSize/20)!=e.pageNum){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,e.pbParams.pn++,e.pageNum++,t.next=7,h.getMessageList(e.pbParams);case 7:s=t.sent.data,console.log("下一页",s),0===s.code?(e.replyNoticeList=e.replyNoticeList.concat(s.data.messages),e.pageSize+=s.data.messages.length):console.log("请求下一页失败"),e.loading=!1;case 11:case"end":return t.stop()}},t,e)}))()},getContent:function(e){return e.substring(2,e.lastIndexOf("}",e.lastIndexOf("}",e.length)-1))},getContentUrl:function(e){return e.substring(e.lastIndexOf('"',e.lastIndexOf('"',e.length)-1)+1,e.lastIndexOf('"',e.length))},personalPage:function(e){console.log(e),this.$router.push({name:"user",params:{uid:e}})}},mounted:function(){this.loading=!0,this.initReplyMessage()}},_t={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"replyNoticeBox"},[e.loading?s("div",{staticClass:"wattingBox"},[s("img",{attrs:{src:"data:image/gif;base64,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"}}),e._v(" "),s("p",[e._v("加载数据中...")])]):e._e(),e._v(" "),s("p",{staticClass:"replyNoticeTitle"},[e._v("   回复我的")]),e._v(" "),s("div",{staticClass:"replyNoticeInBox"},[s("darker-scroll",{staticClass:"scroll",staticStyle:{"margin-top":"0"},attrs:{"item-count":e.pageSize,"item-height":110,"item-spacing":20,"scroll-hight":740,"scroll-width":840},on:{nextPage:e.nextPage}},e._l(e.replyNoticeList,function(t,a){return s("div",{key:t.id,staticClass:"replyMsgItem"},[s("div",{staticClass:"replyMsgInfoBox"},[s("img",{staticClass:"replyAvatar",attrs:{src:t.publisher.face?t.publisher.face:"../../../static/img/noAvatar.jpg"},on:{click:function(s){e.personalPage(t.publisher.uid)}}}),e._v(" "),s("div",{staticClass:"replyMsgInfo"},[s("div",{staticClass:"replyMsgTitleBox"},[s("p",{staticClass:"replyer",on:{click:function(s){e.personalPage(t.publisher.uid)}}},[e._v(e._s(t.publisher.nick))]),e._v(" "),s("p",{staticClass:"replyTime"},[e._v(e._s(new Date(t.createTime).toLocaleString()))])]),e._v(" "),s("div",{staticClass:"replyContentBox"},[s("a",{staticClass:"replyContent",staticStyle:{color:"#409eff","font-size":"14px"},attrs:{href:e.getContentUrl(t.content)}},[e._v(e._s(e.getContent(t.content)))])])]),e._v(" "),s("el-popover",{attrs:{"popper-class":"del-pop",placement:"bottom",trigger:"hover"}},[s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.itemIndex=e.itemIndex==a?-1:a}}},[e._v("\n                      删除")]),e._v(" "),s("el-button",{staticStyle:{float:"right",padding:"2px 0",color:"#999",transform:"rotate(90deg)","font-size":"18px",top:"10px",right:"-50px",position:"relative"},attrs:{slot:"reference",icon:"el-icon-more",type:"text"},slot:"reference"})],1),e._v(" "),s("transition",{attrs:{name:"delConfirmTran"}},[a==e.itemIndex?s("div",{staticClass:"deleteConfirm"},[s("p",{staticClass:"deleteConfirmTip"},[e._v("确定删除吗？")]),e._v(" "),s("div",{staticClass:"confirmDeleBtnBox"},[s("p",{staticClass:"cancelDelBtn",on:{click:function(t){e.itemIndex=-1}}},[e._v("取消")]),e._v(" "),s("p",{staticClass:"confirmDelBtn",on:{click:function(s){e.deleteReplyMessage(t.id)}}},[e._v("确定")])])]):e._e()])],1),e._v(" "),s("div",{staticClass:"replyAddr"},[s("p",{staticClass:"replyAddrContent"},[s("a",{staticStyle:{color:"#03a9f4","font-size":"12px"},attrs:{href:e.getContentUrl(t.title)}},[e._v(e._s(e.getContent(t.title)))]),e._v("评论中回复了你")])])])}))],1)])},staticRenderFns:[]};var Rt={components:{darkerScroll:At},data:function(){return{loading:!1,systemNoticeList:[],pageSize:0,pageNum:1,totalSize:0,pbParams:{type:4,pn:1,ps:20}}},methods:{initMessage:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getMessageList({type:4});case 2:s=t.sent.data,console.log("系统信息列表",s),0===s.code?(e.systemNoticeList=s.data.messages,e.totalSize=s.data.page.totalSize,s.data.page.totalSize<=20?e.pageSize=e.totalSize:e.pageSize=20):console.log("请求列表失败"),e.loading=!1;case 6:case"end":return t.stop()}},t,e)}))()},nextPage:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Math.ceil(e.totalSize/20)!=e.pageNum){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,e.pbParams.pn++,e.pageNum++,t.next=7,h.getMessageList(e.pbParams);case 7:s=t.sent.data,console.log("下一页",s),0===s.code?(e.systemNoticeList=e.systemNoticeList.concat(s.data.messages),e.pageSize+=s.data.messages.length):console.log("请求下一页失败"),e.loading=!1;case 11:case"end":return t.stop()}},t,e)}))()}},mounted:function(){this.loading=!0,this.initMessage()}},kt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"systemNoticeBox"},[e.loading?s("div",{staticClass:"wattingBox"},[s("img",{attrs:{src:"data:image/gif;base64,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"}}),e._v(" "),s("p",[e._v("加载数据中...")])]):e._e(),e._v(" "),s("p",{staticClass:"systemNoticeTitle"},[e._v("   系统通知")]),e._v(" "),s("div",{staticClass:"systemNoticeInBox"},[s("darker-scroll",{staticClass:"scroll",staticStyle:{"margin-top":"0"},attrs:{"item-count":e.pageSize,"item-height":80,"item-spacing":20,"scroll-hight":740,"scroll-width":840},on:{nextPage:e.nextPage}},e._l(e.systemNoticeList,function(t){return s("div",{key:t.id,staticClass:"systemMsgItem"},[s("div",{staticClass:"systemInfo"},[s("p",{staticClass:"systemTitle"},[e._v(e._s(t.title))]),e._v(" "),s("p",{staticClass:"systemTime"},[e._v(e._s(new Date(t.createTime).toLocaleString()))])]),e._v(" "),s("p",{staticClass:"systemContent",domProps:{innerHTML:e._s(t.content)}})])}))],1)])},staticRenderFns:[]};var Et={components:{darkerScroll:At},data:function(){return{loading:!1,upvoteNoticeList:[],pageSize:0,pageNum:1,totalSize:0,pbParams:{type:5,pn:1,ps:20}}},methods:{initReplyMessage:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getMessageList({type:3});case 2:s=t.sent.data,console.log("点赞信息列表",s),0===s.code?(e.upvoteNoticeList=s.data.messages,e.totalSize=s.data.page.totalSize,s.data.page.totalSize<=20?e.pageSize=e.totalSize:e.pageSize=20):console.log("请求列表失败"),e.loading=!1;case 6:case"end":return t.stop()}},t,e)}))()},nextPage:function(){var e=this;return r()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Math.ceil(e.totalSize/20)!=e.pageNum){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,e.pbParams.pn++,e.pageNum++,t.next=7,h.getMessageList(e.pbParams);case 7:s=t.sent.data,console.log("下一页",s),0===s.code?(e.upvoteNoticeList=e.upvoteNoticeList.concat(s.data.messages),e.pageSize+=s.data.messages.length):console.log("请求下一页失败"),e.loading=!1;case 11:case"end":return t.stop()}},t,e)}))()},getContent:function(e){return e.substring(2,e.lastIndexOf("}",e.lastIndexOf("}",e.length)-1))},getContentUrl:function(e){return e.substring(e.lastIndexOf('"',e.lastIndexOf('"',e.length)-1)+1,e.lastIndexOf('"',e.length))},personalPage:function(e){console.log(e),this.$router.push({name:"user",params:{uid:e}})}},mounted:function(){this.loading=!0,this.initReplyMessage()}},Mt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upvoteNoticeBox"},[e.loading?a("div",{staticClass:"wattingBox"},[a("img",{attrs:{src:"data:image/gif;base64,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"}}),e._v(" "),a("p",[e._v("加载数据中...")])]):e._e(),e._v(" "),a("p",{staticClass:"upvoteNoticeTitle"},[e._v("   收到的赞")]),e._v(" "),a("div",{staticClass:"upvoteNoticeInBox"},[a("darker-scroll",{staticClass:"scroll",staticStyle:{"margin-top":"0"},attrs:{"item-count":e.pageSize,"item-height":80,"item-spacing":20,"scroll-hight":740,"scroll-width":840},on:{nextPage:e.nextPage}},e._l(e.upvoteNoticeList,function(t){return a("div",{key:t.id,staticClass:"upvoteItem"},[a("div",{staticClass:"upvoteInfo"},[a("div",{staticClass:"upvoteLogoBox"},[a("img",{staticClass:"upvoteLogo",attrs:{src:s("N5fP")}})]),e._v(" "),a("p",{staticClass:"upvoter",staticStyle:{color:"aquamarine"},on:{click:function(s){e.personalPage(t.publisher.uid)}}},[e._v(e._s(t.publisher.nick))]),e._v(" "),a("p",{staticClass:"upvoteContent"},[a("a",{staticStyle:{color:"#03a9f4","font-size":"14px"},attrs:{href:e.getContentUrl(t.title)}},[e._v(e._s(e.getContent(t.title)))])]),e._v(" "),a("p",{staticClass:"upvoteTime"},[e._v(e._s(new Date(t.createTime).toLocaleString()))])])])}))],1)])},staticRenderFns:[]};var St={components:{leftMenu:nt,at:s("VU/8")(yt,Bt,!1,function(e){s("Zcjw"),s("N3RQ")},"data-v-effee6ec",null).exports,reply:s("VU/8")(bt,_t,!1,function(e){s("Iq8B"),s("+83u")},"data-v-f56ac76c",null).exports,system:s("VU/8")(Rt,kt,!1,function(e){s("eNT2"),s("57+p")},"data-v-12db0ff7",null).exports,upvote:s("VU/8")(Et,Mt,!1,function(e){s("k03T")},"data-v-3cde19a9",null).exports},data:function(){return{menuTitle:"消息",pageIndex:this.$route.query.pageNum,test:{0:"系统通知",1:"回复我的",2:"@我的",3:"收到的赞"}}}},Dt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"noticeBox"},[s("div",{staticClass:"noticeInBox"},[s("left-menu",{staticClass:"leftMenu",attrs:{"menu-title":e.menuTitle,"btn-title":e.test,"page-index":e.pageIndex},on:{"update:pageIndex":function(t){e.pageIndex=t}}}),e._v(" "),s("div",{staticClass:"msgListBox"},[0==e.pageIndex?s("system"):e._e(),e._v(" "),1==e.pageIndex?s("reply"):e._e(),e._v(" "),2==e.pageIndex?s("at"):e._e(),e._v(" "),3==e.pageIndex?s("upvote"):e._e()],1)],1)])},staticRenderFns:[]};var Tt=s("VU/8")(St,Dt,!1,function(e){s("IF2z")},"data-v-d0b9dd38",null).exports,Nt={data:function(){return{verifyResult:{code:1,result:""}}},methods:{verifyEmailAddr:function(e,t){var s=this;return r()(o.a.mark(function a(){var i,n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.verifyEmail(e,t);case 2:i=a.sent,n=i.data,console.log("rd:",n),s.verifyResult.code=n.code,s.verifyResult.result=n.msg;case 7:case"end":return a.stop()}},a,s)}))()},jmpToMain:function(){this.$router.push({name:"index"})}},created:function(){var e=this.$route.query.userId,t=this.$route.query.uuid;console.log("userId:",e),console.log("uuid:",t),e&&t?this.verifyEmailAddr(e,t):this.verifyResult.result="邮箱验证失败"}},Ut={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"email-verify"},[t("div",{staticClass:"verify-result"},[this._v("\n        "+this._s(this.verifyResult.result)+"\n    ")]),this._v(" "),t("div",{staticStyle:{"margin-top":"40px"}},[t("el-button",{attrs:{type:"primary"},on:{click:this.jmpToMain}},[this._v("回到首页")])],1)])},staticRenderFns:[]};var jt=s("VU/8")(Nt,Ut,!1,function(e){s("NojM")},"data-v-366ffa3f",null).exports,Ft={name:"hello",data:function(){return{imgList:[],size:0}},methods:{limitClick:function(e){this.imgList=[],this.limit=e?2:void 0},fileClick:function(){document.getElementById("upload_file").click()},fileChange:function(e){e.target.files[0].size&&(this.fileList(e.target),e.target.value="")},fileList:function(e){for(var t=e.files,s=0;s<t.length;s++)""!=t[s].type?(console.log("fileList",e),this.fileAdd(t[s])):this.folders(e.items[s])},folders:function(e){var t=this;e.kind&&(e=e.webkitGetAsEntry()),e.createReader().readEntries(function(e){for(var s=0;s<e.length;s++)e[s].isFile?t.foldersAdd(e[s]):t.folders(e[s])})},foldersAdd:function(e){var t=this;e.file(function(e){t.fileAdd(e)})},fileAdd:function(e){if(console.log("fileAdd:",e),void 0!==this.limit&&this.limit--,!(void 0!==this.limit&&this.limit<0))if(this.size=this.size+e.size,-1==e.type.indexOf("image"))e.src="wenjian.png",this.imgList.push({file:e});else{var t=new FileReader,s=new Image,a=this;t.readAsDataURL(e),t.onload=function(){e.src=this.result,s.onload=function(){var t=s.width,i=s.height;e.width=t,e.height=i,a.imgList.push({file:e}),console.log(a.imgList)},s.src=e.src}}},fileDel:function(e){this.size=this.size-this.imgList[e].file.size,this.imgList.splice(e,1),void 0!==this.limit&&(this.limit=this.imgList.length)},bytesToSize:function(e){if(0===e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1e3));return(e/Math.pow(1e3,t)).toPrecision(3)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]},dragenter:function(e){e.stopPropagation(),e.preventDefault()},dragover:function(e){e.stopPropagation(),e.preventDefault()},drop:function(e){e.stopPropagation(),e.preventDefault(),this.fileList(e.dataTransfer),console.log("drop:",e)}}},Lt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hello"},[s("button",{on:{click:function(t){e.limitClick(1)}}},[e._v("点击设置上传数量：2")]),e._v(" "),s("button",{on:{click:function(t){e.limitClick(0)}}},[e._v("点击取消上传数量")]),e._v(" "),s("div",{staticClass:"upload"},[s("div",{staticClass:"upload_warp"},[s("div",{staticClass:"upload_warp_left",on:{click:e.fileClick}},[s("img",{attrs:{src:""}})]),e._v(" "),s("div",{staticClass:"upload_warp_right",on:{drop:function(t){e.drop(t)},dragenter:function(t){e.dragenter(t)},dragover:function(t){e.dragover(t)}}},[e._v("\n        或者将文件拖到此处\n      ")])]),e._v(" "),s("div",{staticClass:"upload_warp_text"},[e._v("\n      选中"+e._s(e.imgList.length)+"张文件，共"+e._s(e.bytesToSize(this.size))+"\n    ")]),e._v(" "),s("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"upload_file",multiple:""},on:{change:function(t){e.fileChange(t)}}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.imgList.length,expression:"imgList.length!=0"}],staticClass:"upload_warp_img"},e._l(e.imgList,function(t,a){return s("div",{key:a,staticClass:"upload_warp_img_div"},[s("div",{staticClass:"upload_warp_img_div_top"},[s("div",{staticClass:"upload_warp_img_div_text"},[e._v("\n            "+e._s(t.file.name)+"\n          ")]),e._v(" "),s("img",{staticClass:"upload_warp_img_div_del",attrs:{src:""},on:{click:function(t){e.fileDel(a)}}})]),e._v(" "),s("img",{attrs:{src:t.file.src}})])}))])])},staticRenderFns:[]};var Qt=s("VU/8")(Ft,Lt,!1,function(e){s("L7fJ")},"data-v-4538586e",null).exports,zt={name:"bangumiDetail",data:function(){return{episodes:"",page:"",bid:"",rpid:"",bangumi:"",blurImageStyle:""}},components:{"real-comment":Ke},methods:{initEpisodes:function(e){var t=this;return r()(o.a.mark(function s(){var a,i;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.getEpisodesByBid(e);case 2:a=s.sent,i=a.data,console.log(i),0===i.code?(t.episodes=i.data.episodes,t.page=i.data.page):console.log("getEpisodeByBid err!");case 6:case"end":return s.stop()}},s,t)}))()},initBangumi:function(e){var t=this;return r()(o.a.mark(function s(){var a,i;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("init bangumi, bid:",e),s.next=3,h.getBangumiById(e);case 3:a=s.sent,i=a.data,console.log("bangumi res:",i),0===i.code?(t.bangumi=i.data,t.blurImageStyle={"background-image":"url("+(i.data.thumb?i.data.thumb:"../../../static/img/1.jpg")+")"},console.log("blurImageStyle:",t.blurImageStyle)):console.log("no bangumi founded, bid:",e);case 7:case"end":return s.stop()}},s,t)}))()}},created:function(){console.log("bangumiDetail created!");var e=this.$route.params.bid,t=this.$route.params.bangumi,s=this.$route.query.rpid;console.log("bid:",e),console.log("bangumi:",t),e?(this.bid=parseInt(e),this.initBangumi(e),this.initEpisodes(e)):console.log("no bid"),s&&(this.rpid=s)}},Gt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bangumi-detail"},[s("div",{staticClass:"bangumi-bg-wrap"},[s("div",{staticClass:"bangumi-bg-blur"},[s("div",{staticClass:"bangumi-bg-blur-img",style:e.blurImageStyle})])]),e._v(" "),s("div",{staticClass:"searchResultBgInBox"}),e._v(" "),s("div",{staticClass:"bangumi-top"},[s("div",{staticClass:"top-inner"},[s("div",{staticClass:"bangumi-name"},[s("span",[e._v(e._s(e.bangumi.bangumiName))])]),e._v(" "),s("div",{staticClass:"bangumi-thumb"},[s("img",{attrs:{src:e.bangumi.thumb?e.bangumi.thumb:"../../../static/img/1.jpg"}})])])]),e._v(" "),s("div",{staticClass:"bangumi-bottom"},[s("div",{staticClass:"bottom-inner"},[s("div",{staticClass:"bangumi-episodes"},e._l(e.episodes,function(t){return s("a",{key:t.epId,staticClass:"episode-link",attrs:{target:"_blank",href:"#/video/"+t.epId}},[e._v("\n          "+e._s(t.epIndex)+"\n        ")])}))])]),e._v(" "),s("div",{staticClass:"comment-container"},[s("real-comment",{attrs:{oid:e.bid,type:3,rpid:e.rpid}})],1)])},staticRenderFns:[]};var Ot=s("VU/8")(zt,Gt,!1,function(e){s("LQRp")},"data-v-62c965f2",null).exports,Pt={name:"announce",data:function(){return{notice:"",hasInfo:"",nid:"",rpid:""}},components:{"real-comment":Ke},filters:{formatDate:function(e){return ye(new Date(e),"yyyy-MM-dd hh:mm")}},methods:{initNotice:function(e){var t=this;return r()(o.a.mark(function s(){var a,i;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.getNoticeById(e);case 2:a=s.sent,0===(i=a.data).code?t.notice=i.data:console.log("init notice err");case 5:case"end":return s.stop()}},s,t)}))()}},created:function(){var e=this.$route.params.id,t=this.$route.query.rpid;console.log("id:",e),console.log("rpid:",t),e&&(this.initNotice(e),this.nid=parseInt(e)),t&&(this.rpid=t)}},Ht={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"announce"},[s("div",{staticClass:"page-container"},[s("div",{staticClass:"title-container"},[s("h1",[e._v(e._s(e.notice.title))]),e._v(" "),s("div",{staticStyle:{color:"white"}},[s("span",[s("i",{staticClass:"el-icon-date",staticStyle:{"padding-right":"5px"},attrs:{title:"发布时间"}}),e._v(e._s(e._f("formatDate")(e.notice.createTime)))]),e._v(" "),s("span",{staticStyle:{"margin-left":"15px"}},[s("i",{staticClass:"el-icon-view",staticStyle:{"padding-right":"5px"},attrs:{title:"阅读量"}}),e._v(e._s(e.notice.viewCount))])])]),e._v(" "),s("div",{staticClass:"content-container"},[s("div",{staticClass:"ctx-text",domProps:{innerHTML:e._s(e.notice.content)}})])]),e._v(" "),s("div",{staticClass:"bottom-container"},[s("real-comment",{attrs:{oid:e.nid,type:2,rpid:e.rpid}})],1)])},staticRenderFns:[]};var Yt=s("VU/8")(Pt,Ht,!1,function(e){s("blMt"),s("/OfW")},"data-v-cd3fb500",null).exports,Kt={name:"userProfile",data:function(){return{userInfo:"",uid:"",rpid:""}},components:{"real-comment":Ke},methods:{initUserInfo:function(e){var t=this;return r()(o.a.mark(function s(){var a,i;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.getUserInfoByUid(e);case 2:a=s.sent,0===(i=a.data).code?(console.log("获取用户信息成功,",i.data),t.userInfo=i.data):t.$message({message:i.msg,type:"error"});case 5:case"end":return s.stop()}},s,t)}))()}},created:function(){console.log("UserProfile.vue created!");var e=this.$route.params.uid,t=this.$route.query.rpid;console.log("uid is:",e),e?(this.uid=parseInt(e),this.initUserInfo(e)):console.log("uid为空"),t&&(this.rpid=t)}},Jt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-p-container"},[s("div",{staticClass:"profile-outter"},[s("div",{staticClass:"profile-wrapper"},[s("div",{staticClass:"u-avatar"},[s("img",{staticClass:"avatar-img",attrs:{src:e.userInfo.face?e.userInfo.face:"../../../static/img/noAvatar.jpg"}})]),e._v(" "),s("div",{staticClass:"u-infos"},[s("div",{staticClass:"u-nick"},[s("span",{staticStyle:{"font-size":"22px"}},[e._v(e._s(e.userInfo.nick))])]),e._v(" "),s("div",{staticClass:"u-id"},[s("span",[e._v("id:"+e._s(e.userInfo.uid?e.userInfo.uid:e.userInfo.userId))])]),e._v(" "),s("div",{staticClass:"u-sex"},[s("span",[e._v("性别 "+e._s(e.userInfo.sex))])])])]),e._v(" "),s("div",{staticClass:"u-sign"},[s("p",{staticClass:"u-sign-title"},[e._v("个人签名")]),e._v(" "),s("p",[e._v(e._s(e.userInfo.sign))])])]),e._v(" "),s("div",{staticClass:"comment-container1"},[s("real-comment",{attrs:{oid:e.uid,type:4,rpid:e.rpid}})],1)])},staticRenderFns:[]};var Vt=s("VU/8")(Kt,Jt,!1,function(e){s("965u")},"data-v-5dae087f",null).exports,Xt={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"contactUsBox"},[s("div",{staticClass:"contactUsInBox"},[s("div",{staticClass:"contactBlock"},[s("div",{staticClass:"columnLine"},[s("p",[e._v("● 合作洽谈")])]),e._v(" "),s("div",{staticClass:"blockItemBox"},[s("div",{staticClass:"blockItem"},[s("p",{staticClass:"blockTitle"},[e._v("广告投放")]),e._v(" "),s("div",{staticClass:"contactUsWay"},[s("p",[e._v("联系邮箱：ad@darker.online")])])]),e._v(" "),s("div",{staticClass:"blockItem"},[s("p",{staticClass:"blockTitle"},[e._v("商务合作")]),e._v(" "),s("div",{staticClass:"contactUsWay"},[s("p",[e._v("联系邮箱：echisan@darker.online")])])])])]),e._v(" "),s("div",{staticClass:"contactBlock"},[s("div",{staticClass:"columnLine"},[s("p",[e._v("● 版权问题")])]),e._v(" "),s("div",{staticClass:"blockItemBox"},[s("div",{staticClass:"blockItem"},[s("p",{staticClass:"blockTitle"},[e._v("版权问题")]),e._v(" "),s("div",{staticClass:"contactUsWay"},[s("p",[e._v("联系邮箱：help@darker.online")])])])])])])])}]};var Zt=s("VU/8")({},Xt,!1,function(e){s("NgdH")},"data-v-7c16ee13",null).exports,Wt={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"aboutUsBox"},[a("div",{staticStyle:{margin:"0 auto"}},[a("img",{attrs:{src:s("HcXq"),width:"100%"}})]),e._v(" "),a("div",{staticStyle:{margin:"50px auto",width:"100%",height:"200px"}},[a("div",{staticStyle:{margin:"70px auto"}},[a("p",[a("span",{staticStyle:{"font-size":"30px","font-weight":"bold"}},[e._v("Darker ")]),e._v("是一个在线弹幕网站")]),e._v(" "),a("p",[e._v("B站找不到视频吗？只能下载到本地孤零零一人空虚寂寞冷地看吗？现在我们诚心为您提供一个拥有弹幕资源的在线视频播放器。")]),e._v(" "),a("p",[e._v("只要您有视频，就能共享弹幕，本地视频从此不再单调！")])])]),e._v(" "),a("div",{staticStyle:{margin:"-30px auto",width:"100%",height:"300px",display:"flex","flex-direction":"row"}},[a("div",{staticStyle:{display:"flex","flex-direction":"row",margin:"auto auto"}},[a("div",{staticStyle:{height:"150px",width:"300px",border:"1px solid black"}},[a("p",{staticStyle:{"font-size":"20px",margin:"30px"}},[e._v("自动识别本地视频")]),e._v(" "),a("p",{staticStyle:{color:"wheat"}},[e._v("★★★★★")])]),e._v(" "),a("div",{staticStyle:{height:"150px",width:"300px",border:"1px solid black"}},[a("p",{staticStyle:{"font-size":"20px",margin:"30px"}},[e._v("提供在线弹幕")]),e._v(" "),a("p",{staticStyle:{color:"wheat"}},[e._v("★★★★★")])]),e._v(" "),a("div",{staticStyle:{height:"150px",width:"300px",border:"1px solid black"}},[a("p",{staticStyle:{"font-size":"20px",margin:"30px"}},[e._v("提供在线评论")]),e._v(" "),a("p",{staticStyle:{color:"wheat"}},[e._v("★★★★★")])])])])])}]};var qt=s("VU/8")({},Wt,!1,function(e){s("3p5y")},"data-v-00deeece",null).exports,$t={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var es=s("VU/8")({name:"blank"},$t,!1,function(e){s("D1bT")},"data-v-120187fa",null).exports;a.default.use(S.a);var ts=new S.a({routes:[{path:"/",name:"index",component:N},{path:"/searchResult",name:"searchResult",component:$},{path:"/onlineList",name:"onlineList",component:se},{path:"/movieInfo",name:"movieInfo",component:ie},{path:"/video",name:"watch",component:Xe},{path:"/video/:epid",name:"watch",component:Xe},{path:"/login",name:"login",component:qe},{path:"/register",name:"register",component:tt},{path:"/forget",name:"forget",component:it},{path:"/personal",name:"personal",component:xt},{path:"/notice",name:"notice",component:Tt},{path:"/notice/:id",name:"notice",component:Tt},{path:"/vemail",name:"vemail",component:jt},{path:"/test",name:"test",component:Qt},{path:"/bangumi/:bid",name:"bangumiDetail",component:Ot},{path:"/announce/:id",name:"announce",component:Yt},{path:"/user/:uid",name:"user",component:Vt},{path:"/contactUs",name:"contactUs",component:Zt},{path:"/aboutUs",name:"aboutUs",component:qt},{path:"/blank",name:"blank",component:es}]}),ss={uploadURL:"imgur-api/3/image",imgURL:"imgur",uploadHEADERS:{Authorization:"Client-ID 3855bbe9883a511"},DOInviteLink:"https://m.do.co/c/d613f7268902",danmakuURL:"https://api.darker.me/dplayer3/",wsURL:"wss://api.darker.me"};a.default.config.productionTip=!1,a.default.use(M.a),a.default.prototype.GLOBAL=ss,new a.default({el:"#app",router:ts,components:{App:k},template:"<App/>"})},NgdH:function(e,t){},NojM:function(e,t){},OEJT:function(e,t){},OFa8:function(e,t){},OkLb:function(e,t){},"Q+m0":function(e,t){},QCLj:function(e,t){},"Qb+L":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAQC0lEQVR4Xu2djbXcthGFgQrsVGC5gsgVWNwGLFfg5wqsVGC5gsgVxK7AUgMLuYLIFcSpIHIFyLlPQ4favH3kghhghrg8Z49/HgkSd/BxZvDHGHhQASpwVYFIbagAFbiuAAFh66ACjyhAQNg8qAABYRugAmUK0IOU6carBlGAgAxiaFazTAECUqYbrxpEAQIyiKFZzTIFCEiZbrxqEAUIyCCGZjXLFCAgZbrxqkEUICCDGJrVLFOAgJTpxqsGUYCADGJoVrNMAQJSphuvGkQBAjKIoVnNMgUISJluvGoQBQjIIIZmNcsUICBluvGqQRQgIIMYmtUsU4CAlOnGqwZRgIAMYmhWs0wBAlKmG68aRAECMoihWc0yBQhImW68ahAFCMgghmY1yxQgIGW68apBFCAggxia1SxTgICU6carBlGAgAxiaFazTAECUqYbrxpEAQIyiKFZzTIFCEiZbrxqEAUIyCCGZjXLFCAgZbrxqkEUICCDGJrVLFOAgJTpxqsGUYCADGJoVrNMAQJSphuvGkQBAjKIoVnNMgUISJluvGoQBQjIIIZmNcsUICBluvGqQRQgIIMYmtUsU4CAlOnGqwZRgIAMYmhWs0wBAlKm2+6rUkqf5pz/uqWgGONv0zS933Iuz6mrAAGpq2eYG36M8UkIAb9PQwhP5TbPKt3uXQgBwOCHfw8557cxxj+mabr/bx51FCAgO3Q8n89fxhjR+PEDDLUA2PFU95f+Lr+3Oed34oHw/3jcqAAB2ShYSgkAfCkwAITZK2wswcRpb0MIgAbehmHbBpMQkCsiSagED/FcPAMAOdqBcAzAvD6dTr8erXI16kNAFiqKl/gqhHDn1EPsbROvQwj4vWGnwAcphweEUFxlCuHYT6PDMiQgCJ9CCPAULwb1FLd6mnvPMk3Tz7de6P38oQBJKSG5/kZCKO+26/H86FaGV/lxmqYhesUOD8jCW7yUrtgeDeuI97wPwY7uVQ4LiOQW8BYIoxBSmTlyzv/GOEWMEY1sPubBv/m/l2MqT3POT2KMm0beG1cUnuRVCOHnIyb2hwNEwPjeWBj1Bt2p+O0d6U4pYfwF8DzLOT+LMX7SGIhrt0P4BVAQfh1mWsxhALEERs75jxjjnNjin2qHAHOXc74zAsuhQHEPiOQYf7fgMXLOv8YYkcSix6f5WzSl9Dzn/CLGiBH/3schQHELiIDxnYUcQ8B4OU3TMqfo1kDRW5dzfmkEFOQo0MZlF7FLQFJKSL6790rlnH+LMb6wAsYlkcZAQSfE36xqde1t5goQibcRTnWdNSs5xqtpmgCp+SOlhBzllZEcBSEoQGkegpYYygUgi3Cqe4OUcOrO20CZaIjGiRkEvQ/AAc9rPuwyD4iMfv/DyCDfD168xjUCjHkT5GzfWn7ZmAVE3ngYz8BAX9dDQqrn3uLnRyDBwOPrGONnXYX9cHN4E0Ci2h1eWk+TgEiu8YsFryGJOEKqQy1llfUuWDhlZXQegAAUU7mJOUBSSui6xYhs90PgeGbNaLWEMQgJuoS/tvQyMgOIhFTINbCCr/txdDiWAqeUkLyj69zKgQT+RwsPYwIQSyEVjDISHHMjPJ/PCLcsjMDPj2SiO7g7IOhVCSFgbMPEjFtJyJ9a7lnReLMaDLdQTeR9U88QtysgKSX0UnUf25gbnMCBnONQCflWoAQSbBNkoXdrfmwk7YCki026AGJpguFF40GCaLK7cWsj33uehLv/3FtO5eu7dQU3B0TgSAbXgmPBD8K94Y+UErw6vLu1A93AyE2aHU0BsQrHiEn5WgszmLTPj9wUkmaAWIVDVEeMa2Kq+lrDbfV3LECTbUutrFhcVr0ZJE0AMQ4HQ6sr1BkOtfDETSBRB8QyHNJr9aRnN2Irj1B6n/P5jM0lLPVqNfUkqoBYhkNUxroEE9NaShuw9nUymxqdKlYP1Z5HbUDQXWhyF3R4j9PpZGJw0mrLm5/LcMKOR1QdJ1EDJKWEeVWWu027ru1YbGiHuWcAdfmhneUHcrpvJi2zHWBPqwcg+VwjVFYBxHhyh7lW2JanS+4h6+nx4rh12XDX/XGN5yIA9900TV/UJrg6INh6JoSAtRyWD2xu1nQhlsTymHO2N+TssvmBAy+C9lbdrlUBkc3bkHdYj+2/aDW3R3FaTdPZrlKP/1h+68mzVU3aawOC3o5bQ4emmmPU/HQ67X2Lb3rmBr14TWe7ppQQ5lnY9OEx/avmI9UAsZ53LBRt0rUrk/7wwtD2ps1W4TkJn2Fq7Gz59aa32MpJVQCR0OpfNR6oQRno7VD9tkUDz3EpUzNPklLKDWxU4xZVQq1agJgPraA4PjtwOp3UP8aZUkInReulw9Xemo+1TuNjIstHx0sQueauTSB2A+Kkd2MWTn3eVedQU31sp3P9bvUsu/WoAQhCK/W38q3KXDlfdYKbhFbQQzvvuCZH1QT1oZs4mHqyfOzdeuwCxJn3gHCq+YeRt+vut+bay8hRHoKq7NJjLyCevAcWNu+q72MNx9AY0O635hog5/MZ69atbDi39ri/T9P0+dpJ1/5e3GCcudr7rXw0xz+MeVPVUNJRoj63++IerT2AWNts7NGXBHZlP51OaoOYxgbR3kzTpNaLZiSUvMUpFOuxBxBMO+iVjN4iznzurlh07YbW4nLlcBKTLS3P7r001/tpmv6yZsOH/l4EiLfwSiquBohRPdTW2Rut71r7L9KjFBDMhMXMVE8HAalkLaeAFE0xKgXE6r5JjzUBtcTVaEw+2gthDf8iPUoB8TCr81KwIhe7pjr+TkC2qNT9nKJEnYBUsBsBqSCifhFF04xKAWGItTAoAdFv3RXu0DTEYpL+MSAYX7G2NY5mSGmxvmsMFeWgpR4EK/Ks7QC+JlDRG2StUMlBLDYYAvKx8YqWWRcBgvuez+f3Rj5Mv6UN4xw1QAQSUwuJOFD4v2axZx1QMSAGv2v3KCicarL1PbJ+ntGc67EHL0rQUeAeQCyGFY+JpLJv0nxDTlZcB6vjGUXh1S5AJMyyvLHx/9lDOeww8bmAFpvipZTMbil7afS9kUOxB5G429ukNS6YqvAatzYxc6VKRb1Xc5m7AHHoRXaJtda25COY8KpdPjrTyHu4Ca33JOfVAHG0VxLqXJysrcGxyEV6DqKq9tRJ1NCzflvNMJ+3u6t7twcRL2LtI/TXhNy1/HKrdTotniqaa7S1TvN5XlYT7s09qnkQeatgVxNuHCeqSqiFl0aTddstP0LqIf+QUPNpjQ0Cq3gQZ663aF3ArW9abD2ac36t/fkyxNkxxuctNuN2FE5Xs3E1QByFWqrjIUuQtD1JS88hL0HzyxxqhVZVQ6xFgmpiLGDD27544GhD2R+dIpvJ4TuI39x67cr56h0Ol7CHEEx//qBmaKUCiLxlPHQDVv/QylrjxzLVnPPLGOOXa+c+9ne8IWOML1t/193YTIFrEu3utbosuGqIZaSrc0v7U99c7dpDSEPDljy3fmfjjWzrj+2Wmh8pJeubBKp0casAIp7E+r5ZKoJubbkSegGU5znn+494zr1eyC3w9dYYI0Cev024a5fyrc/10HkOvIdauKkGiCTtlreoLN4raU9j83htSsns5y20d8xUBUS7F6dCY6vWHVjhWUwWYXmLnxa9eKqASKj1ac652aDZja2sWy5y43N2O91q7tECDoiuDogDSNTi126tutKNrS6MksFRjJSr52VNAHEASfXuwUpttFsxhj7n8JEGMtbxrMXMgWYeZNH9azXcavYRzG4t/sYbW0zMW4VVS6maeRAHkPw0TdO3N7ajQ55uMbTqAUdzD7KEJISgMf1ib4NVXVC19+FaXC/fdze1pZPMHsCETPWc41Lj5h5k+QAG31QwAPIRhFzDHQY+QvqQ5l07UboCIsn7Xc75Va9lqg9YBJBgMiO+sz3MIXBgQBCbAlo5uo9TdQdEIGmyduIGqw+XtFvaqUR6qhBSvb3BZiqnmgBEIMF8JMzfunUSn4owIYRhIEkp4XNq2KGm+yHJOOAw4cHNALJI4C1tjH1oSAyGVc2XIay9EcwBYjDkAiTo3TpU4m4JDgmp7qZpwsxlU4dJQBYhF7aY+c6AYkjc8a3t7jFxDS2kK/eXEAI22+h9YJ0L4Gjehbul4mYBWYRcWIn3k/bmB1vECiFgJd8PG881eZqVtR3iNaAnxsPMHuYBWXgT5CbfG1ASXgQhl4kkcqseElIhGccird6Haa+xFMcFIAtvgu5gjJnsWtddoXUgHHjlxZuklLBhBN7U6Cnsdsgs3BcWc41rorgCZAEKBhexAcJn3az94cZI3DGYZTI3kcVO8LrYSKPbIeEUXijIKV0dLgFZhl055xcGRuEBCNa4mwDFChhCws+Su7kKSWeK3QKy8CYIG6xMfAQgGOzEPrnNe2UklMKAX1ePAdvIBEOEU667x90DsgAFXZZw4bU3aCsJCe53I8HWo6fTCQmp2iFdtugKR/LdNcdYgNF83y4tgQ8DiFFQ5sfCABi8y69736gCBDop4CXw6w7FEcE4TIh17c0hS0aRzFvIUS4fE/E4fn/mLDlnhCJzWIY9spazamcQLM20neuEHAMJuOtQ6lo7OpwHuazovEGbkV4vrUigabnSK4VcC2C4TL63CnZ4QJZCSO8OklgLecpWG5k5TxJvLE3usv1pDyGGAuSi5wvh112rj9z0MG6Ne8rgHnKow3uLh/QaEpALr4LeL8DynLB8UEZCKEABb2FibKcG7CVlDA/IA7BgM+nhPMvCUwCKQybcBKREgSvXSHKP3iMA88zAtJaKtfvTS8A74Pf66Ml2qXj0IBuVk27j+7GHnPNTb+GYeAh4hnso6CW2GZ6AbNPpwbOkVwxjE5hl/MTALOM5h8BXqDCmMgOB7zI2n/qyQ1ozlxKQyqaQ0AzQIPnHD9utzgN88Dyf7L0lultRRoxxHnCcYcB34A89LrFXu1uvJyC3KlbxfPFAqyWO3pO0KpDiCQREUVwW7V8BAuLfhqyBogIERFFcFu1fAQLi34asgaICBERRXBbtXwEC4t+GrIGiAgREUVwW7V8BAuLfhqyBogIERFFcFu1fAQLi34asgaICBERRXBbtXwEC4t+GrIGiAgREUVwW7V8BAuLfhqyBogIERFFcFu1fAQLi34asgaICBERRXBbtXwEC4t+GrIGiAgREUVwW7V8BAuLfhqyBogIERFFcFu1fAQLi34asgaICBERRXBbtXwEC4t+GrIGiAgREUVwW7V8BAuLfhqyBogIERFFcFu1fAQLi34asgaICBERRXBbtXwEC4t+GrIGiAgREUVwW7V8BAuLfhqyBogIERFFcFu1fAQLi34asgaICBERRXBbtXwEC4t+GrIGiAgREUVwW7V8BAuLfhqyBogIERFFcFu1fAQLi34asgaICBERRXBbtXwEC4t+GrIGiAgREUVwW7V8BAuLfhqyBogIERFFcFu1fAQLi34asgaICBERRXBbtX4H/Ar1QciNhE1aJAAAAAElFTkSuQmCC"},REjL:function(e,t){},SyLs:function(e,t){},T5DL:function(e,t){},ZBJ4:function(e,t,s){e.exports=s.p+"static/img/logo.c0b66fa.png"},Zcjw:function(e,t){},bUf8:function(e,t){},blMt:function(e,t){},d2rv:function(e,t){},eNT2:function(e,t){},gbbA:function(e,t){},k03T:function(e,t){},k6Mo:function(e,t){},qq05:function(e,t){},rQWP:function(e,t){},tvR6:function(e,t){},uCee:function(e,t){},uabP:function(e,t){e.exports="data:image/png;base64,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"},v39d:function(e,t){},vxG1:function(e,t){},wOT3:function(e,t){},yFAy:function(e,t){},ySsC:function(e,t){},yVSQ:function(e,t){},zRwx:function(e,t,s){e.exports=s.p+"static/img/1.9f367cf.jpg"}},["NHnr"]);
//# sourceMappingURL=app.fc5bedc5de774e8535c0.js.map